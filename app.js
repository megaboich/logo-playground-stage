!function(e){function t(t){for(var n,a,s=t[0],u=t[1],l=t[2],p=0,d=[];p<s.length;p++)a=s[p],i[a]&&d.push(i[a][0]),i[a]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);for(c&&c(t);d.length;)d.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,s=1;s<r.length;s++){var u=r[s];0!==i[u]&&(n=!1)}n&&(o.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},i={0:0},o=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var c=u;o.push([271,1]),r()}({100:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=function(e,t,r){var n;return void 0===t&&(t=50),void 0===r&&(r={isImmediate:!1}),function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=this,s=function(){n=void 0,r.isImmediate||e.apply(a,i)},u=r.isImmediate&&void 0===n;void 0!==n&&clearTimeout(n),n=setTimeout(s,t),u&&e.apply(a,i)}}},101:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(72),o=r(702),a=r(703),s=r(35),u=r(104),l=r(248),c=r(46);t.envThunks={initEnv:function(){var e=this;return function(t,r){return n.__awaiter(e,void 0,void 0,function(){var e,r;return n.__generator(this,function(n){switch(n.label){case 0:return t(i.envActionCreator.initEnvStarted()),[4,o.loadConfig()];case 1:return e=n.sent(),[4,a.DISetup.setup({appConfig:e})];case 2:return r=n.sent(),t(i.envActionCreator.applyUserSettingsCompleted(r.userSettings)),t(i.envActionCreator.signInCompleted(r.user)),[2]}})})}},signIn:function(e){var r=this;return function(i,o){return n.__awaiter(r,void 0,void 0,function(){return n.__generator(this,function(r){switch(r.label){case 0:return[4,s.resolve(u.AuthService).signIn(e)];case 1:return r.sent(),i(t.envThunks.initEnv()),s.resolve(c.EventsTrackingService).sendEvent(c.EventAction.userLogin),[2]}})})}},signOut:function(){var e=this;return function(r,i){return n.__awaiter(e,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:return[4,s.resolve(u.AuthService).signOut()];case 1:return e.sent(),r(t.envThunks.initEnv()),s.resolve(c.EventsTrackingService).sendEvent(c.EventAction.userLogout),[2]}})})}},applyUserSettings:function(e,r){var o=this;return function(a,u){return n.__awaiter(o,void 0,void 0,function(){var o,u;return n.__generator(this,function(n){switch(n.label){case 0:return[4,(o=s.resolve(l.UserSettingsService)).update(e)];case 1:return n.sent(),r&&r.rebindServices?(a(t.envThunks.initEnv()),[3,4]):[3,2];case 2:return[4,o.get()];case 3:u=n.sent(),a(i.envActionCreator.applyUserSettingsCompleted(u)),n.label=4;case 4:return[2]}})})}},showNotificationAutoClose:function(e,t,r){var o=this;return function(a,s){return n.__awaiter(o,void 0,void 0,function(){var o;return n.__generator(this,function(n){return a(i.envActionCreator.showNotification(e,t,r)),o=s().env.notifications[0].id,setTimeout(function(){a(i.envActionCreator.closeNotification(o))},3e3),[2]})})}}}},102:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.storageKey=e,this.defaultValue=t}return e.prototype.getValue=function(){if("undefined"==typeof window)return this.defaultValue;var e=window.localStorage.getItem(this.storageKey);return e&&""!=e?JSON.parse(e):this.defaultValue},e.prototype.setValue=function(e){"undefined"!=typeof window&&(void 0===e?window.localStorage.removeItem(this.storageKey):window.localStorage.setItem(this.storageKey,JSON.stringify(e)))},e}();t.LocalStorage=n},103:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.getRandomInt=function(e,t){return Math.round(Math.random()*(t-e)+e)},e.getRandomObjectId=function(t){void 0===t&&(t=10);for(var r="",n=0;n<t;++n)r+="0123456789abcdef"[e.getRandomInt(0,"0123456789abcdef".length-1)];return r},e.getRandomWord=function(t,r){void 0===t&&(t=6),r=r||t;for(var n="qrtpsdfghklzxcvbnm",i=e.getRandomInt(t,r),o="",a=e.getRandomInt(0,1),s=0;s<i;++s)o+=s%2==a?"awoeuyijo"[e.getRandomInt(0,"awoeuyijo".length-1)]:n[e.getRandomInt(0,n.length-1)];return o},e.getRandomPhrase=function(t,r){void 0===t&&(t=3),r=r||t;for(var n=[],i=e.getRandomInt(t,r),o=0;o<i;++o)n.push(e.getRandomWord(4,7));return n.join(" ")},e}();t.RandomHelper=n},104:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(3),o=r(102),a=r(713),s=r(73);!function(e){e.google="google",e.none="none"}(n=t.AuthProvider||(t.AuthProvider={}));var u={isLoggedIn:!1,authProvider:n.none};t.anonymousUser={isLoggedIn:!1,authProvider:n.none,id:"",name:"",email:"",imageUrl:""};var l=function(){function e(e){this.config=e,this.localStorage=new o.LocalStorage(s.localStoragePrefix+"login-status",u)}return e.prototype.init=function(){return i.__awaiter(this,void 0,Promise,function(){var e,r;return i.__generator(this,function(i){switch(i.label){case 0:if(!(e=this.localStorage.getValue()).isLoggedIn)return[3,3];switch(e.authProvider){case n.google:return[3,1]}return[3,3];case 1:return[4,new a.GoogleAuthService(this.config.services.googleClientId).init()];case 2:return(r=i.sent())?[2,this.getUserData(r)]:[3,3];case 3:return[2,t.anonymousUser]}})})},e.prototype.signIn=function(e){return i.__awaiter(this,void 0,Promise,function(){var r;return i.__generator(this,function(i){switch(i.label){case 0:return e!==n.google?[3,2]:[4,new a.GoogleAuthService(this.config.services.googleClientId).signIn()];case 1:if(r=i.sent())return this.localStorage.setValue({isLoggedIn:!0,authProvider:n.google}),[2,this.getUserData(r)];i.label=2;case 2:return this.localStorage.setValue({isLoggedIn:!1,authProvider:n.none}),[2,t.anonymousUser]}})})},e.prototype.signOut=function(){return i.__awaiter(this,void 0,Promise,function(){var e;return i.__generator(this,function(t){switch(t.label){case 0:if(!(e=this.localStorage.getValue()).isLoggedIn)return[3,3];switch(e.authProvider){case n.google:return[3,1]}return[3,3];case 1:return[4,new a.GoogleAuthService(this.config.services.googleClientId).signOut()];case 2:return t.sent(),[3,3];case 3:return this.localStorage.setValue({isLoggedIn:!1,authProvider:n.none}),[2]}})})},e.prototype.getUserData=function(e){return{isLoggedIn:!0,id:e.id,name:e.name,email:e.email,imageUrl:e.imageUrl,authProvider:n.google}},e}();t.AuthService=l},130:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.PersonalLibrary="library",e.ExamplesAdvanced="examples",e.ExamplesBasic="shapes"}(n=t.GallerySection||(t.GallerySection={})),t.defaultGalleryState={activeSection:n.ExamplesAdvanced,isLoading:!0,programs:[],showImportModal:!1,isImportInProgress:!1}},131:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(47),o=r(165),a=r(20),s={},u=function(){function e(e){this.window=e}return e.prototype.parse=function(e){var t=[],r=e.indexOf("<body"),n=e.indexOf("</html>");if(r<0||n<0)throw new Error(a.$T.gallery.wrongFileFormatForImport);for(var o=e.substring(r,n),s=(new this.window.DOMParser).parseFromString(o,"application/xml").querySelectorAll(".logo-program"),u=0;u<s.length;++u){var l=s.item(u),c=l.querySelector("img"),p=c&&c.getAttribute("src")||"",d=l.querySelector("pre"),h=d&&d.textContent||"",f={id:l.getAttribute("data-program-id")||"",name:l.getAttribute("data-program-name")||"",dateCreated:new Date(l.getAttribute("data-program-date-created")||""),dateLastEdited:new Date(l.getAttribute("data-program-date-edited")||""),code:h,screenshot:p,storageType:i.ProgramStorageType.gallery};t.push(f)}return t},e.prototype.serialize=function(e,t,r){return n.__awaiter(this,void 0,void 0,function(){var i,a,u,l,c,p,d,h,f,m,g,v,y,_,E,w,S,T=this;return n.__generator(this,function(n){switch(n.label){case 0:return i=o.createCompareFunction([{sortBy:function(e){return e.dateLastEdited},direction:"desc"},{sortBy:function(e){return e.name}}]),a=e.slice().sort(i),(l=s[r])?[3,2]:(c=s,p=r,[4,this.getImageBase64ByUrl(r)]);case 1:l=c[p]=n.sent(),n.label=2;case 2:for(u=l,'<head>\n  <title>Logo personal library</title>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1">\n  <meta http-equiv="X-UA-Compatible" content="IE=edge">\n  <style>  \n    body {\n      margin: 20px 100px;\n      font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n      font-weight: 300;\n    }\n\n    header {\n      padding: 10px;\n      border-bottom: 1px solid gray;\n    }\n\n    td {\n      vertical-align: top;\n      padding: 10px;\n    }\n\n    pre {\n      background-color: #eee;\n      padding: 20px;\n    }\n  </style>\n</head>\n',d=this.window.document.createElement("body"),h=this.window.document.createElement("header"),d.appendChild(h),(f=this.window.document.createElement("h1")).innerText="Logo personal library",h.appendChild(f),(m=this.window.document.createElement("h3")).innerText=t,h.appendChild(m),u&&((g=this.window.document.createElement("img")).setAttribute("src",u),h.appendChild(g)),v=this.window.document.createElement("table"),d.appendChild(v),y=this.window.document.createElement("tbody"),v.appendChild(y),_=a.map(function(e){return T.serializeProgramToHtmlNode(e)}),E=0,w=_;E<w.length;E++)S=w[E],y.appendChild(S);return[2,'<!DOCTYPE html><html><head>\n  <title>Logo personal library</title>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1">\n  <meta http-equiv="X-UA-Compatible" content="IE=edge">\n  <style>  \n    body {\n      margin: 20px 100px;\n      font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;\n      font-weight: 300;\n    }\n\n    header {\n      padding: 10px;\n      border-bottom: 1px solid gray;\n    }\n\n    td {\n      vertical-align: top;\n      padding: 10px;\n    }\n\n    pre {\n      background-color: #eee;\n      padding: 20px;\n    }\n  </style>\n</head>\n'+(new this.window.XMLSerializer).serializeToString(d)+"</html>"]}})})},e.prototype.serializeProgramToHtmlNode=function(e){var t=this.window.document.createElement("tr");t.className="logo-program",t.setAttribute("data-program-id",e.id),t.setAttribute("data-program-name",e.name),t.setAttribute("data-program-date-created",e.dateCreated.toUTCString()),t.setAttribute("data-program-date-edited",e.dateLastEdited.toUTCString());var r=this.window.document.createElement("td");t.appendChild(r);var n=this.window.document.createElement("strong");n.innerText=e.name,r.appendChild(n),r.appendChild(this.window.document.createElement("br"));var i=this.window.document.createElement("small");if(i.innerText=e.dateLastEdited.toLocaleDateString(),r.appendChild(i),r.appendChild(this.window.document.createElement("br")),r.appendChild(this.window.document.createElement("br")),e.screenshot){var o=this.window.document.createElement("img");o.setAttribute("src",e.screenshot),r.appendChild(o)}var a=this.window.document.createElement("td");t.appendChild(a);var s=this.window.document.createElement("pre");return s.appendChild(this.window.document.createTextNode(e.code)),a.appendChild(s),t.appendChild(a),t},e.prototype.getImageBase64ByUrl=function(e){return n.__awaiter(this,void 0,Promise,function(){var t=this;return n.__generator(this,function(r){return e?[2,new Promise(function(r,n){var i=t.window.document.createElement("img");i.addEventListener("load",function(){try{var e=t.window.document.createElement("canvas");e.width=64,e.height=64;var n=e.getContext("2d");if(!n)return void r("");n.drawImage(i,0,0,64,64);var o=e.toDataURL("image/jpeg",.75);r(o)}catch(e){r("")}}),i.addEventListener("error",function(){r("")}),i.setAttribute("crossOrigin","Anonymous"),i.setAttribute("src",e)})]:[2,""]})})},e}();t.ProgramsHtmlSerializer=u},132:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkIsMobileDevice=function(){return!(!window.matchMedia||!window.matchMedia("only screen and (max-width: 760px)").matches)}},134:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(133);!function(e){e.LOAD_SECTION_STARTED="LOAD_SECTION_STARTED",e.LOAD_SECTION_COMPLETED="LOAD_SECTION_COMPLETED",e.TOGGLE_IMPORT_MODAL="TOGGLE_IMPORT_MODAL",e.IMPORT_STARTED="IMPORT_STARTED",e.IMPORT_COMPLETED="IMPORT_COMPLETED"}(n=t.GalleryActionType||(t.GalleryActionType={})),t.galleryActionCreator={loadSectionStarted:function(e){return i.action(n.LOAD_SECTION_STARTED,{section:e})},loadSectionCompleted:function(e,t){return i.action(n.LOAD_SECTION_COMPLETED,{section:e,programs:t})},toggleImportModal:function(e){return i.action(n.TOGGLE_IMPORT_MODAL,{show:e})},importStarted:function(){return i.action(n.IMPORT_STARTED)},importCompleted:function(e,t){return i.action(n.IMPORT_COMPLETED,{success:e,errorMessage:t})}}},135:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1);r(722);var o=r(723),a=r(724),s=r(727),u=r(132),l=r(68),c=r(728);r(729);var p=0,d=function(e){function t(t){var r=e.call(this,t)||this;return r.id=p++,r.createScreenshotBase64=function(e){return r.graphics?r.graphics.createScreenshot(e):""},r.execute=function(){return n.__awaiter(r,void 0,Promise,function(){var e,t,r,i,a,l,p=this;return n.__generator(this,function(d){switch(d.label){case 0:return this.isRunning=!0,this.setState({errorMessage:""}),"cs cleartext ",e=u.checkIsMobileDevice()?"setscrunch 0.7 0.7 ":" ",t=this.props.isDarkTheme?"setbg 0 setpencolor 7 ":"setbg 7 setpencolor 0 ",r="cs cleartext "+e+t,this.resizeCanvas(),i=window.LogoInterpreter,this.logo=new i(this.graphics.init(this.props.turtleSize),new s.LogoOutputConsole("#console-output"+this.id)),a=this.props.code.replace(/\u00A0/g," "),this.props.importsResolver?[4,c.processImports(a,function(e){return n.__awaiter(p,void 0,void 0,function(){return n.__generator(this,function(t){return[2,this.props.importsResolver?this.props.importsResolver.resolve(e):""]})})})]:[3,2];case 1:a=d.sent(),d.label=2;case 2:return d.trys.push([2,4,,5]),[4,this.logo.run(o.default+"\r\n"+r+"\r\n"+a)];case 3:return d.sent(),[3,5];case 4:return l=d.sent(),console.error("error",l),this.setState({errorMessage:l.message||l.toString()}),[3,5];case 5:return this.props.onFinish(),this.isRunning=!1,[2]}})})},r.abort=function(){r.logo&&r.isRunning&&r.logo.bye(),r.isRunning=!1},r.state={errorMessage:""},r}return n.__extends(t,e),t.prototype.componentDidMount=function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:return this.graphics=new a.LogoOutputGraphics("#sandbox"+this.id,"#turtle"+this.id),this.props.isRunning?[4,this.execute()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.componentWillUnmount=function(){this.abort()},t.prototype.componentDidUpdate=function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:return this.isRunning==this.props.isRunning?[3,3]:this.props.isRunning?[4,this.execute()]:[3,2];case 1:return e.sent(),[3,3];case 2:this.abort(),e.label=3;case 3:return[2]}})})},t.prototype.render=function(){return i.createElement("div",{id:"logo-executor-container"+this.id,className:"logo-executor-container"},i.createElement("canvas",{id:"sandbox"+this.id,className:"sandbox",height:"100"}),i.createElement("img",{id:"turtle"+this.id,className:"turtle-img",src:this.props.turtleImageSrc}),i.createElement("div",{id:"console-output"+this.id,className:"console-output"}),i.createElement("div",{id:"error-messages-container"+this.id,className:"error-messages-container"},this.state.errorMessage&&i.createElement(l.AlertMessage,{message:this.state.errorMessage})))},t.prototype.resizeCanvas=function(){if(this.graphics){var e=document.getElementById("logo-executor-container"+this.id);if(e){var t=e.clientWidth,r=e.clientHeight;if(t>0&&r>0)this.graphics.resizeCanvas(t,r);else{for(var n=e;n&&!(n.clientWidth>0&&n.clientHeight>0);)n=n.parentElement;n&&this.graphics.resizeCanvas(n.clientWidth||400,n.clientHeight||300)}}}},t}(i.Component);t.LogoExecutor=d},136:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(20);function i(){return[{id:"bright_runner",name:n.$T.settings.turtleSkins.bright_runner,imageSrc:"./content/images/turtles/bright_runner.svg"},{id:"chameleon",name:n.$T.settings.turtleSkins.chameleon,imageSrc:"./content/images/turtles/chameleon.svg"},{id:"princess",name:n.$T.settings.turtleSkins.princess,imageSrc:"./content/images/turtles/princess.svg"},{id:"bob",name:n.$T.settings.turtleSkins.bob,imageSrc:"./content/images/turtles/bob.svg"},{id:"summer",name:n.$T.settings.turtleSkins.summer,imageSrc:"./content/images/turtles/summer.svg"},{id:"diver",name:n.$T.settings.turtleSkins.diver,imageSrc:"./content/images/turtles/diver.svg"},{id:"navigator-aqua",name:"Navigator Aqua",imageSrc:"./content/images/turtles/navigator-aqua.svg"},{id:"navigator-stealth",name:"Navigator Stealth",imageSrc:"./content/images/turtles/navigator-stealth.svg"}]}t.getTurtles=i,t.getTurtleSizes=function(){return[{size:20,description:n.$T.settings.turtleSizes.extraSmall},{size:32,description:n.$T.settings.turtleSizes.small},{size:40,description:n.$T.settings.turtleSizes.medium},{size:52,description:n.$T.settings.turtleSizes.large},{size:72,description:n.$T.settings.turtleSizes.huge}]},t.getTurtleById=function(e){var t=i(),r=t.find(function(t){return t.id===e});return r||(r=t[0]),r}},165:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensure=function(e){if(null!=e)return e;try{throw new Error("Validation failed: value must not be null")}catch(e){throw console.error(e),e}},t.NULL=null,t.createCompareFunction=function(e){return function(t,r){for(var n=0,i=e;n<i.length;n++){var o=i[n],a=o.sortBy(t);"object"==typeof(a="string"==typeof(a=null==a?"":a)?a.toLowerCase():a)&&"function"==typeof a.getTime&&(a=a.getTime());var s=o.sortBy(r);if("object"==typeof(s="string"==typeof(s=null==s?"":s)?s.toLowerCase():s)&&"function"==typeof s.getTime&&(s=s.getTime()),a!=s)return"desc"==o.direction?s<a?-1:1:s<a?1:-1}return 0}}},174:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultUserSettings={turtleId:"",turtleSize:40,themeName:"",localeId:"en"},t.locales=[{name:"English",id:"en"},{name:"Русский",id:"ru"}]},175:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=function(){function e(e,t){this.localProgramsRepository=e,this.remoteProgramsRepository=t}return e.prototype.getAll=function(){return n.__awaiter(this,void 0,Promise,function(){var e;return n.__generator(this,function(t){switch(t.label){case 0:return this.remoteProgramsRepository?[4,this.remoteProgramsRepository.getAll()]:[3,2];case 1:return e=t.sent(),this.localProgramsRepository.overwrite(e),[2,e];case 2:return[2,this.localProgramsRepository.getAll()]}})})},e.prototype.getAllLocal=function(){return this.localProgramsRepository.getAll()},e.prototype.get=function(e){return n.__awaiter(this,void 0,Promise,function(){return n.__generator(this,function(t){return[2,this.remoteProgramsRepository?this.remoteProgramsRepository.get(e):this.localProgramsRepository.get(e)]})})},e.prototype.add=function(e){return n.__awaiter(this,void 0,Promise,function(){return n.__generator(this,function(t){switch(t.label){case 0:return this.localProgramsRepository.add(e),this.remoteProgramsRepository?[4,this.remoteProgramsRepository.add(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.save=function(e){return n.__awaiter(this,void 0,Promise,function(){return n.__generator(this,function(t){switch(t.label){case 0:return this.localProgramsRepository.save(e),this.remoteProgramsRepository?[4,this.remoteProgramsRepository.save(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.remove=function(e){return n.__awaiter(this,void 0,Promise,function(){return n.__generator(this,function(t){switch(t.label){case 0:return this.localProgramsRepository.remove(e),this.remoteProgramsRepository?[4,this.remoteProgramsRepository.remove(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e}();t.GalleryService=i},176:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.themesManager=themesManagerGlobalInstance},177:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(174),i=r(104);!function(e){e.danger="danger",e.info="info",e.success="success",e.warning="warning",e.primary="primary"}(t.NotificationType||(t.NotificationType={})),t.defaultEnvState={isLoading:!0,user:i.anonymousUser,userSettings:n.defaultUserSettings,appTheme:{},notifications:[]}},178:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(133);!function(e){e.LOAD_PROGRAM_STARTED="LOAD_PROGRAM_STARTED",e.LOAD_PROGRAM_COMPLETED="LOAD_PROGRAM_COMPLETED",e.CODE_CHANGED="CODE_CHANGED",e.RUN_PROGRAM="RUN_PROGRAM",e.STOP_PROGRAM="STOP_PROGRAM",e.SYNC_PROGRAM_STARTED="SYNC_PROGRAM_STARTED",e.SYNC_PROGRAM_COMPLETED="SYNC_PROGRAM_COMPLETED",e.SYNC_PROGRAM_FAILED="SYNC_PROGRAM_FAILED",e.RESET_STATE="CLEAR_PROGRAM",e.REVERT_CHANGES="REVERT_CHANGES"}(n=t.PlaygroundActionType||(t.PlaygroundActionType={})),t.playgroundActionCreator={loadProgramStarted:function(e,t){return i.action(n.LOAD_PROGRAM_STARTED,{storageType:e,programId:t})},loadProgramCompleted:function(e,t,r){return i.action(n.LOAD_PROGRAM_COMPLETED,{programModel:e,storageType:t,programId:r})},codeChangedAction:function(e){return i.action(n.CODE_CHANGED,{code:e})},runProgram:function(){return i.action(n.RUN_PROGRAM)},stopProgram:function(){return i.action(n.STOP_PROGRAM)},syncProgramStarted:function(){return i.action(n.SYNC_PROGRAM_STARTED)},syncProgramCompleted:function(e){return i.action(n.SYNC_PROGRAM_COMPLETED,e)},syncProgramFailed:function(){return i.action(n.SYNC_PROGRAM_FAILED)},clearProgram:function(){return i.action(n.RESET_STATE)}}},179:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(260),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.props.title!=e.title&&this.layoutHelper&&this.layoutHelper.setPanelTitle(e.id,e.title)},t.prototype.render=function(){var e=this;return i.createElement(o.ReactGoldenLayoutHelperContext.Consumer,null,function(t){return e.layoutHelper=t,e.props.children})},t}(i.Component);t.ReactGoldenLayoutPanel=a},180:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(133);!function(e){e.LOAD_TUTORIALS_STARTED="LOAD_TUTORIALS_STARTED",e.LOAD_TUTORIALS_COMPLETED="LOAD_TUTORIALS_COMPLETED",e.LOAD_STEP_STARTED="LOAD_STEP_STARTED",e.LOAD_STEP_COMPLETED="LOAD_STEP_COMPLETED",e.CODE_CHANGED="TUTORIALS_CODE_CHANGED",e.RUN_PROGRAM="TUTORIALS_RUN_PROGRAM",e.STOP_PROGRAM="TUTORIALS_STOP_PROGRAM",e.FIX_THE_CODE="FIX_THE_CODE"}(n=t.TutorialsActionType||(t.TutorialsActionType={})),t.tutorialsActionCreator={loadTutorialsStarted:function(){return i.action(n.LOAD_TUTORIALS_STARTED)},loadTutorialsCompleted:function(e){return i.action(n.LOAD_TUTORIALS_COMPLETED,{tutorials:e})},loadStepStarted:function(e,t){return i.action(n.LOAD_STEP_STARTED,{tutorialId:e,stepId:t})},loadStepCompleted:function(e,t,r,o,a){return i.action(n.LOAD_STEP_COMPLETED,{tutorialId:e,stepId:t,tutorialInfo:r,stepInfo:o,content:a})},codeChanged:function(e){return i.action(n.CODE_CHANGED,{code:e})},runProgram:function(){return i.action(n.RUN_PROGRAM)},stopProgram:function(){return i.action(n.STOP_PROGRAM)},fixTheCode:function(){return i.action(n.FIX_THE_CODE)}}},20:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(230);t.Template=n.Template,t.Plural=n.Plural,t.$T={common:{appTitle:"Logo playground",save:"Save",cancel:"Cancel",delete:"Delete",continue:"Continue",areYouSure:"Are you sure?",copied:"Copied",copyToClipboard:"Copy to clipboard",signIn:"Sign in",signInWithGoogle:"Sign in with Google",signOut:"Sign out",error:"Sorry, error has occured"},program:{codePanelTitle:"Program box",outputPanelTitle:"Drawing box",program:"Program",programName:"Program name",publicUrl:"Public url",revertChanges:"Revert changes",run:"Run",runDescription:"Execute the program",stop:"Stop",stopDescription:"Stop execution of the program",save:"Save",saveAs:"Save as...",saveToLibraryModalTitle:"Save to personal library",takeScreenshot:"Take screenshot",screenshotModalTitle:"Screenshot",share:"Share",shareYourProgramModalTitle:"Share your program",playgroundTitle:"Playground",programHasChanges:"This program has changes",youAreGoingToDeleteProgram:"You are going to delete this program.",imagePreview:"Image preview",imageUrl:"Image url",pleaseEnterNameForYourProgram:"Please enter the name for your program",formatDocument:"Format code"},gallery:{galleryTitle:"Gallery",galleryImage:"Gallery image",library:"Library",examples:"Examples",shapes:"Shapes",emptyLibrary:"You do not have any programs stored in personal library yet.",import:"Import",export:"Export",importCompletedTitle:"Import completed",addedProgramsMessage:new n.Plural("Added one program","Added %d programs"),wrongFileFormatForImport:"Looks like import file is corrupted or this format is not supported.",importModalTitle:"Import programs to library",chooseAFile:"Choose a file…",notLoggedInGalleryMessage:"As you are not signed in, your library is stored in browser's local storage. Please sign in if you want to synchronize your library."},tutorial:{tutorialsTitle:"Tutorials",tutorialPanelTitle:"Tutorial",chooseTutorial:"Choose a tutorial",chooseAnotherTutorial:"Choose another tutorial",stepIndicator:new n.Template("Step %1$s of %2$s",2),start:"Start",back:"Back",helpItsNotworking:"Help – it's not working!",fixTheCodeMessage:"If your code isn't working as the tutorial describes, you can replace it with a working version.",fixTheCodeWarning:"This will overwrite your code entirely.",fixTheCodeTitle:"Fix the code?",yesFixMyCode:"Yes, fix my code",noLeaveItAsIs:"No, leave it as is"},about:{aboutTitle:"About"},settings:{settingsTitle:"Settings",language:"Language",uiTheme:"User interface theme",turtleSkin:"Turtle outfit",turtleSkins:{bob:"Chilly Bob",summer:"Summer",bright_runner:"Bright Runner",diver:"Deep Diver",chameleon:"Chameleon",princess:"Princess"},turtleSize:"Turtle size",turtleSizes:{extraSmall:"Extra small",small:"Small",medium:"Medium",large:"Large",huge:"Huge"}},cheatSheet:{cheatSheetTitle:"Cheat sheet"},login:{title:"Sign in",notLoggedInSignInMessage:"Signing in allows to save your program library to your account. So you can synchronize your library across multiple devices and access your data from everywhere."},welcome:{title:"Welcome",galleryLinkHeader:"Explore the gallery",galleryLinkDescription:"The gallery provides lots of examples of different levels of complexity. Gain inspiration and unleash power of your creativity.",tutorialsLinkHeader:"Learn the basics with tutorials",tutorialsLinkDescription:"Tutorials are the best way to learn fast and have fun. If you are new to LOGO programming this section is for you.",playgroundLinkHeader:"Playground for coding",playgroundLinkDescription:"This is a coding area where you can write and run your LOGO programs interactively."}}},230:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(612),o=r(613),a=function(){function e(e,t){this._forms=[e,t]}return e.prototype.val=function(e){if(n)return n.translate(this._messageKey).ifPlural(e,"").fetch(e);throw new Error("Locale data is not initialized yet")},e}();t.Plural=a;var s=function(){function e(e,t){this.numberOfParameters=t,this._template=e}return e.prototype.val=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length!=this.numberOfParameters)throw new Error("Number of parameters to template string is wrong!");if(n)return(e=n.translate(this._messageKey)).fetch.apply(e,t);throw new Error("Locale data is not initialized yet")},e}();t.Template=s,t.updateStringsObject=function(e,t){var r=o(t,{format:"jed1.x"});n=new i(r),function e(t,r){for(var i=0,o=Object.entries(t);i<o.length;i++){var u=o[i],l=u[0],c=u[1],p=r?r+"."+l:l;if("string"==typeof c){var d=n.translate(p).fetch();d!==p&&(t[l]=d)}else c instanceof a?c._messageKey=p:c instanceof s?c._messageKey=p:"object"==typeof c&&e(c,p)}}(e,"")}},238:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.InfoBox=function(e){return n.createElement("div",{className:"box",style:{maxWidth:500}},n.createElement("div",{className:"media"},n.createElement("div",{className:"media-left"},n.createElement("span",{className:"icon is-large"},n.createElement("i",{className:"fa-3x "+(e.iconClass||"fas fa-info")}))),n.createElement("div",{className:"media-content"},n.createElement("div",{className:"content"},"string"==typeof e.content?n.createElement("p",null,e.content):n.createElement(n.Fragment,null,e.content)))))}},247:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=function(){function e(e){this.localeId=e,this.cache={}}return e.prototype.getFileContent=function(e){return n.__awaiter(this,void 0,Promise,function(){return n.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.getContentByLocale(this.localeId,e)];case 1:return[2,t.sent()];case 2:return t.sent(),console.log("Failed to load localized version, falling back to English"),[2,this.getContentByLocale("en",e)];case 3:return[2]}})})},e.prototype.resolveRelativeUrl=function(e){return this.resolveRelativeUrlInt(this.localeId,e)},e.prototype.resolveRelativeUrlInt=function(e,t){return"content/"+e+"/"+t},e.prototype.getContentByLocale=function(e,t){return n.__awaiter(this,void 0,Promise,function(){var r,i,o,a;return n.__generator(this,function(n){switch(n.label){case 0:return r=e+":"+t,(i=this.cache[r])?[2,i]:[4,fetch(this.resolveRelativeUrlInt(e,t),{method:"get",credentials:"same-origin"})];case 1:if(!(o=n.sent()).ok)throw o;return[4,o.text()];case 2:return a=n.sent(),this.cache[r]=a,[2,a]}})})},e}();t.LocalizedContentLoader=i},248:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(102),o=r(174),a=r(73),s=function(){function e(e){var t=a.localStoragePrefix+"settings:"+(e||"guest");this.localStorage=new i.LocalStorage(t,o.defaultUserSettings);var r=this.localStorage.getValue();this.currentData=r}return e.prototype.get=function(){return n.__awaiter(this,void 0,Promise,function(){return n.__generator(this,function(e){return[2,this.currentData]})})},e.prototype.update=function(e){return n.__awaiter(this,void 0,Promise,function(){return n.__generator(this,function(t){return this.currentData=n.__assign({},this.currentData,e),[2,this.localStorage.setValue(this.currentData)]})})},e}();t.UserSettingsService=s},249:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(100),i=r(73),o=r(102),a=function(){function e(e){var t=this;this.writeToStorage=n.debounce(function(e){t.localStorage.setValue(e||"")},500);var r=i.localStoragePrefix+"playground-code:"+(e||"guest");this.localStorage=new o.LocalStorage(r,"")}return e.prototype.getCode=function(){return this.localStorage.getValue()||""},e.prototype.setCode=function(e){this.writeToStorage(e)},e}();t.LocalPlaygroundCodeStorage=a},250:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(170),o=r(73),a=r(102),s=function(){function e(e){this.contentLoader=e,this.tutorialInfos=[],this.defaultStep={tutorialId:"01-basics",stepId:"01-welcome"},this.lastStepLocalStorage=new a.LocalStorage(o.localStoragePrefix+"tutorials.step",this.defaultStep)}return e.prototype.getTutorialsList=function(){return n.__awaiter(this,void 0,Promise,function(){var e,t;return n.__generator(this,function(r){switch(r.label){case 0:return 0!=this.tutorialInfos.length?[3,2]:[4,this.contentLoader.getFileContent("tutorials/index.json")];case 1:e=r.sent(),t=JSON.parse(e),this.tutorialInfos=t.tutorials,r.label=2;case 2:return[2,this.tutorialInfos]}})})},e.prototype.getStep=function(e,t){return n.__awaiter(this,void 0,Promise,function(){var r,o,a,s,u,l,c,p=this;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.contentLoader.getFileContent("tutorials/"+e+"/"+t+".md")];case 1:return r=n.sent(),o="",r=this.findAndReplaceCodeChunks(r,"solution",function(e){return o=e,""}),a={},s=1,r=this.findAndReplaceCodeChunks(r,"logo",function(e,t){if(!t.width)throw new Error("width is required parameter to logo inline block");if(!t.height)throw new Error("height is required parameter to logo inline block");var r="logo"+s++;a[r]={code:e?e.trim():"",params:t};var n='<div id="'+r+'" class="logo-inline-container" style="width:'+t.width+";height:"+t.height+'"></div>';return t.code&&(n="\n```"+e+"```\n"+n),t.solution&&(o=e),n}),u=new i({html:!0}),l=(l=u.render(r).trim()).replace(/src="[\s\S]*?"/g,function(t){var r=t.substr(5);return(r=r.substr(0,r.length-1)).startsWith(".")&&(r=r.substring(1),r=p.contentLoader.resolveRelativeUrl("tutorials/"+e+r)),'src="'+r+'"'}),c={content:l,solutionCode:o.trim(),inlinedCode:a},this.setLastStep({tutorialId:e,stepId:t}),[2,c]}})})},e.prototype.getLastStep=function(){return this.lastStepLocalStorage.getValue()},e.prototype.setLastStep=function(e){this.lastStepLocalStorage.setValue(e)},e.prototype.findAndReplaceCodeChunks=function(e,t,r){var n=new RegExp("\x3c!--"+t+"([\\s\\S]*?)--\x3e[\\s\\S]*?```([\\s\\S]*?)```","g");return e.replace(n,function(e,t,n){var i=t?JSON.parse(t):{};return r(n,i)})},e}();t.TutorialsService=s},251:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(705),o=function(){};t.ImageUploadService=o;var a=function(){function e(e,t){this.clientId=e,this.serviceUrl=t}return e.prototype.doUpload=function(e){return n.__awaiter(this,void 0,Promise,function(){var t,r,o,a,s,u;return n.__generator(this,function(n){switch(n.label){case 0:return t=e.substr("data:image/png;base64,".length),r="Client-ID "+this.clientId,o=this.serviceUrl||"https://api.imgur.com/3/image",(a=new URLSearchParams).append("image",t),a.append("type","base64"),[4,i(o,{method:"post",headers:new Headers({Authorization:r,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}),body:a})];case 1:return(s=n.sent()).ok?[4,s.json()]:[3,3];case 2:return u=n.sent(),[2,u.data.link];case 3:throw s}})})},e}();t.ImageUploadImgurService=a},252:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(710),o=r(47),a=r(131),s=function(){function e(){this.cached_programs={}}return e.prototype.getAll=function(e){return n.__awaiter(this,void 0,Promise,function(){var t,r,s,u,l,c,p;return n.__generator(this,function(n){switch(n.label){case 0:return this.cached_programs[e]?[2,this.cached_programs[e]]:[4,fetch("content/"+e+".html",{method:"get",credentials:"same-origin"})];case 1:if(!(t=n.sent()).ok)throw t;return[4,t.text()];case 2:for(r=n.sent(),s=new a.ProgramsHtmlSerializer(window),u=s.parse(r),l=0,c=u;l<c.length;l++)(p=c[l]).id=e+"-"+i.formatId(p.name,function(e){return!!u.find(function(t){return t.id===e})}),p.storageType=o.ProgramStorageType.samples;return u.sort(function(e,t){return e.dateLastEdited>t.dateLastEdited?-1:1}),this.cached_programs[e]=u,[2,u]}})})},e.prototype.get=function(e){return n.__awaiter(this,void 0,Promise,function(){var t,r,i,o;return n.__generator(this,function(n){switch(n.label){case 0:if((t=e.indexOf("-"))<=0)throw new Error("Wrong id for sample");return r=e.substr(0,t),[4,this.getAll(r)];case 1:if(i=n.sent(),!(o=i.find(function(t){return t.id===e})))throw new Error("Program with id "+e+" is not found");return[2,o]}})})},e}();t.GallerySamplesRepository=s},253:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(47),o=function(){function e(e,t,r,o){var a=this;this.examplesRepository=e,this.personalGalleryService=t,this.localTempStorage=r,this.sharedProgramsRepository=o,this.loadProgram=function(e,t){return n.__awaiter(a,void 0,Promise,function(){return n.__generator(this,function(r){return t&&e!=i.ProgramStorageType.playground?[2,this.loadProgramFromStorage(e,t)]:[2,i.createNewProgram({storageType:i.ProgramStorageType.playground,code:this.localTempStorage.getCode()})]})})},this.saveProgramToLibrary=function(e){return n.__awaiter(a,void 0,Promise,function(){var t,r,o;return n.__generator(this,function(n){switch(n.label){case 0:if(!e.newProgramName||!e.newProgramName.trim())throw new Error("Program name is required.");return[4,this.personalGalleryService.getAll()];case 1:if(t=n.sent()||[],e.id)return[3,3];if(t.find(function(t){return t.name.trim().toLowerCase()===e.newProgramName.trim().toLowerCase()}))throw new Error("Program with this name is already stored in library. Please enter different name.");return r=i.createNewProgram({storageType:i.ProgramStorageType.gallery,name:e.newProgramName,code:e.newCode,screenshot:e.newScreenshot}),[4,this.personalGalleryService.add([r])];case 2:return n.sent(),[2,r];case 3:if(!(o=t.find(function(t){return t.id===e.id})))throw new Error("Program with id is not found: "+e.id);return o.screenshot=e.newScreenshot,o.code=e.newCode,o.name=e.newProgramName,[4,this.personalGalleryService.save(o)];case 4:return n.sent(),[2,o]}})})}}return e.prototype.loadProgramFromStorage=function(e,t){return n.__awaiter(this,void 0,Promise,function(){var r;return n.__generator(this,function(n){switch(n.label){case 0:switch(e){case i.ProgramStorageType.samples:return[3,1];case i.ProgramStorageType.gallery:return[3,3];case i.ProgramStorageType.shared:return[3,5]}return[3,7];case 1:return[4,this.examplesRepository.get(t)];case 2:return(r=n.sent()).storageType=i.ProgramStorageType.samples,[3,7];case 3:return[4,this.personalGalleryService.get(t)];case 4:return(r=n.sent()).storageType=i.ProgramStorageType.gallery,[3,7];case 5:return[4,this.sharedProgramsRepository.get(t)];case 6:return(r=n.sent()).storageType=i.ProgramStorageType.shared,[3,7];case 7:if(!r)throw new Error("Could not load the program");return[2,r]}})})},e}();t.ProgramService=o},254:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(47),o=r(711),a=function(){function e(){this.repo=new o.SharedProgramsUrlEncoder}return e.prototype.get=function(e){return n.__awaiter(this,void 0,Promise,function(){var t;return n.__generator(this,function(r){switch(r.label){case 0:return[4,this.repo.get(e)];case 1:return t=r.sent(),[2,{id:e,code:t.text,dateCreated:new Date,dateLastEdited:new Date,name:t.name,screenshot:"",storageType:i.ProgramStorageType.shared}]}})})},e.prototype.post=function(e,t){return n.__awaiter(this,void 0,Promise,function(){return n.__generator(this,function(r){return[2,this.repo.post(e,t)]})})},e}();t.SharedProgramsRepository=a},255:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(103),i=["\nrepeat 14 [\n    fd repcount * 8 \n    rt 90\n]\n","\nrepeat 10 [\n    repeat 8 [\n        fd 20 \n        rt 360 / 8\n    ] \n    rt 360 / 10\n]\n","\npenup \nsetxy -40 -20 \npendown \nrepeat 8 [\n  fd 40 \n  rt 360 / 8\n]\n","\nrepeat 10 [\n  fd 5 * repcount \n  repeat 3 [\n    fd 18 \n    rt 360 /3 \n  ] \n  rt 360 / 10\n]\n","\nrepeat 10 [\n  fd 10\n  rt 90\n  fd 10\n  lt 90\n]\n","\npenup\nsetxy -80 0\nrepeat 10 [\n  arc 360 20\n  fd 40\n  rt 36\n]\n","\nrt 18\nrepeat 5 [\n  fd 100\n  rt 144\n]","\nforward 50\nright 90\nforward 100\narc 360 50\n","\n  setpensize 3\n  repeat 100 [\n      setcolor (modulo repcount 5) + 1\n      fd repcount * 1.5 \n      rt 360/5\n  ]\n"],o=function(){function e(){this.lastIndex=-1}return e.prototype.getRandomSample=function(){for(var e=this.lastIndex;e===this.lastIndex;)e=n.RandomHelper.getRandomInt(0,i.length-1);return this.lastIndex=e,i[e]},e}();t.LogoCodeSamplesService=o},256:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(131);function o(e,t){var r=1,n="";do{n=r>1?e+" ("+r+")":e,r++}while(t(n));return n}var a=function(){function e(e){this.galleryService=e}return e.prototype.import=function(e){return n.__awaiter(this,void 0,void 0,function(){var t;return n.__generator(this,function(r){return t=new i.ProgramsHtmlSerializer(window).parse(e),[2,this.importAll(t)]})})},e.prototype.importAll=function(e){return n.__awaiter(this,void 0,Promise,function(){var t,r,i,a,s,u,l;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.galleryService.getAll()];case 1:for(t=n.sent()||[],r=[],i=0,a=function(e){var n=t.find(function(t){return t.id===e.id});n?n.code===e.code||(e.id="",e.name=o(e.name,function(e){return t.some(function(t){return t.name===e})}),r.push(e),i++):(e.name=o(e.name,function(e){return t.some(function(t){return t.name===e})}),r.push(e),i++)},s=0,u=e;s<u.length;s++)l=u[s],a(l);return[4,this.galleryService.add(r)];case 2:return n.sent(),[2,i]}})})},e}();t.GalleryImportService=a},257:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=function(){function e(e,t){this.localProgramsRepository=e,this.examplesRepository=t,this.programs=[]}return e.prototype.reset=function(){return n.__awaiter(this,void 0,Promise,function(){return n.__generator(this,function(e){return this.programs=[],[2]})})},e.prototype.resolve=function(e){return n.__awaiter(this,void 0,Promise,function(){var t;return n.__generator(this,function(r){switch(r.label){case 0:return 0!==this.programs.length?[3,2]:[4,this.loadPrograms()];case 1:r.sent(),r.label=2;case 2:return(t=this.programs.find(function(t){return t.name.toLowerCase().trim()===e}))?[2,t.code]:[2,""]}})})},e.prototype.loadPrograms=function(){return n.__awaiter(this,void 0,void 0,function(){var e,t,r,i,o,a,s,u,l;return n.__generator(this,function(n){switch(n.label){case 0:return(s=this.programs).push.apply(s,this.localProgramsRepository.getAll()),t=(e=(u=this.programs).push).apply,r=[u],[4,this.examplesRepository.getAll("shapes")];case 1:return t.apply(e,r.concat([n.sent()])),o=(i=(l=this.programs).push).apply,a=[l],[4,this.examplesRepository.getAll("samples")];case 2:return o.apply(i,a.concat([n.sent()])),[2]}})})},e}();t.LogoImportsResolverService=i},258:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(20),o=r(165),a=r(67),s=r(35),u=r(130),l=r(72),c=r(177),p=r(252),d=r(175),h=r(256),f=r(101),m=r(134);t.galleryThunks={loadSection:function(e,t){var r=this;return function(i,c){return n.__awaiter(r,void 0,void 0,function(){var r,h,f,g,v,y,_,E;return n.__generator(this,function(n){switch(n.label){case 0:if((r=c().gallery).activeSection===e&&r.programs.length>0&&(!t||!t.forceLoad))return[2];i(m.galleryActionCreator.loadSectionStarted(e)),h=o.createCompareFunction([{sortBy:function(e){return e.dateLastEdited},direction:"desc"},{sortBy:function(e){return e.name}}]),n.label=1;case 1:switch(n.trys.push([1,9,,11]),e){case u.GallerySection.ExamplesAdvanced:return[3,2];case u.GallerySection.ExamplesBasic:return[3,4];case u.GallerySection.PersonalLibrary:return[3,6]}return[3,8];case 2:return[4,s.resolve(p.GallerySamplesRepository).getAll("samples")];case 3:return(f=n.sent()).sort(h),i(m.galleryActionCreator.loadSectionCompleted(e,f)),[3,8];case 4:return[4,s.resolve(p.GallerySamplesRepository).getAll("shapes")];case 5:return(f=n.sent()).sort(h),i(m.galleryActionCreator.loadSectionCompleted(e,f)),[3,8];case 6:return g=s.resolve(d.GalleryService),(v=g.getAllLocal()).length>0&&(v.sort(h),i(m.galleryActionCreator.loadSectionCompleted(e,v))),[4,g.getAll()];case 7:(y=n.sent()).sort(h),i(m.galleryActionCreator.loadSectionCompleted(e,y)),n.label=8;case 8:return[3,11];case 9:return _=n.sent(),[4,a.normalizeError(_)];case 10:return E=n.sent(),i(l.envActionCreator.handleError(E)),i(m.galleryActionCreator.loadSectionCompleted(e,[])),[3,11];case 11:return[2]}})})}},import:function(e){var r=this;return function(o,l){return n.__awaiter(r,void 0,void 0,function(){var r,l,p;return n.__generator(this,function(n){switch(n.label){case 0:o(m.galleryActionCreator.importStarted()),n.label=1;case 1:return n.trys.push([1,3,,5]),[4,s.resolve(h.GalleryImportService).import(e)];case 2:return r=n.sent(),o(m.galleryActionCreator.importCompleted(!0)),o(f.envThunks.showNotificationAutoClose(c.NotificationType.info,i.$T.gallery.importCompletedTitle,i.$T.gallery.addedProgramsMessage.val(r))),o(t.galleryThunks.loadSection(u.GallerySection.PersonalLibrary,{forceLoad:!0})),[3,5];case 3:return l=n.sent(),[4,a.normalizeError(l)];case 4:return p=n.sent(),o(m.galleryActionCreator.importCompleted(!1,p.message)),[3,5];case 5:return[2]}})})}}}},259:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(97),a=r(719),s=r(100),u=r(179),l=r(721),c=r(260),p=function(e){function t(t){var r=e.call(this,t)||this;return r.layoutHelper=new l.GoldenLayoutHelper,r.panelDomContainersByIds={},r.oldWindowDimensions={width:window.innerWidth,height:window.innerHeight},r.isComponentMounted=!1,r.onWindowResize=function(){r.oldWindowDimensions.width===window.innerWidth&&r.oldWindowDimensions.height>window.innerHeight+100||(r.oldWindowDimensions={width:window.innerWidth,height:window.innerHeight},r.layoutHelper.updateSize())},r.handleLayoutStateChanged=s.debounce(function(){if(r.isComponentMounted&&r.layoutHelper.layout){var e=r.layoutHelper.layout.toConfig(),t=JSON.stringify(e);r.props.layoutLocalStorageKey&&window.localStorage.setItem(r.props.layoutLocalStorageKey,t),r.props.onLayoutChange&&r.props.onLayoutChange(t)}},500),r}return n.__extends(t,e),t.prototype.componentDidMount=function(){var e=this.props.layoutLocalStorageKey&&window.localStorage.getItem(this.props.layoutLocalStorageKey);e&&this.initLayoutWithConfig(e)||this.initLayoutWithConfig(this.props.defaultLayoutConfigJSON),window.addEventListener("resize",this.onWindowResize),this.isComponentMounted=!0},t.prototype.componentWillUnmount=function(){this.isComponentMounted=!1,this.layoutHelper.destroy(),window.removeEventListener("resize",this.onWindowResize)},t.prototype.initLayoutWithConfig=function(e){try{var t=JSON.parse(e);this.props.configLayoutOverride&&(t.settings=n.__assign({},t.settings||{},this.props.configLayoutOverride.settings),t.dimensions=n.__assign({},t.dimensions||{},this.props.configLayoutOverride.dimensions));var r=new a(t,this.goldenLayoutContainerRef);this.layoutHelper.setGoldenLayout(r),this.panelDomContainersByIds={};var o=this,s=function(e,t){o.panelDomContainersByIds[t.componentName]=e.getElement().get(0)},l=[];i.Children.map(this.props.children,function(e){if(e.type!=u.ReactGoldenLayoutPanel)throw console.error("Wrong child:",e),new Error("Invalid child, only ReactGoldenLayoutPanel are allowed as children, sorry");l.push(e.props.id),r.registerComponent(e.props.id,s)}),r.init();for(var c=0,p=l;c<p.length;c++){var d=p[c];if(!this.layoutHelper.findGoldenLayoutContentItem(r.root,d))return console.error("Oops, missing panel in config: "+d),!1}r.on("stateChanged",this.handleLayoutStateChanged)}catch(e){return console.error(e),!1}return this.forceUpdate(),!0},t.prototype.render=function(){var e=this;return i.createElement("div",{className:this.props.className,ref:function(t){return e.goldenLayoutContainerRef=t||void 0}},this.layoutHelper.layout&&i.createElement(c.ReactGoldenLayoutHelperContext.Provider,{value:this.layoutHelper},i.Children.map(this.props.children,function(t){var r=e.panelDomContainersByIds[t.props.id];if(e.layoutHelper.setPanelTitle(t.props.id,t.props.title),r)return o.createPortal(t,r)})))},t}(i.Component);t.ReactGoldenLayout=p},260:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.ReactGoldenLayoutHelperContext=n.createContext(void 0)},261:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(52),a=r(81),s=r(730),u=r(100);r(731),r(732),r(733),r(734),r(735),r(736);var l=function(e){function t(t){var r=e.call(this,t)||this;return r.handleHotkey=function(e){r.props.onHotkey&&r.props.onHotkey(e)},r.handleWindowResize=u.debounce(function(){r.cm&&r.cm.refresh()},300),r.state={},r}return n.__extends(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.componentWillReceiveProps=function(e){this.cm&&(e.code!=this.currentCode&&(this.currentCode=e.code,this.cm.setValue(e.code)),e.resizeIncrement!=this.props.resizeIncrement&&this.cm.refresh())},t.prototype.componentDidMount=function(){var e=this,t=this.refs["text-area"];if(this.cm=a.fromTextArea(t,{mode:"logo",autoCloseBrackets:{pairs:"()[]{}",explode:"()[]{}"},matchBrackets:!0,lineComment:";",lineNumbers:!0,lineWrapping:!0,theme:this.props.editorTheme}),this.cm.setSize("100%","100%"),this.currentCode=this.props.code,this.cm.setValue(this.props.code),this.cm.on("change",function(){var t=e.cm.getValue();e.currentCode!=t&&(e.currentCode=t,e.props.onChanged(t))}),this.props.hotKeys){for(var r={},n=function(t){r[t.toUpperCase()]=function(){e.handleHotkey(t)},s(t,function(){return e.handleHotkey(t),!1})},i=0,o=this.props.hotKeys;i<o.length;i++){n(o[i])}this.cm.addKeyMap(r)}window.addEventListener("resize",this.handleWindowResize)},t.prototype.componentWillUnmount=function(){if(this.props.hotKeys)for(var e=0,t=this.props.hotKeys;e<t.length;e++){var r=t[e];s.unbind(r)}window.removeEventListener("resize",this.handleWindowResize)},t.prototype.render=function(){return i.createElement("div",{className:o("code-input-component",this.props.className)},i.createElement("textarea",{ref:"text-area"}))},t}(i.Component);t.CodeInput=l},262:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(52),a=r(20),s=r(737),u=r(739),l=r(740),c=r(741);r(742);var p=function(e){function t(t){var r=e.call(this,t)||this;return r.programMenuClicked=function(){r.setState({menuIsActive:!r.state.menuIsActive})},r.handleSaveAs=function(e){return n.__awaiter(r,void 0,void 0,function(){return n.__generator(this,function(t){return this.props.onSaveAs&&this.props.onSaveAs(e),[2]})})},r.handleDelete=function(){return n.__awaiter(r,void 0,void 0,function(){return n.__generator(this,function(e){return this.props.onDeleteProgram&&this.props.onDeleteProgram(),[2]})})},r.state={},r}return n.__extends(t,e),t.prototype.render=function(){var e=this;return i.createElement("div",{className:"code-menu-component"},!this.props.isRunning&&i.createElement("button",{type:"button",className:"button is-success is-borderless",onClick:this.props.onRunProgram,title:a.$T.program.runDescription+" (F9)"},a.$T.program.run)," ",this.props.isRunning&&i.createElement("button",{type:"button",className:"button is-warning is-borderless",onClick:this.props.onStopProgram,title:a.$T.program.stopDescription},a.$T.program.stop)," ",i.createElement("div",{className:o("dropdown is-right is-borderless",{"is-active":this.state.menuIsActive})},i.createElement("div",{className:"dropdown-trigger"},i.createElement("button",{className:"button is-light","aria-haspopup":"true","aria-controls":"dropdown-menu6",onClick:this.programMenuClicked},i.createElement("i",{className:"fa fa-ellipsis-h","aria-hidden":"true"}))),i.createElement("div",{className:"dropdown-menu",id:"dropdown-menu6",role:"menu"},i.createElement("div",{className:"dropdown-content"},i.createElement("a",{className:"dropdown-item",onClick:function(){e.setState({menuIsActive:!1}),e.props.onFormatDocument()}},i.createElement("i",{className:"fas fa-align-left icon-fixed-width","aria-hidden":"true"}),a.$T.program.formatDocument),this.props.isSaveEnabled&&i.createElement("a",{className:"dropdown-item",onClick:function(){e.setState({menuIsActive:!1}),e.props.onSave&&e.props.onSave()}},i.createElement("i",{className:"far fa-check-square icon-fixed-width","aria-hidden":"true"}),a.$T.program.save),i.createElement("a",{className:"dropdown-item",onClick:function(){e.setState({menuIsActive:!1,isSaveAsModalActive:!0,screenshotImageBase64:e.props.createSmallScreenShotImageBase64()})}},i.createElement("i",{className:"fa fa-clone icon-fixed-width","aria-hidden":"true"}),a.$T.program.saveAs),this.props.isRevertEnabled&&i.createElement("a",{className:"dropdown-item",onClick:function(){e.setState({menuIsActive:!1}),e.props.onRevertChanges&&e.props.onRevertChanges()}},i.createElement("i",{className:"fa fa-undo icon-fixed-width","aria-hidden":"true"}),a.$T.program.revertChanges),this.props.isDeleteEnabled&&i.createElement("a",{className:"dropdown-item",onClick:function(){e.setState({menuIsActive:!1,isDeleteModalActive:!0})}},i.createElement("i",{className:"fa fa-trash icon-fixed-width","aria-hidden":"true"}),a.$T.common.delete),i.createElement("hr",{className:"dropdown-divider"}),i.createElement("a",{className:"dropdown-item",onClick:function(){e.setState({menuIsActive:!1,isShareModalActive:!0,screenshotImageBase64:e.props.createSmallScreenShotImageBase64()})}},i.createElement("i",{className:"fa fa-share-alt icon-fixed-width","aria-hidden":"true"}),a.$T.program.share),i.createElement("a",{className:"dropdown-item",onClick:function(){e.setState({menuIsActive:!1,isTakeScreenshotModalActive:!0,screenshotImageBase64:e.props.createScreenShotImageBase64()})}},i.createElement("i",{className:"fa fa-camera icon-fixed-width","aria-hidden":"true"}),a.$T.program.takeScreenshot)))),this.state.isTakeScreenshotModalActive&&i.createElement(s.ScreenshotModal,{imageBase64:this.state.screenshotImageBase64||"",onClose:function(){return e.setState({isTakeScreenshotModalActive:!1})}}),this.state.isShareModalActive&&i.createElement(u.ShareProgramModal,{programName:this.props.programName,programCode:this.props.code,imageBase64:this.state.screenshotImageBase64||"",onClose:function(){return e.setState({isShareModalActive:!1})}}),this.state.isSaveAsModalActive&&i.createElement(l.SaveProgramModal,{programName:this.props.programName,screenshot:this.state.screenshotImageBase64||"",onClose:function(){e.setState({isSaveAsModalActive:!1})},onSave:this.handleSaveAs,allowRename:!0}),this.state.isDeleteModalActive&&i.createElement(c.DeleteProgramModal,{programName:this.props.programName,onClose:function(){e.setState({isDeleteModalActive:!1})},onDelete:this.handleDelete}))},t}(i.Component);t.CodeMenu=p},263:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(52),a=r(738),s=r(20),u=0,l=function(e){function t(t){var r=e.call(this,t)||this;return r.componentId="input-copy-to-clipboard-"+ ++u,r.state={isCopied:!1},r}return n.__extends(t,e),t.prototype.componentDidMount=function(){return n.__awaiter(this,void 0,void 0,function(){var e=this;return n.__generator(this,function(t){return this.clipboardInstance=new a("#"+this.componentId+"-btn"),this.clipboardInstance.on("success",function(){e.setState({isCopied:!0}),e.props.onCopied&&e.props.onCopied()}),[2]})})},t.prototype.componentWillUnmount=function(){this.clipboardInstance&&this.clipboardInstance.destroy()},t.prototype.render=function(){return i.createElement(i.Fragment,null,i.createElement("div",{className:"field"},i.createElement("div",{className:"control has-icons-right"},i.createElement("input",{id:this.componentId+"-url",className:"input",type:"text",value:this.props.text,readOnly:!0}),this.state.isCopied&&i.createElement("span",{className:"icon is-small is-right"},i.createElement("i",{className:"fa fa-check"})))),i.createElement("div",{className:"field"},i.createElement("button",{id:this.componentId+"-btn",type:"button",className:o("button",{"is-info":!this.state.isCopied}),"data-clipboard-target":"#"+this.componentId+"-url"},i.createElement("i",{className:"fa fa-clipboard","aria-hidden":"true"}),"  ",i.createElement("span",null,this.state.isCopied?s.$T.common.copied:s.$T.common.copyToClipboard))))},t}(i.Component);t.InputCopyToClipboard=l},264:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.setNavigationHandler=function(e){this.navHandler=e},e.navigate=function(e){this.navHandler&&this.navHandler(e)},e}();t.NavigationService=n},265:function(e,t,r){"use strict";function n(e){return e.replace(/\s+/g," ").trim()}Object.defineProperty(t,"__esModule",{value:!0}),t.formatLogoProgram=function(e){for(var t=(function(e){var t=new RegExp(["[","]","*","/"].map(function(e){return"("+e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+")"}).join("|"),"g");return e.replace(t,function(e){return" "+e+" "})}(e).match(/[^\r\n]+/g)||[]).map(function(e){return e.trim()}).filter(function(e){return Boolean(e)}),r=0,i=[],o=0;o<t.length;++o){var a=n(t[o]),s=o<t.length-1?t[o+1]:"",u=a.toLowerCase();(u.startsWith("end")||a.startsWith("]"))&&r--,r>0?i.push("  ".repeat(r)+a):i.push(a);var l="]"===u||"end"===u,c=s.toLowerCase();l&&!("]"===c||"end"===c)&&i.push(""),(u.startsWith("to")||a.endsWith("["))&&r++}return i.join("\n")}},266:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return i.createElement("h1",{className:"title"},this.props.title)},t}(i.Component);t.PageHeader=o},267:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(47);t.defaultPlaygroundState={isLoading:!0,storageType:n.ProgramStorageType.samples,programId:"",code:"",programName:"",hasModifications:!1,isRunning:!1}},268:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTutorialsState={isLoading:!0,isStepLoading:!0,code:"",isRunning:!1,tutorialId:"",stepId:""}},271:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);r(272),r(594);var i=r(1),o=r(97),a=r(53),s=r(67),u=r(68),l=r(604),c=r(767),p=r(101);Object.assign(window,{app:{run:function(){return n.__awaiter(this,void 0,void 0,function(){var e,t,r,d;return n.__generator(this,function(n){switch(n.label){case 0:e=document.getElementById("app-container")||document.body,(t=c.createInitialStore()).dispatch(p.envThunks.initEnv()),n.label=1;case 1:return n.trys.push([1,2,,4]),o.render(i.createElement(a.Provider,{store:t},i.createElement(l.MainContainer,null)),e),[3,4];case 2:return r=n.sent(),[4,s.normalizeError(r)];case 3:throw d=n.sent(),o.render(i.createElement("div",{className:"ex-page-container"},i.createElement("div",{className:"ex-page-content"},i.createElement("div",{className:"container"},i.createElement("br",null),i.createElement("br",null),i.createElement("br",null),i.createElement("h1",{className:"title"},"Application failed"),i.createElement(u.AlertMessage,{title:d.name,message:d.message})))),e),r;case 4:return[2]}})})}}})},35:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=[];function i(e,t){var r=n.findIndex(function(t){return t.key===e});r>=0?n[r].value=t:n.push({key:e,value:t})}t.resetBindings=function(){n=[]},t.register=i,t.registerMockService=function(e,t){i(e,t)},t.resolve=function(e){var t=n.find(function(t){return t.key===e});if(!t)throw new Error("Missed registration for service: "+e.name);return t.value}},46:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.userLogin="actions.login",e.userLogout="actions.logout",e.tutorialsNavigation="actions.tutorialsNavigation",e.tutorialsFixTheCode="actions.tutorialsFixTheCode",e.shareScreenshot="actions.shareScreenshot",e.shareProgram="actions.shareProgram",e.saveProgramToPersonalLibrary="actions.saveProgram",e.revertProgramChanges="actions.revertProgram",e.openPlayground="navigation.openPlayground",e.openProgramFromLibrary="navigation.openProgramFromLibrary",e.openProgramFromSample="navigation.openProgramFromSample",e.openProgramFromShare="navigation.openProgramFromShare",e.openGallery="navigation.openGallery",e.openSettings="navigation.openSettings",e.openAbout="navigation.openAbout",e.openCheatsheet="navigation.openCheatsheet",e.openTutorials="navigation.openTutorials"}(t.EventAction||(t.EventAction={}));var n=function(){function e(){this.trackers=[]}return e.prototype.sendEvent=function(e,t){var r=e.split("."),n=r[0],i=r[1];if(!n||!i)throw new Error("Event action ID is not valid - should be in 'CATEGORY.ACTION' format");for(var o=0,a=this.trackers;o<a.length;o++){(0,a[o])({category:n,action:i,data:t})}},e.prototype.addTracker=function(e){this.trackers.push(e)},e}();t.EventsTrackingService=n},47:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.samples="samples",e.gallery="gallery",e.shared="shared",e.playground="playground"}(t.ProgramStorageType||(t.ProgramStorageType={})),t.createNewProgram=function(e){return{id:"",storageType:e.storageType,name:e.name||"",code:e.code||"",screenshot:e.screenshot||"",dateCreated:new Date,dateLastEdited:new Date}}},57:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(52),a=r(68),s=r(67);r(700);var u=function(e){function t(t){var r=e.call(this,t)||this;return r.isComponentMounted=!1,r.executeAction=function(){return n.__awaiter(r,void 0,Promise,function(){var e=this;return n.__generator(this,function(t){switch(t.label){case 0:return this.props.onConfirm?(this.setState({isActionInProgress:!0}),[4,s.callActionSafe(function(t){e.setState({isActionInProgress:!1,errorMessage:t.message})},function(){return n.__awaiter(e,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:return[4,this.props.onConfirm()];case 1:return e.sent(),[2,!0]}})})})]):[2];case 1:return t.sent()&&this.isComponentMounted&&this.setState({isActionInProgress:!1,errorMessage:""}),[2]}})})},r.state={errorMessage:"",isActionInProgress:!1},r}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.isComponentMounted=!0},t.prototype.componentWillUnmount=function(){this.isComponentMounted=!1},t.prototype.render=function(){var e=this,t=this.props.title||"Are you sure?",r=this.props.actionButtonText||"Delete",n=this.props.cancelButtonText||"Cancel";return i.createElement("div",{className:o("modal modal-component",{" is-active":this.props.show})},i.createElement("div",{className:"modal-background",onClick:this.props.onCancel}),i.createElement("div",{className:o("modal-card",{"is-medium":"medium"===this.props.width,"is-wide":"wide"===this.props.width})},i.createElement("header",{className:"modal-card-head"},i.createElement("p",{className:"modal-card-title"},t),i.createElement("button",{className:"delete","aria-label":"close",onClick:this.props.onCancel})),i.createElement("section",{className:o("modal-card-body")},this.props.children,this.state.errorMessage&&i.createElement(a.AlertMessage,{message:this.state.errorMessage,type:"danger"})),!this.props.withoutFooter&&i.createElement("footer",{className:"modal-card-foot"},this.props.onConfirm&&i.createElement("button",{className:o("button is-primary",{"is-loading":this.state.isActionInProgress}),onClick:this.executeAction},r),i.createElement("button",{className:"button",onClick:function(){e.state.isActionInProgress||e.props.onCancel()}},n))))},t}(i.Component);t.Modal=u},594:function(e,t,r){},603:function(e,t,r){},604:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(53),i=r(605),o=r(72);t.MainContainer=n.connect(function(e){return{isLoading:e.env.isLoading,tosterMessages:e.env.notifications}},{onTosterMessageClose:o.envActionCreator.closeNotification})(i.Main)},605:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(105),a=r(607),s=r(264),u=r(765),l=r(71),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return i.createElement(i.Fragment,null,i.createElement(u.MessageToster,{messages:this.props.tosterMessages,onClose:this.props.onTosterMessageClose}),i.createElement(l.Loading,{isLoading:this.props.isLoading,fullPage:!0}),i.createElement(o.HashRouter,{ref:function(e){s.NavigationService.setNavigationHandler(function(t){e&&e.history.push(t)})}},!this.props.isLoading&&i.createElement(a.RoutesComponent,null)))},t}(i.Component);t.Main=c},607:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(105),o=r(78),a=r(609),s=r(717),u=r(746),l=r(756),c=r(759),p=r(762);t.RoutesComponent=function(){return n.createElement(i.Switch,null,n.createElement(i.Route,{path:o.Routes.loginPage.path,component:l.LoginPageContainer}),n.createElement(i.Route,{path:o.Routes.gallery.path,component:a.GalleryContainer}),n.createElement(i.Route,{path:o.Routes.settings.path,component:p.SettingsPageContainer}),n.createElement(i.Route,{path:o.Routes.infoPage.path,component:c.InfoPage}),n.createElement(i.Route,{path:o.Routes.tutorials.path,component:u.TutorialsContainer}),n.createElement(i.Route,{exact:!0,path:o.Routes.playgroundDefault.path,component:s.PlaygroundContainer}),n.createElement(i.Route,{exact:!0,path:o.Routes.playground.path,render:function(e){return n.createElement(s.PlaygroundContainer,{storageType:e.match.params.storageType,programId:e.match.params.id})}}),n.createElement(i.Redirect,{from:"/",to:o.Routes.gallery.path}),n.createElement(i.Route,{component:a.GalleryContainer}))}},608:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this._path=e}return Object.defineProperty(e.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),e.prototype.build=function(e){var t=this._path;for(var r in e)e.hasOwnProperty(r)&&(t=t.replace(":"+r,encodeURIComponent(e[r])));return t},e}();t.RouteInfo=n},609:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(53),i=r(610),o=r(134),a=r(258);t.GalleryContainer=n.connect(function(e){return{activeSection:e.gallery.activeSection,programs:e.gallery.programs,isLoading:e.gallery.isLoading,user:e.env.user}},{selectSection:a.galleryThunks.loadSection,showImportModal:function(){return o.galleryActionCreator.toggleImportModal(!0)}})(i.Gallery)},610:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(52),a=r(105),s=r(611),u=r(165),l=r(35),c=r(20),p=r(78),d=r(130),h=r(46),f=r(131),m=r(638),g=r(640),v=r(71),y=r(238),_=r(80),E=r(714);r(716);var w=function(e){function t(t){var r=e.call(this,t)||this;return r.eventsTracker=l.resolve(h.EventsTrackingService),r.handleExportClick=function(){return n.__awaiter(r,void 0,void 0,function(){var e,t;return n.__generator(this,function(r){switch(r.label){case 0:return[4,new f.ProgramsHtmlSerializer(window).serialize(this.props.programs,this.props.user.name,this.props.user.imageUrl)];case 1:return e=r.sent(),t=new Blob([e],{type:"text/plain;charset=utf-8"}),s.saveAs(t,"my-logo-programs.html"),[2]}})})},r.state={},r}return n.__extends(t,e),t.prototype.componentDidMount=function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){return this.eventsTracker.sendEvent(h.EventAction.openGallery),this.props.selectSection(this.props.activeSection,{forceLoad:!0}),[2]})})},t.prototype.render=function(){var e=this;return i.createElement("div",{className:"ex-page-container gallery-component"},i.createElement(_.MainMenuContainer,null),i.createElement("div",{className:"ex-page-content is-fullscreen"},i.createElement("div",{className:"container"},i.createElement("br",null),this.renderTabs(),this.props.isLoading?i.createElement(v.Loading,{fullPage:!0,isLoading:!0}):i.createElement(i.Fragment,null,this.props.activeSection===d.GallerySection.PersonalLibrary&&i.createElement(i.Fragment,null,i.createElement("div",{className:"field is-grouped export-import-buttons-group"},i.createElement("p",{className:"control"},i.createElement("button",{type:"button",className:"button",onClick:this.props.showImportModal},c.$T.gallery.import)),this.props.programs.length>0&&i.createElement("p",{className:"control"},i.createElement("button",{type:"button",className:"button",onClick:this.handleExportClick},c.$T.gallery.export)),i.createElement(E.ImportProgramsModalContainer,null))),this.props.programs.length>0?i.createElement(i.Fragment,null,i.createElement(g.TileGrid,{tileWidth:250,tileWidthMobile:170,tiles:this.props.programs.map(function(t){return e.renderProgramCard(t)})}),i.createElement("br",null),this.props.activeSection===d.GallerySection.PersonalLibrary&&!this.props.user.isLoggedIn&&i.createElement("div",{className:"gallery-message-box"},i.createElement(y.InfoBox,{content:i.createElement("article",null,i.createElement("p",null,c.$T.gallery.notLoggedInGalleryMessage),i.createElement("p",null,i.createElement(a.Link,{to:p.Routes.loginPage.build({})},"Sign in")))}))):this.props.activeSection===d.GallerySection.PersonalLibrary&&i.createElement(m.NoData,{title:"",description:c.$T.gallery.emptyLibrary})))))},t.prototype.renderTabs=function(){var e=this;return i.createElement("div",{className:"tabs is-centered is-boxed"},i.createElement("ul",null,i.createElement("li",{className:o({"is-active":this.props.activeSection===d.GallerySection.ExamplesAdvanced})},i.createElement("a",{onClick:function(){return e.props.selectSection(d.GallerySection.ExamplesAdvanced)}},i.createElement("i",{className:"fas fa-flask"})," ",i.createElement("span",null,c.$T.gallery.examples))),i.createElement("li",{className:o({"is-active":this.props.activeSection===d.GallerySection.ExamplesBasic})},i.createElement("a",{onClick:function(){return e.props.selectSection(d.GallerySection.ExamplesBasic)}},i.createElement("i",{className:"fa fa-puzzle-piece"})," ",i.createElement("span",null,c.$T.gallery.shapes))),i.createElement("li",{className:o({"is-active":this.props.activeSection===d.GallerySection.PersonalLibrary})},i.createElement("a",{onClick:function(){return e.props.selectSection(d.GallerySection.PersonalLibrary)}},i.createElement("i",{className:"fas fa-images"})," ",i.createElement("span",null,c.$T.gallery.library)))))},t.prototype.renderProgramCard=function(e){var t=p.Routes.playground.build({storageType:u.ensure(e.storageType),id:e.id});return i.createElement("div",{className:"card program-card"},i.createElement("div",{className:"card-image"},i.createElement("figure",{className:"image is-4by3 gallery-img-container"},i.createElement(a.Link,{to:t},e.screenshot&&i.createElement("img",{src:e.screenshot}),i.createElement("div",{className:"gallery-img-title"},e.name)))))},t}(i.Component);t.Gallery=w},619:function(e,t){e.exports=void 0},622:function(e,t){},624:function(e,t){},638:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1);r(639);var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props.iconClass||"fa-picture-o";return i.createElement("div",{className:"no-data-component has-text-centered"},i.createElement("span",{className:"icon is-large"},i.createElement("i",{className:"fa "+e,"aria-hidden":"true"})),this.props.title&&i.createElement("h2",{className:"subtitle"},this.props.title),this.props.description&&i.createElement("p",null,this.props.description))},t}(i.Component);t.NoData=o},639:function(e,t,r){},640:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(100),a=r(132);r(641);var s=function(e){function t(t){var r=e.call(this,t)||this;return r.onWindowResize=o.debounce(function(){r.calculateColNumber()},100),r.state={tileWidth:0,gridWidth:0},r}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.calculateColNumber(),window.addEventListener("resize",this.onWindowResize)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onWindowResize)},t.prototype.calculateColNumber=function(){if(this.containerRef){var e=a.checkIsMobileDevice(),t=this.containerRef.offsetWidth-1,r=t/Math.max(1,Math.round(t/(e?this.props.tileWidthMobile:this.props.tileWidth)));this.setState({tileWidth:r,gridWidth:t})}},t.prototype.render=function(){var e=this;return i.createElement("div",{className:"tile-grid-component",ref:function(t){return e.containerRef=t||void 0}},i.createElement("div",{className:"tile-grid",style:{width:this.state.gridWidth}},this.state.tileWidth>0&&this.props.tiles.map(function(t,r){return i.createElement("div",{key:r,style:{width:e.state.tileWidth},className:"tile-grid-cell"},t)})))},t}(i.Component);t.TileGrid=s},641:function(e,t,r){},642:function(e,t,r){},643:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(105),a=r(52),s=r(78),u=r(20),l=r(644),c=function(e){function t(t){var r=e.call(this,t)||this;return r.handleMenuLogOutClick=function(){return n.__awaiter(r,void 0,void 0,function(){return n.__generator(this,function(e){return this.props.onLogout(),[2]})})},r.state={},r}return n.__extends(t,e),t.prototype.render=function(){var e=this;return i.createElement(i.Fragment,null,i.createElement("nav",{className:"navbar navbar-mobile-fix",role:"navigation","aria-label":"main navigation"},i.createElement("div",{className:"navbar-brand"},i.createElement(o.Link,{className:"navbar-item",to:s.Routes.gallery.build({})},i.createElement("span",{className:"ex-app-logo"})),i.createElement("div",{className:a("navbar-burger burger",{"is-active":this.state.isMenuToggled}),onClick:function(){e.setState({isMenuToggled:!e.state.isMenuToggled})}},i.createElement("span",null),i.createElement("span",null),i.createElement("span",null))),i.createElement("div",{className:a("navbar-menu",{"is-active":this.state.isMenuToggled}),onClick:function(){return e.setState({isMenuToggled:!1})}},i.createElement("div",{className:"navbar-start"},i.createElement(o.NavLink,{className:"navbar-item",activeClassName:"is-active",to:s.Routes.gallery.build({})},u.$T.gallery.galleryTitle),i.createElement(o.NavLink,{className:"navbar-item",activeClassName:"is-active",to:s.Routes.tutorials.build({})},u.$T.tutorial.tutorialsTitle),i.createElement("a",{href:"javascript:void(0)",className:"navbar-item",onClick:function(){return e.setState({isCheatSheetOpen:!0})}},u.$T.cheatSheet.cheatSheetTitle),i.createElement(o.NavLink,{className:"navbar-item",activeClassName:"is-active",to:s.Routes.playgroundDefault.build({})},u.$T.program.playgroundTitle)),i.createElement("div",{className:"navbar-end"},i.createElement("div",{className:"navbar-item has-dropdown is-hoverable"},i.createElement("span",{className:"navbar-link"},this.props.userImageUrl?i.createElement("img",{src:this.props.userImageUrl}):i.createElement("span",null,i.createElement("i",{className:"far fa-user","aria-hidden":"true"}))),i.createElement("div",{className:"navbar-dropdown is-right"},i.createElement(o.NavLink,{className:"navbar-item",activeClassName:"is-active",to:s.Routes.settings.build({})},i.createElement("i",{className:"fa fa-wrench icon-fixed-width","aria-hidden":"true"}),u.$T.settings.settingsTitle),i.createElement(o.NavLink,{className:"navbar-item",activeClassName:"is-active",to:s.Routes.infoPage.build({})},i.createElement("i",{className:"fa fa-info icon-fixed-width","aria-hidden":"true"}),u.$T.about.aboutTitle),i.createElement("hr",{className:"navbar-divider"}),!this.props.isLoggedIn&&i.createElement(o.NavLink,{className:"navbar-item",activeClassName:"is-active",to:s.Routes.loginPage.build({})},i.createElement("i",{className:"fas fa-sign-in-alt icon-fixed-width","aria-hidden":"true"}),u.$T.common.signIn),this.props.isLoggedIn&&i.createElement("a",{href:"javascript:void(0)",className:"navbar-item",onClick:this.handleMenuLogOutClick},i.createElement("i",{className:"fas fa-sign-out-alt icon-fixed-width","aria-hidden":"true"}),u.$T.common.signOut)))))),this.state.isCheatSheetOpen&&i.createElement(l.CheatSheetModal,{onClose:function(){return e.setState({isCheatSheetOpen:!1})},onError:this.props.onError}))},t}(i.Component);t.MainMenu=c},644:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(170),a=r(35),s=r(67),u=r(20),l=r(247),c=r(46),p=r(71),d=r(57);r(701);var h=function(e){function t(t){var r=e.call(this,t)||this;return r.contentLoader=a.resolve(l.LocalizedContentLoader),r.eventsTracking=a.resolve(c.EventsTrackingService),r.state={isLoading:!0,content:[]},r}return n.__extends(t,e),t.prototype.componentDidMount=function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:return this.eventsTracking.sendEvent(c.EventAction.openCheatsheet),[4,this.loadData()];case 1:return e.sent(),[2]}})})},t.prototype.loadData=function(){return n.__awaiter(this,void 0,void 0,function(){var e,t,r,i=this;return n.__generator(this,function(a){switch(a.label){case 0:return[4,s.callActionSafe(this.props.onError,function(){return n.__awaiter(i,void 0,void 0,function(){return n.__generator(this,function(e){return[2,this.contentLoader.getFileContent("cheat-sheet.md")]})})})];case 1:return(e=a.sent())&&(t=new o({html:!0}),r=e.split(/\n#\s/g).map(function(e){return e.trim()}).filter(function(e){return!!e}).map(function(e){return t.render(e)}),this.setState({content:r})),this.setState({isLoading:!1}),[2]}})})},t.prototype.render=function(){return i.createElement(d.Modal,{show:!0,title:u.$T.cheatSheet.cheatSheetTitle,onCancel:this.props.onClose,withoutFooter:!0,width:"wide"},i.createElement(p.Loading,{isLoading:this.state.isLoading}),i.createElement("br",null),i.createElement("div",{className:"columns is-desktop"},this.state.content.map(function(e,t){return i.createElement("div",{className:"column is-one-third-desktop",key:t},i.createElement("div",{className:"doc-section content",dangerouslySetInnerHTML:{__html:e}}))})),i.createElement("br",null))},t}(i.Component);t.CheatSheetModal=h},67:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i="Server error",o="Error details are not available",a="Unable to connect to server. Please contact your administrator.";function s(e,t,r){var n=new Error(r);return n.isResponse=!0,n.name=e,n.httpStatusCode=t,n}function u(e){return n.__awaiter(this,void 0,Promise,function(){var t,r;return n.__generator(this,function(n){switch(n.label){case 0:if(!e)return[2,new Error];if(e instanceof Error)return e.message&&e.message.indexOf("Failed to fetch")>=0?[2,new Error(a)]:[2,e];if(!(e instanceof Response))return[3,5];t="",n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.text()];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[2,s(i,e.status,o)];case 4:if(!t)return[2,s(i,e.status,o)];r=void 0;try{r=JSON.parse(t)}catch(r){return[2,s(i,e.status,"Error details: "+t)]}return[2,s(i,e.status,r.error||r.message||r.errorMessage||o)];case 5:return[2,new Error("Error: "+JSON.stringify(e,void 0,4))]}})})}t.normalizeError=u,t.callActionSafe=function(e,t){return n.__awaiter(this,void 0,Promise,function(){var r,i;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,4]),[4,t()];case 1:return[2,n.sent()];case 2:return r=n.sent(),console.error(r),[4,u(r)];case 3:return i=n.sent(),e(i),[2,void 0];case 4:return[2]}})})}},68:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);r(603),t.AlertMessage=function(e){var t=e.type||"danger",r=e.message||"",i=e.title;if(!r&&!i)return n.createElement(n.Fragment,null);var o="string"==typeof r&&!e.doNotDetectPreformatted&&(r.includes("<")||r.includes("{")||r.includes("["));return"danger"===t&&!i&&r&&r.toString().startsWith("Error: ")&&(i="Error",r=r.toString().substr(7)),n.createElement("div",{className:"alert-message-component"},n.createElement("article",{className:"message is-"+t},n.createElement("div",{className:"message-body"},i&&n.createElement("p",{className:"subtitle"},i),r&&(o?n.createElement("pre",null,r):n.createElement("p",null,r)))))}},700:function(e,t,r){},701:function(e,t,r){},702:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=function(){};t.AppConfig=i,t.loadConfig=function(){return n.__awaiter(this,void 0,Promise,function(){var e,t;return n.__generator(this,function(r){switch(r.label){case 0:return(e=new Headers).append("pragma","no-cache"),e.append("cache-control","no-cache"),[4,fetch("content/config/config.json",{credentials:"same-origin",method:"get",headers:e})];case 1:if((t=r.sent()).ok)return[2,t.json()];throw t}})})}},703:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(35),o=r(230),a=r(20),s=r(46),u=r(704),l=r(248),c=r(249),p=r(247),d=r(250),h=r(251),f=r(707),m=r(709),g=r(175),v=r(252),y=r(253),_=r(254),E=r(255),w=r(104),S=r(256),T=r(257),b=r(176),x=function(){function e(){}return e.setup=function(e){return n.__awaiter(this,void 0,void 0,function(){var t,r,x,P,R,C,I,A,O,N,L,M,D,k,U,B;return n.__generator(this,function(n){switch(n.label){case 0:return i.resetBindings(),t=e.appConfig,r=new w.AuthService(t),i.register(w.AuthService,r),[4,r.init()];case 1:return x=n.sent(),P=new s.EventsTrackingService,R=new u.GoogleAnalyticsTracker,P.addTracker(R.trackEvent),i.register(s.EventsTrackingService,P),C=new l.UserSettingsService(x.email),i.register(l.UserSettingsService,C),[4,C.get()];case 2:return I=n.sent(),b.themesManager.setTheme(b.themesManager.getThemeByName(I.themeName)),A=new p.LocalizedContentLoader(I.localeId),i.register(p.LocalizedContentLoader,A),[4,A.getFileContent("strings.po")];case 3:switch(O=n.sent(),o.updateStringsObject(a.$T,O),i.register(d.TutorialsService,new d.TutorialsService(A)),N=new h.ImageUploadImgurService(t.services.imgurServiceClientID,t.services.imgurServiceUrl),i.register(h.ImageUploadService,N),L=new v.GallerySamplesRepository,i.register(v.GallerySamplesRepository,L),M=new m.GalleryLocalRepository(x.email),x.authProvider){case w.AuthProvider.google:D=new f.GalleryGoogleDriveRepository(x.name,x.imageUrl,t)}return k=new g.GalleryService(M,D),i.register(g.GalleryService,k),U=new _.SharedProgramsRepository,i.register(_.SharedProgramsRepository,U),B=new c.LocalPlaygroundCodeStorage(x.email),i.register(c.LocalPlaygroundCodeStorage,B),i.register(y.ProgramService,new y.ProgramService(L,k,B,U)),i.register(E.LogoCodeSamplesService,new E.LogoCodeSamplesService),i.register(S.GalleryImportService,new S.GalleryImportService(k)),i.register(T.LogoImportsResolverService,new T.LogoImportsResolverService(M,L)),[2,{user:x,userSettings:I}]}})})},e}();t.DISetup=x},704:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){this.trackEvent=function(e){setTimeout(function(){var t=window.ga;t&&t.getAll()[0].send("event",{eventCategory:e.category,eventAction:e.action,eventLabel:e.data})},0)}};t.GoogleAnalyticsTracker=n},707:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(103),o=r(47),a=r(708),s=r(131),u=function(){function e(e,t,r){this.userName=e,this.userImage=t,this.appConfig=r,this.serializationService=new s.ProgramsHtmlSerializer(window),this.googleDriveClient=new a.GoogleDriveClient}return e.prototype.getAll=function(){return n.__awaiter(this,void 0,Promise,function(){var e;return n.__generator(this,function(t){switch(t.label){case 0:return[4,this.getStoredData()];case 1:return(e=t.sent())?[2,e.programs]:[2,[]]}})})},e.prototype.get=function(e){return n.__awaiter(this,void 0,Promise,function(){var t,r;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.getAll()];case 1:if(t=n.sent(),!(r=t.find(function(t){return t.id===e})))throw new Error("Program is not found");return[2,r]}})})},e.prototype.add=function(e){return n.__awaiter(this,void 0,Promise,function(){var t,r,o,a,s;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.getStoredData()];case 1:for(t=n.sent(),r=t?t.programs.slice():[],o=0,a=e;o<a.length;o++)(s=a[o]).id||(s.id=i.RandomHelper.getRandomObjectId(32)),s.dateCreated=new Date,s.dateLastEdited=new Date,r.push(s);return[4,this.storeData(r,t?t.fileId:void 0)];case 2:return n.sent(),[2]}})})},e.prototype.save=function(e){return n.__awaiter(this,void 0,Promise,function(){var t,r;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.getStoredData()];case 1:if(!(t=n.sent()))throw new Error("Google storage is empty");if(!(r=t.programs.find(function(t){return t.id===e.id})))throw new Error("Program is not found in google storage");return r.dateLastEdited=new Date,r.code=e.code,r.screenshot=e.screenshot,[4,this.storeData(t.programs,t.fileId)];case 2:return n.sent(),[2]}})})},e.prototype.remove=function(e){return n.__awaiter(this,void 0,Promise,function(){var t,r;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.getStoredData()];case 1:if(!(t=n.sent()))throw new Error("Google storage is empty");return r=t.programs.filter(function(t){return t.id!==e}),[4,this.storeData(r,t.fileId)];case 2:return n.sent(),[2]}})})},e.prototype.storeData=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.serializationService.serialize(e,this.userName,this.userImage)];case 1:return r=n.sent(),t?[4,this.googleDriveClient.updateFile(t,this.appConfig.services.googleDriveGalleryFilename,r,"text/html; charset=UTF-8")]:[3,3];case 2:return n.sent(),[3,5];case 3:return[4,this.googleDriveClient.uploadNewFile(this.appConfig.services.googleDriveGalleryFilename,r,"text/html; charset=UTF-8")];case 4:n.sent(),n.label=5;case 5:return[2]}})})},e.prototype.getStoredData=function(){return n.__awaiter(this,void 0,Promise,function(){var e,t,r,i,a,s;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.getStorageFileInfo()];case 1:return(e=n.sent())?this.cachedData&&this.cachedData.fileHash===e.md5Checksum?[2,this.cachedData]:[4,this.googleDriveClient.downloadFileContent(e.id)]:[2,void 0];case 2:for(t=n.sent(),r=this.serializationService.parse(t),i={fileId:e.id,fileHash:e.md5Checksum,programs:r},a=0,s=r;a<s.length;a++)s[a].storageType=o.ProgramStorageType.gallery;return this.cachedData=i,[2,i]}})})},e.prototype.getStorageFileInfo=function(){return n.__awaiter(this,void 0,Promise,function(){var e,t,r;return n.__generator(this,function(n){switch(n.label){case 0:return e=this.appConfig.services.googleDriveGalleryFilename,[4,this.googleDriveClient.listFiles("name = '"+e+"' and trashed = false")];case 1:return t=n.sent(),(r=t.files.find(function(t){return t.name===e&&!!t.md5Checksum&&!t.trashed}))?[2,r]:(console.log("storage file is not found"),[2,void 0])}})})},e}();t.GalleryGoogleDriveRepository=u},708:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(103),o=function(){function e(){}return Object.defineProperty(e.prototype,"gapi",{get:function(){var e=window.gapi;if(!e)throw new Error("Google api is not detected");return e},enumerable:!0,configurable:!0}),e.prototype.listFiles=function(e){return n.__awaiter(this,void 0,Promise,function(){var t;return n.__generator(this,function(r){switch(r.label){case 0:return[4,this.gapi.client.drive.files.list({fields:"nextPageToken, files(id, name, md5Checksum, trashed)",pageSize:100,q:e})];case 1:return t=r.sent(),[2,t.result]}})})},e.prototype.downloadFileContent=function(e){return n.__awaiter(this,void 0,Promise,function(){var t,r;return n.__generator(this,function(n){switch(n.label){case 0:return t=this.gapi.client.getToken(),[4,fetch("https://www.googleapis.com/drive/v3/files/"+e+"?alt=media",{method:"GET",headers:new Headers({Authorization:t.token_type+" "+t.access_token})})];case 1:if((r=n.sent()).ok)return[2,r.text()];throw new Error("Google drive read error")}})})},e.prototype.uploadNewFile=function(e,t,r){return n.__awaiter(this,void 0,Promise,function(){var o,a,s;return n.__generator(this,function(n){switch(n.label){case 0:return o=this.gapi.client.getToken(),a="__"+i.RandomHelper.getRandomObjectId(32)+"__",s=this.createFileUploadBody(a,e,t,r),"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",[4,fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:new Headers({Authorization:o.token_type+" "+o.access_token,Accept:"application/json","Content-Type":"multipart/related; boundary="+a,"Content-Length":s.length}),body:s})];case 1:return n.sent(),[2]}})})},e.prototype.updateFile=function(e,t,r,o){return n.__awaiter(this,void 0,Promise,function(){var a,s,u;return n.__generator(this,function(n){switch(n.label){case 0:return a=this.gapi.client.getToken(),s="__"+i.RandomHelper.getRandomObjectId(32)+"__",u=this.createFileUploadBody(s,t,r,o),[4,fetch("https://www.googleapis.com/upload/drive/v3/files/"+e+"?uploadType=multipart",{method:"PATCH",headers:new Headers({Authorization:a.token_type+" "+a.access_token,Accept:"application/json","Content-Type":"multipart/related; boundary="+s,"Content-Length":u.length}),body:u})];case 1:return n.sent(),[2]}})})},e.prototype.createFileUploadBody=function(e,t,r,n){var i="";return i+="--"+e+"\n",i+="Content-Type: application/json; charset=UTF-8\n\n",i+=JSON.stringify({name:t}),i+="\n--"+e+"\n",i+="Content-Type: "+n+"\n\n",i+=r,i+="\n\n--"+e+"--\n"},e}();t.GoogleDriveClient=o},709:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(103),i=r(47),o=r(73),a=r(102),s=function(){function e(e){var t=o.localStoragePrefix+"gallery:"+(e||"guest");this.localStorage=new a.LocalStorage(t,[])}return e.prototype.getAll=function(){for(var e=this.localStorage.getValue(),t=0,r=e;t<r.length;t++){var n=r[t];n.dateCreated=new Date(n.dateCreated),n.dateLastEdited=new Date(n.dateLastEdited)}return e},e.prototype.get=function(e){var t=this.getAll().find(function(t){return t.id===e});if(!t)throw new Error("Program with id "+e+" is not found");return t},e.prototype.add=function(e){var t=this.getAll();this.addAndSave(t,e,!0)},e.prototype.save=function(e){var t=this.getAll(),r=t.find(function(t){return t.id===e.id});if(!r)throw new Error("Program with id "+e.id+" is not found");r.code=e.code,r.screenshot=e.screenshot,r.dateLastEdited=new Date,this.localStorage.setValue(t)},e.prototype.remove=function(e){var t=this.getAll().filter(function(t){return t.id!==e});this.localStorage.setValue(t)},e.prototype.overwrite=function(e){this.addAndSave([],e,!1)},e.prototype.addAndSave=function(e,t,r){for(var o=e.slice(),a=0,s=t;a<s.length;a++){var u=s[a];u.id||(u.id=n.RandomHelper.getRandomObjectId(32)),r&&(u.dateCreated=new Date,u.dateLastEdited=new Date),u.storageType=i.ProgramStorageType.gallery,o.push(u)}this.localStorage.setValue(o)},e}();t.GalleryLocalRepository=s},71:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1);r(642);var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.startAnimation()},t.prototype.componentDidUpdate=function(e){e.isLoading!=this.props.isLoading&&this.startAnimation()},t.prototype.startAnimation=function(){this.props.isLoading&&window.showLogoAnimation(this.loadingContainer)},t.prototype.render=function(){var e=this;return this.props.isLoading?this.props.fullPage?i.createElement("div",{className:"ex-loading-indicator-fullpage"},i.createElement("div",{ref:function(t){return e.loadingContainer=t||void 0},className:"ex-loading-indicator"})):i.createElement("div",{ref:function(t){return e.loadingContainer=t||void 0},className:"ex-loading-indicator"}):i.createElement(i.Fragment,null)},t}(i.Component);t.Loading=o},710:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(103),i=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*))(?:Z|(\+|-)([\d|:]*))?$/;t.defaultDate=new Date(0),t.formatFileSize=function(e){if(0==e)return"Empty file";var t=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,t)).toFixed(2)+" "+["B","kB","MB","GB","TB"][t]},t.formatId=function(e,t){var r=e.toLowerCase().replace(/\W/g,"-");""==r&&(r=n.RandomHelper.getRandomObjectId(4));for(var i=r,o=1;t(i);)i=r+"-"+ ++o;return i},t.getFileExtension=function(e){if(!e)return"";var t=e.lastIndexOf(".");return t<0?"":e.substr(t+1).toLowerCase()},t.stringifyDateAsJson=function(e){return JSON.parse(JSON.stringify({d:e})).d},t.jsonDateReviver=function(e,t){return"string"==typeof t&&i.exec(t)?new Date(t):t},t.parseDateFromJson=function(e,t){if(e&&i.exec(e))return new Date(e);if(t)return t;throw new Error("Cannot parse a date from "+e)},t.strToBase16=function(e){for(var t=[],r=0;r<e.length;++r){var n=e.charCodeAt(r).toString(16);1===n.length&&(n="0"+n),t[t.length]=n}return t.join("")}},711:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(712),o=function(){function e(){}return e.prototype.get=function(e){return n.__awaiter(this,void 0,Promise,function(){var t,r,o,a;return n.__generator(this,function(n){try{if(t=i.decompressFromEncodedURIComponent(decodeURIComponent(e)),r=JSON.parse(t),o=r.name,a=r.text,!o||!a)throw new Error("Error during decoding of shared program");return[2,{name:o,text:a}]}catch(e){throw console.error(e),new Error("Error during decoding of shared program")}return[2]})})},e.prototype.post=function(e,t){return n.__awaiter(this,void 0,Promise,function(){var r;return n.__generator(this,function(n){return r=JSON.stringify({name:e,text:t}),[2,i.compressToEncodedURIComponent(r)]})})},e}();t.SharedProgramsUrlEncoder=o},713:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=function(){function e(e){this.googleClientId=e,this.getLoginInfo=function(e){var t=e&&e.isSignedIn(),r=e&&e.getBasicProfile();if(t&&r)return{email:r.getEmail(),imageUrl:r.getImageUrl(),name:r.getName(),id:r.getId()}}}return e.prototype.init=function(){return n.__awaiter(this,void 0,Promise,function(){var e,t,r;return n.__generator(this,function(n){switch(n.label){case 0:if(n.trys.push([0,4,,5]),!(e=window.gapi))throw new Error("Google API is not loaded");return e.auth2?[3,3]:[4,this.loadGApiAuth()];case 1:return n.sent(),[4,e.client.init({clientId:this.googleClientId,scope:"profile email https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/drive.file",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],prompt:"select_account"})];case 2:n.sent(),n.label=3;case 3:return t=e.auth2.getAuthInstance(),r=t.currentUser.get(),[2,this.getLoginInfo(r)];case 4:return n.sent(),[2,void 0];case 5:return[2]}})})},e.prototype.loadGApiAuth=function(){return n.__awaiter(this,void 0,Promise,function(){var e;return n.__generator(this,function(t){return e=window.gapi,[2,new Promise(function(t,r){e.load("client:auth2",{callback:function(){t()},onerror:function(){r()},timeout:5e3,ontimeout:function(){r()}})})]})})},e.prototype.signOut=function(){return n.__awaiter(this,void 0,Promise,function(){var e;return n.__generator(this,function(t){switch(t.label){case 0:return e=window.gapi,[4,e.auth2.getAuthInstance().signOut()];case 1:return t.sent(),[2]}})})},e.prototype.signIn=function(){return n.__awaiter(this,void 0,Promise,function(){var e,t,r;return n.__generator(this,function(n){switch(n.label){case 0:return e=window.gapi,[4,this.init()];case 1:return n.sent(),[4,(t=e.auth2.getAuthInstance()).signIn()];case 2:return n.sent(),r=t.currentUser.get(),[2,this.getLoginInfo(r)]}})})},e}();t.GoogleAuthService=i},714:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(53),i=r(715),o=r(134),a=r(258);t.ImportProgramsModalContainer=n.connect(function(e){return{showImportModal:e.gallery.showImportModal,importErrorMessage:e.gallery.importErrorMessage,isImportInProgress:e.gallery.isImportInProgress}},{onImport:a.galleryThunks.import,onClose:function(){return o.galleryActionCreator.toggleImportModal(!1)}})(i.ImportProgramsModal)},715:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(52),a=r(20),s=r(57),u=r(71),l=r(68),c=function(e){function t(t){var r=e.call(this,t)||this;return r.handleFileInputChange=function(e){if(e.preventDefault(),e.target){var t=e.target;if(t&&t.files){var i=t.files.item(0);if(i){var o=new FileReader;o.onload=function(e){return n.__awaiter(r,void 0,void 0,function(){var t;return n.__generator(this,function(r){return(t=e.target.result)&&this.setState({fileName:i.name,fileContent:t}),[2]})})},o.readAsText(i,"UTF-8")}}}},r.handleImportClick=function(){return n.__awaiter(r,void 0,void 0,function(){return n.__generator(this,function(e){return this.state.fileContent&&this.props.onImport(this.state.fileContent),[2]})})},r.handleCancel=function(){r.setState({fileName:""}),r.props.onClose()},r.state={},r}return n.__extends(t,e),t.prototype.render=function(){return i.createElement(s.Modal,{show:this.props.showImportModal,title:a.$T.gallery.importModalTitle,cancelButtonText:a.$T.common.cancel,onCancel:this.handleCancel,actionButtonText:a.$T.gallery.import,onConfirm:this.state.fileName&&!this.props.isImportInProgress?this.handleImportClick:void 0},this.props.isImportInProgress?i.createElement(u.Loading,{isLoading:!0}):i.createElement(i.Fragment,null,i.createElement("div",{className:o("file is-boxed",{"has-name":!!this.state.fileName})},i.createElement("label",{className:"file-label"},i.createElement("input",{className:"file-input",type:"file",name:"resume",onChange:this.handleFileInputChange}),i.createElement("span",{className:"file-cta"},i.createElement("span",{className:"file-icon"},i.createElement("i",{className:"fas fa-upload"})),i.createElement("span",{className:"file-label"},a.$T.gallery.chooseAFile)),this.state.fileName&&i.createElement("span",{className:"file-name"},this.state.fileName))),this.props.importErrorMessage&&i.createElement(i.Fragment,null,i.createElement("br",null),i.createElement(l.AlertMessage,{type:"danger",message:this.props.importErrorMessage}))))},t}(i.Component);t.ImportProgramsModal=c},716:function(e,t,r){},717:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(53),i=r(178),o=r(718),a=r(745);t.PlaygroundContainer=n.connect(function(e,t){return{isLoading:e.playground.isLoading,storageType:t.storageType,programId:t.programId,code:e.playground.code,programName:e.playground.programName,hasModifications:e.playground.hasModifications,isRunning:e.playground.isRunning,userSettings:e.env.userSettings,appTheme:e.env.appTheme}},{loadProgram:a.playgroundThunks.loadProgram,codeChanged:a.playgroundThunks.codeChanged,runProgram:i.playgroundActionCreator.runProgram,stopProgram:i.playgroundActionCreator.stopProgram,saveAsProgram:a.playgroundThunks.saveAsProgram,saveProgram:a.playgroundThunks.saveProgram,deleteProgram:a.playgroundThunks.deleteProgram,clearProgram:i.playgroundActionCreator.clearProgram,revertChanges:a.playgroundThunks.revertChanges,formatCode:a.playgroundThunks.formatCode})(o.Playground)},718:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(20),a=r(35),s=r(132),u=r(73),l=r(47),c=r(257),p=r(259),d=r(179),h=r(135),f=r(71),m=r(261),g=r(262),v=r(80),y=r(136),_=r(743);r(744);var E=function(e){function t(t){var r=e.call(this,t)||this;return r.isMobileDevice=s.checkIsMobileDevice(),r.defaultLayoutConfigJSON=JSON.stringify(r.isMobileDevice?_.playgroundDefaultMobileLayout:_.playgroundDefaultLayout),r.layoutLocalStorageKey=u.localStoragePrefix+"playground-layout"+(r.isMobileDevice?"-mobile":"-desktop"),r.importsResolver=a.resolve(c.LogoImportsResolverService),r.handleCodeChanged=function(e){r.props.codeChanged(e)},r.handleRunProgram=function(){r.props.runProgram()},r.handleStopProgram=function(){r.props.stopProgram()},r.getProgramImage=function(){return r.logoExecutorRef?r.logoExecutorRef.createScreenshotBase64(!1):""},r.getSmallProgramImage=function(){return r.logoExecutorRef?r.logoExecutorRef.createScreenshotBase64(!0):""},r.handleDeleteProgram=function(){r.props.deleteProgram()},r.handleRevertChanges=function(){r.props.revertChanges()},r.handleSave=function(){r.props.saveProgram(r.getSmallProgramImage())},r.handleSaveAs=function(e){r.props.saveAsProgram(e,r.getSmallProgramImage())},r.handleFormatDocument=function(){r.props.formatCode()},r.state={resizeIncrement:1},r}return n.__extends(t,e),t.prototype.componentDidMount=function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){return this.importsResolver.reset(),this.props.loadProgram(this.props.storageType,this.props.programId),[2]})})},t.prototype.componentDidUpdate=function(e){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){return e.storageType==this.props.storageType&&e.programId==this.props.programId||(this.importsResolver.reset(),this.props.loadProgram(this.props.storageType,this.props.programId)),[2]})})},t.prototype.componentWillUnmount=function(){this.props.clearProgram()},t.prototype.render=function(){var e=this;return i.createElement("div",{className:"ex-page-container"},i.createElement(v.MainMenuContainer,null),i.createElement("div",{className:"ex-page-content is-fullscreen playground-page-component"},i.createElement(f.Loading,{isLoading:this.props.isLoading,fullPage:!0}),i.createElement(p.ReactGoldenLayout,{className:"golden-layout-container",configLayoutOverride:{settings:{showMaximiseIcon:!1,showPopoutIcon:!1,showCloseIcon:!1},dimensions:{headerHeight:32}},layoutLocalStorageKey:this.layoutLocalStorageKey,defaultLayoutConfigJSON:this.defaultLayoutConfigJSON,onLayoutChange:function(){return e.setState({resizeIncrement:e.state.resizeIncrement+1})}},i.createElement(d.ReactGoldenLayoutPanel,{id:"code-panel",title:this.buildCodePanelTitle()},i.createElement(g.CodeMenu,{isRunning:this.props.isRunning,code:this.props.code,programName:this.props.programName,onRunProgram:this.handleRunProgram,onStopProgram:this.handleStopProgram,createScreenShotImageBase64:this.getProgramImage,createSmallScreenShotImageBase64:this.getSmallProgramImage,isDeleteEnabled:this.props.storageType===l.ProgramStorageType.gallery,onDeleteProgram:this.handleDeleteProgram,isRevertEnabled:this.props.hasModifications&&void 0!==this.props.storageType,onRevertChanges:this.handleRevertChanges,isSaveEnabled:this.props.storageType===l.ProgramStorageType.gallery,onSave:this.handleSave,onSaveAs:this.handleSaveAs,onFormatDocument:this.handleFormatDocument}),i.createElement(m.CodeInput,{className:"code-input-container",editorTheme:this.props.appTheme.codeEditorThemeName,code:this.props.code,onChanged:this.handleCodeChanged,hotKeys:["f9"],onHotkey:this.handleRunProgram,resizeIncrement:this.state.resizeIncrement})),i.createElement(d.ReactGoldenLayoutPanel,{id:"output-panel",title:this.buildOutputPanelTitle()},i.createElement(h.LogoExecutor,{ref:function(t){return e.logoExecutorRef=t||void 0},isRunning:this.props.isRunning,onFinish:this.handleStopProgram,code:this.props.code,isDarkTheme:this.props.appTheme.isDark,turtleImageSrc:y.getTurtleById(this.props.userSettings.turtleId).imageSrc,turtleSize:this.props.userSettings.turtleSize,importsResolver:this.importsResolver})))))},t.prototype.buildCodePanelTitle=function(){var e='<i class="fa fa-code" aria-hidden="true"></i> ';return this.props.programId?(e+=o.$T.program.program+": <strong>"+this.props.programName+"</strong>",this.props.hasModifications&&(e+=' <i class="fa fa-asterisk icon-sm" aria-hidden="true" title="'+o.$T.program.programHasChanges+'"></i>')):e+=o.$T.program.codePanelTitle,e},t.prototype.buildOutputPanelTitle=function(){return'<i class="fas fa-desktop" aria-hidden="true"></i> '+o.$T.program.outputPanelTitle},t}(i.Component);t.Playground=E},72:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(133);!function(e){e.INIT_ENV_STARTED="INIT_ENV_STARTED",e.SIGN_IN_COMPLETED="SIGN_IN_COMPLETED",e.SIGN_OUT_COMPLETED="SIGN_OUT_COMPLETED",e.APPLY_USER_SETTINGS_COMPLETED="APPLY_USER_SETTINGS_COMPLETED",e.ERROR="ERROR",e.SHOW_NOTIFICATION="SHOW_NOTIFICATION",e.CLOSE_NOTIFICATION="CLOSE_NOTIFICATION"}(n=t.EnvActionType||(t.EnvActionType={})),t.envActionCreator={initEnvStarted:function(){return i.action(n.INIT_ENV_STARTED)},signInCompleted:function(e){return i.action(n.SIGN_IN_COMPLETED,e)},applyUserSettingsCompleted:function(e){return i.action(n.APPLY_USER_SETTINGS_COMPLETED,e)},handleError:function(e){return i.action(n.ERROR,{errDef:e})},showNotification:function(e,t,r){return i.action(n.SHOW_NOTIFICATION,{type:e,title:t,message:r})},closeNotification:function(e){return i.action(n.CLOSE_NOTIFICATION,{id:e})}}},721:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.setGoldenLayout=function(e){this.layout=e},e.prototype.destroy=function(){this.layout&&(this.layout.destroy(),this.layout=void 0)},e.prototype.updateSize=function(){this.layout&&this.layout.updateSize()},e.prototype.setPanelTitle=function(e,t){if(this.layout){var r=this.findGoldenLayoutContentItem(this.layout.root,e);r?r.setTitle(t):console.error("Error: cannot find panel in layout: "+e)}},e.prototype.findGoldenLayoutContentItem=function(e,t){if(e){if(e.config.componentName===t)return e;for(var r=0,n=e.contentItems;r<n.length;r++){var i=n[r],o=this.findGoldenLayoutContentItem(i,t);if(o)return o}}},e}();t.GoldenLayoutHelper=n},722:function(module,exports){function LogoInterpreter(turtle,stream,savehook){"use strict";var self=this,UNARY_MINUS="<UNARYMINUS>",ERRORS={BAD_INPUT:4,NO_OUTPUT:5,NOT_ENOUGH_INPUTS:6,TOO_MANY_INPUTS:8,BAD_OUTPUT:9,MISSING_PAREN:10,BAD_VAR:11,BAD_PAREN:12,ALREADY_DEFINED:15,THROW_ERROR:21,IS_PRIMITIVE:22,BAD_PROC:24,NO_TEST:25,BAD_BRACKET:26,BAD_BRACE:27,USER_GENERATED:35,MISSING_SPACE:39};function format(e,t){return e.replace(/{(\w+)(:[UL])?}/g,function(e,r,n){var i="_PROC_"===r?self.stack[self.stack.length-1]:String(t[r]);switch(n){case":U":return i.toUpperCase();case":L":return i.toLowerCase();default:return i}})}function __(e){return self.localize&&self.localize(e)||e}function err(e,t,r){"number"==typeof t&&(r=t,t=void 0);var n=new LogoError("ERROR",void 0,format(__(e),t));return void 0!==r&&(n.code=r),n}function LogoError(e,t,r){this.name="LogoError",this.message=r||format(__("No CATCH for tag {tag}"),{tag:e}),this.tag=e,this.value=t,this.proc=self.stack[self.stack.length-1],this.code=-1,this.line=-1}function isKeyword(e,t){return"word"===Type(e)&&(e=String(e).toUpperCase(),self.keywordAlias&&(e=self.keywordAlias(e)||e),e===t)}function promiseLoop(e){return new Promise(function(t,r){!function n(){try{e(n,t,r)}catch(e){r(e)}}()})}function serialExecute(e){var t=[];return promiseLoop(function(r,n,i){e.length?Promise.resolve(e.shift()()).then(function(e){t.push(e),r()},i):n(t)})}function promiseFinally(e,t){return e.then(function(e){return Promise.resolve(t()).then(function(){return e})},function(e){return Promise.resolve(t()).then(function(){throw e})})}this.localize=null,this.keywordAlias=null;var lastTimeYielded=Date.now();function promiseYield(){var e=Date.now();return e-lastTimeYielded>20?(lastTimeYielded=e,new Promise(function(e){setTimeout(e,0)})):Promise.resolve()}function promiseYieldTime(e){return lastTimeYielded=Date.now()+2*e,new Promise(function(t){setTimeout(t,e)})}function to_arity($$func$$,arity){var parms=[];if($$func$$.length===arity)return $$func$$;for(var i=0;i<arity;++i)parms.push("a"+i);var f=eval("(function "+$$func$$.name+"("+parms.join(",")+"){ return $$func$$.apply(this, arguments); })");return f}function PRNG(e){var t=2147483647&e,r=48271,n=2147483647,i=n/r;this.next=function(){var e=r*(t%i)-3399*(t/i);return t=e>0?e:e+n,this.last=t/n,this.last},this.seed=function(e){t=2147483647&e},this.next()}function StringMap(e){this._map=new Map,this._case_fold=e}function LogoArray(e,t){this._array=[],this._array.length=e;for(var r=0;r<this._array.length;++r)this._array[r]=[];this._origin=t}function Stream(e){this._string=e,this._index=0,this._skip()}function Output(e){this.output=e}function Bye(){}function Type(e){if(void 0===e)throw err("No output from procedure",ERRORS.NO_OUTPUT);if("string"==typeof e||"number"==typeof e)return"word";if(Array.isArray(e))return"list";if(e instanceof LogoArray)return"array";throw"then"in Object(e)?new Error("Internal error: Unexpected value: a promise"):e?new Error("Internal error: Unexpected value: unknown type"):new Error("Internal error: Unexpected value: null")}function parse(e){if(void 0!==e){for(var t,r=[],n=new Stream(e);n.peek();){for(var i,o=isWS(n.peek());isWS(n.peek());)n.get();if(!n.peek())break;if("["===n.peek())n.get(),i=parseList(n);else{if("]"===n.peek())throw err("Unexpected ']'",ERRORS.BAD_BRACKET);if("{"===n.peek())n.get(),i=parseArray(n);else{if("}"===n.peek())throw err("Unexpected '}'",ERRORS.BAD_BRACE);if('"'===n.peek())i=parseQuoted(n);else if(isOwnWord(n.peek()))i=n.get();else if(inRange(n.peek(),"0","9"))i=parseNumber(n);else if(inChars(n.peek(),OPERATOR_CHARS)){if("-"===(i=parseOperator(n))){var a=isWS(n.peek());(void 0===t||"word"===Type(t)&&isInfix(t)||"word"===Type(t)&&"("===t||o&&!a)&&(i=UNARY_MINUS)}}else{if(inChars(n.peek(),WORD_DELIMITER))throw err("Couldn't parse: '{string}'",{string:n.rest});i=parseWord(n)}}}r.push(i),t=i}return r}}function inRange(e,t,r){return t<=e&&e<=r}function inChars(e,t){return e&&-1!==t.indexOf(e)}Object.defineProperties(StringMap.prototype,{get:{value:function(e){return e=this._case_fold?String(e).toLowerCase():String(e),this._map.get(e)}},set:{value:function(e,t){e=this._case_fold?String(e).toLowerCase():String(e),this._map.set(e,t)}},has:{value:function(e){return e=this._case_fold?String(e).toLowerCase():String(e),this._map.has(e)}},delete:{value:function(e){return e=this._case_fold?String(e).toLowerCase():String(e),this._map.delete(e)}},keys:{value:function(){var e=[];return this._map.forEach(function(t,r){e.push(r)}),e}},empty:{value:function(){return 0===this._map.size}},forEach:{value:function(e){return this._map.forEach(function(t,r){e(r,t)})}}}),LogoArray.from=function(e,t){var r=new LogoArray(0,t);return r._array=Array.from(e),r},Object.defineProperties(LogoArray.prototype,{item:{value:function(e){if(e=0|Number(e),(e-=this._origin)<0||e>=this._array.length)throw err("{_PROC_}: Index out of bounds",ERRORS.BAD_INPUT);return this._array[e]}},setItem:{value:function(e,t){if(e=0|Number(e),(e-=this._origin)<0||e>=this._array.length)throw err("{_PROC_}: Index out of bounds",ERRORS.BAD_INPUT);this._array[e]=t}},list:{get:function(){return this._array}},origin:{get:function(){return this._origin}},length:{get:function(){return this._array.length}}}),Object.defineProperties(Stream.prototype,{eof:{get:function(){return this._index>=this._string.length}},peek:{value:function(){var e=this._string.charAt(this._index);return"\\"===e&&(e+=this._string.charAt(this._index+1)),e}},get:{value:function(){var e=this._next();return this._skip(),e}},_next:{value:function(){var e=this._string.charAt(this._index++);return"\\"===e&&(e+=this._string.charAt(this._index++)),e}},_skip:{value:function(){for(;!this.eof;){var e=this.peek();if("~"===e&&"\n"===this._string.charAt(this._index+1))this._index+=2;else{if(";"!==e)return;do{e=this._next()}while(!this.eof&&"\n"!==this.peek());"~"===e&&this._next()}}}},rest:{get:function(){return this._string.substring(this._index)}}}),self.turtle=turtle,self.stream=stream,self.routines=new StringMap(!0),self.scopes=[new StringMap(!0)],self.plists=new StringMap(!0),self.prng=new PRNG(2147483647*Math.random()),self.forceBye=!1,Output.prototype.toString=function(){return this.output},Output.prototype.valueOf=function(){return this.output};var WS_CHARS=" \f\n\r\t\v";function isWS(e){return inChars(e,WS_CHARS)}var QUOTED_DELIMITER=WS_CHARS+"[](){}";function parseQuoted(e){for(var t="";!e.eof&&-1===QUOTED_DELIMITER.indexOf(e.peek());){var r=e.get();t+="\\"===r.charAt(0)?r.charAt(1):r.charAt(0)}return t}var OWNWORD_CHARS="←↑→↓";function isOwnWord(e){return inChars(e,OWNWORD_CHARS)}var WORD_DELIMITER=WS_CHARS+"[](){}+-*/%^=<>";function parseWord(e){for(var t="";!e.eof&&-1===WORD_DELIMITER.indexOf(e.peek());){var r=e.get();t+="\\"===r.charAt(0)?r.charAt(1):r.charAt(0)}return t}var OPERATOR_CHARS="+-*/%^=<>[]{}()";function parseOperator(e){var t="";return inChars(e.peek(),OPERATOR_CHARS)&&(t+=e.get()),("<"===t&&"="===e.peek()||">"===t&&"="===e.peek()||"<"===t&&">"===e.peek())&&(t+=e.get()),t}function isInfix(e){return["+","-","*","/","%","^","=","<",">","<=",">=","<>"].includes(e)}function isOperator(e){return isInfix(e)||["[","]","{","}","(",")"].includes(e)}function parseNumber(e){for(var t="";inRange(e.peek(),"0","9");)t+=e.get();if("."===e.peek()&&(t+=e.get()),inRange(e.peek(),"0","9"))for(;inRange(e.peek(),"0","9");)t+=e.get();if("E"===e.peek()||"e"===e.peek())for(t+=e.get(),"-"!==e.peek()&&"+"!==e.peek()||(t+=e.get());inRange(e.peek(),"0","9");)t+=e.get();return t}function isNumber(e){return String(e).match(/^-?([0-9]*\.?[0-9]+(?:[eE][\-+]?[0-9]+)?)$/)}function parseInteger(e){var t="";for("-"===e.peek()&&(t+=e.get());inRange(e.peek(),"0","9");)t+=e.get();return t}function parseList(e){for(var t,r=[],n="";;){do{t=e.get()}while(isWS(t));for(;t&&!isWS(t)&&-1==="[]{}".indexOf(t);)n+=t,t=e.get();if(n.length&&(r.push(n),n=""),!t)throw err("Expected ']'",ERRORS.BAD_BRACKET);if(!isWS(t)){if("]"===t)return r;if("["!==t){if("{"!==t){if("}"===t)throw err("Unexpected '}'",ERRORS.BAD_BRACE);throw err("Unexpected '{c}'",{c:t})}r.push(parseArray(e))}else r.push(parseList(e))}}}function parseArray(e){for(var t,r=[],n=1,i="";;){do{t=e.get()}while(isWS(t));for(;t&&!isWS(t)&&-1==="[]{}".indexOf(t);)i+=t,t=e.get();if(i.length&&(r.push(i),i=""),!t)throw err("Expected '}'",ERRORS.BAD_BRACE);if(!isWS(t)){if("}"===t){for(;isWS(e.peek());)e.get();if("@"===e.peek()){for(e.get();isWS(e.peek());)e.get();n=Number(parseInteger(e)||0)}return LogoArray.from(r,n)}if("["!==t){if("]"===t)throw err("Unexpected ']'",ERRORS.BAD_BRACKET);if("{"!==t)throw err("Unexpected '{c}'",{c:t});r.push(parseArray(e))}else r.push(parseList(e))}}}function reparse(e){return parse(stringify_nodecorate(e).replace(/([\\;])/g,"\\$1"))}function maybegetvar(e){var t=lvalue(e);return t?t.value:void 0}function getvar(e){var t=maybegetvar(e);if(void 0!==t)return t;throw err("Don't know about variable {name:U}",{name:e},ERRORS.BAD_VAR)}function lvalue(e){for(var t=self.scopes.length-1;t>=0;--t)if(self.scopes[t].has(e))return self.scopes[t].get(e)}function setvar(e,t){t=copy(t);var r=lvalue(e);r?r.value=t:(r={value:t},self.scopes[0].set(e,r))}function local(e){self.scopes[self.scopes.length-1].set(sexpr(e),{value:void 0})}function setlocal(e,t){t=copy(t),self.scopes[self.scopes.length-1].set(sexpr(e),{value:t})}function peek(e,t){if(e.length<1)return!1;var r=e[0];return t.some(function(e){return r===e})}function evaluateExpression(e){return expression(e)()}function expression(e){return relationalExpression(e)}function relationalExpression(e){for(var t,r=additiveExpression(e);peek(e,["=","<",">","<=",">=","<>"]);)t=e.shift(),r=function(r){var n=additiveExpression(e);switch(t){case"<":return defer(function(e,t){return aexpr(e)<aexpr(t)?1:0},r,n);case">":return defer(function(e,t){return aexpr(e)>aexpr(t)?1:0},r,n);case"=":return defer(function(e,t){return equal(e,t)?1:0},r,n);case"<=":return defer(function(e,t){return aexpr(e)<=aexpr(t)?1:0},r,n);case">=":return defer(function(e,t){return aexpr(e)>=aexpr(t)?1:0},r,n);case"<>":return defer(function(e,t){return equal(e,t)?0:1},r,n);default:throw new Error("Internal error in expression parser")}}(r);return r}function defer(e){var t=[].slice.call(arguments,1);return function(){return serialExecute(t.slice()).then(function(t){return e.apply(null,t)})}}function additiveExpression(e){for(var t,r=multiplicativeExpression(e);peek(e,["+","-"]);)t=e.shift(),r=function(r){var n=multiplicativeExpression(e);switch(t){case"+":return defer(function(e,t){return aexpr(e)+aexpr(t)},r,n);case"-":return defer(function(e,t){return aexpr(e)-aexpr(t)},r,n);default:throw new Error("Internal error in expression parser")}}(r);return r}function multiplicativeExpression(e){for(var t,r=powerExpression(e);peek(e,["*","/","%"]);)t=e.shift(),r=function(r){var n=powerExpression(e);switch(t){case"*":return defer(function(e,t){return aexpr(e)*aexpr(t)},r,n);case"/":return defer(function(e,t){var r=aexpr(e),n=aexpr(t);if(0===n)throw err("Division by zero",ERRORS.BAD_INPUT);return r/n},r,n);case"%":return defer(function(e,t){var r=aexpr(e),n=aexpr(t);if(0===n)throw err("Division by zero",ERRORS.BAD_INPUT);return r%n},r,n);default:throw new Error("Internal error in expression parser")}}(r);return r}function powerExpression(e){for(var t=unaryExpression(e);peek(e,["^"]);)e.shift(),t=function(t){return defer(function(e,t){return Math.pow(aexpr(e),aexpr(t))},t,unaryExpression(e))}(t);return t}function unaryExpression(e){return peek(e,[UNARY_MINUS])?(e.shift(),defer(function(e){return-aexpr(e)},unaryExpression(e))):finalExpression(e)}function finalExpression(e){if(!e.length)throw err("Unexpected end of instructions",ERRORS.MISSING_PAREN);var t,r,n,i=e.shift();switch(Type(i)){case"array":case"list":return function(){return i};case"word":if(isNumber(i))return i=parseFloat(i),function(){return i};if('"'===(i=String(i)).charAt(0)||"'"===i.charAt(0))return r=i.substring(1),function(){return r};if(":"===i.charAt(0))return n=i.substring(1),function(){return getvar(n)};if("("===i){if(e.length&&"word"===Type(e[0])&&self.routines.has(String(e[0]))&&!(e.length>1&&"word"===Type(e[1])&&isInfix(String(e[1]))))return i=e.shift(),self.dispatch(i,e,!1);if(t=expression(e),!e.length)throw err("Expected ')'",ERRORS.MISSING_PAREN);if(!peek(e,[")"]))throw err("Expected ')', saw {word}",{word:e.shift()},ERRORS.MISSING_PAREN);return e.shift(),t}if(")"===i)throw err("Unexpected ')'",ERRORS.BAD_PAREN);return self.dispatch(i,e,!0);default:throw new Error("Internal error in expression parser")}}function aexpr(e){if(void 0===e)throw err("Expected number",ERRORS.BAD_INPUT);switch(Type(e)){case"word":if(isNumber(e))return parseFloat(e)}throw err("Expected number",ERRORS.BAD_INPUT)}function sexpr(e){if(void 0===e)throw err("Expected string",ERRORS.BAD_INPUT);if(e===UNARY_MINUS)return"-";if("word"===Type(e))return String(e);throw new err("Expected string",ERRORS.BAD_INPUT)}function lexpr(e){if(void 0===e)throw err("{_PROC_}: Expected list",ERRORS.BAD_INPUT);switch(Type(e)){case"word":return Array.from(String(e));case"list":return copy(e)}throw err("{_PROC_}: Expected list",ERRORS.BAD_INPUT)}function sifw(e,t){return"word"===Type(e)?t.join(""):t}function copy(e){switch(Type(e)){case"list":return e.map(copy);default:return e}}function equal(e,t){if(Type(e)!==Type(t))return!1;switch(Type(e)){case"word":return"number"==typeof e||"number"==typeof t?Number(e)===Number(t):String(e)===String(t);case"list":if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!equal(e[r],t[r]))return!1;return!0;case"array":return e===t}}self.stack=[],self.dispatch=function(e,t,r){e=e.toUpperCase();var n=self.routines.get(e);if(!n){var i;if((i=/^(\w+?)(\d+)$/.exec(e))&&self.routines.get(i[1]))throw err("Need a space between {name:U} and {value}",{name:i[1],value:i[2]},ERRORS.MISSING_SPACE);throw err("Don't know how to {name:U}",{name:e},ERRORS.BAD_PROC)}if(n.special){self.stack.push(e);try{return n.call(self,t),function(){}}finally{self.stack.pop()}}var o=[];if(r)for(var a=0;a<n.default;++a)o.push(expression(t));else{for(;t.length&&!peek(t,[")"]);)o.push(expression(t));if(t.shift(),o.length<n.minimum)throw err("Not enough inputs for {name:U}",{name:e},ERRORS.NOT_ENOUGH_INPUTS);if(-1!==n.maximum&&o.length>n.maximum)throw err("Too many inputs for {name:U}",{name:e},ERRORS.TOO_MANY_INPUTS)}return n.noeval?function(){return self.stack.push(e),promiseFinally(n.apply(self,o),function(){self.stack.pop()})}:function(){return self.stack.push(e),promiseFinally(serialExecute(o.slice()).then(function(e){return n.apply(self,e)}),function(){self.stack.pop()})}},self.execute=function(e,t){var r;return t=Object(t),e=e.slice(),promiseLoop(function(n,i,o){if(self.forceBye)return self.forceBye=!1,void o(new Bye);e.length?Promise.resolve(evaluateExpression(e)).then(function(e){void 0===e||t.returnResult?(r=e,n()):o(err("Don't know what to do with {result}",{result:e},ERRORS.BAD_OUTPUT))},o):i(r)})},self.bye=function(){self.forceBye=!0};var lastRun=Promise.resolve();function stringify(e){switch(Type(e)){case"list":return"["+e.map(stringify).join(" ")+"]";case"array":return"{"+e.list.map(stringify).join(" ")+"}"+(1===e.origin?"":"@"+e.origin);default:return sexpr(e)}}function stringify_nodecorate(e){switch(Type(e)){case"list":return e.map(stringify).join(" ");case"array":return e.list.map(stringify).join(" ");default:return sexpr(e)}}function def(e,t,r){t.minimum=t.default=t.maximum=t.length,r&&Object.keys(r).forEach(function(e){t[e]=r[e]}),t.primitive=!0,Array.isArray(e)?e.forEach(function(e){self.routines.set(e,t)}):self.routines.set(e,t)}function defineProc(e,t,r,n,i,o){if(self.routines.has(e)&&self.routines.get(e).primitive)throw err("{_PROC_}: Can't redefine primitive {name:U}",{name:e},ERRORS.IS_PRIMITIVE);if(void 0!==i&&(i<t.length||!n&&i>t.length+r.length))throw err("{_PROC_}: Bad default number of inputs for {name:U}",{name:e},ERRORS.BAD_INPUT);var a=void 0===i?t.length:i,s=to_arity(function(){var e=new StringMap(!0);self.scopes.push(e);for(var i,a=0;a<t.length&&a<arguments.length;++a)e.set(t[a],{value:arguments[a]});for(;a<t.length+r.length&&a<arguments.length;++a)i=r[a-t.length],e.set(i[0],{value:arguments[a]});for(;a<t.length+r.length;++a)i=r[a-t.length],e.set(i[0],{value:evaluateExpression(reparse(i[1]))});return n&&e.set(n,{value:[].slice.call(arguments,a)}),promiseFinally(self.execute(o).then(promiseYield,function(e){if(e instanceof Output)return e.output;throw e}),function(){self.scopes.pop()})},a);self.routines.set(e,s),s.inputs=t,s.optional_inputs=r,s.rest=n,s.def=i,s.block=o,s.minimum=t.length,s.default=a,s.maximum=n?-1:t.length+r.length,savehook&&savehook(e,self.definition(e,s))}function item(e,t){switch(Type(t)){case"list":if(e<1||e>t.length)throw err("{_PROC_}: Index out of bounds",ERRORS.BAD_INPUT);return t[e-1];case"array":return t.item(e);default:if(t=sexpr(t),e<1||e>t.length)throw err("{_PROC_}: Index out of bounds",ERRORS.BAD_INPUT);return t.charAt(e-1)}}function contains(e,t){if(e===t)return!0;switch(Type(e)){case"list":return e.some(function(e){return contains(e,t)});case"array":return e.list.some(function(e){return contains(e,t)});default:return!1}}function deg2rad(e){return e/180*Math.PI}function rad2deg(e){return 180*e/Math.PI}function truncate(e){return parseInt(e,10)}function booleanReduce(e,t,r){return promiseLoop(function(n,i,o){e.length?Promise.resolve(e.shift()()).then(function(e){t(e)?(r=e,n()):i(e)}):i(r)})}self.queueTask=function(e){var t=lastRun.then(function(){return Promise.resolve(e())});return lastRun=t.catch(function(){}),t},self.run=function(e,t){return t=Object(t),self.queueTask(function(){var r=parse(e);return self.execute(r,t).catch(function(e){if(!(e instanceof Bye))throw e})})},self.definition=function(e,t){function r(e){switch(Type(e)){case"word":return String(e);case"list":return"[ "+e.map(r).join(" ")+" ]";case"array":return"{ "+e.list.map(r).join(" ")+" }"+(1===e.origin?"":"@"+e.origin);default:throw new Error("Internal error: unknown type")}}var n="to "+e;return n+=t.inputs.map(function(e){return" :"+e}).join(""),n+=t.optional_inputs.map(function(e){return" [:"+e[0]+" "+e[1].map(r).join(" ")+"]"}).join(""),t.rest&&(n+=" [:"+t.rest+"]"),void 0!==t.def&&(n+=" "+t.def),n+="\n",n+="  "+t.block.map(r).join(" ").replace(new RegExp(UNARY_MINUS+" ","g"),"-"),n+="\nend"},self.procdefs=function(){var e=[];return self.routines.forEach(function(t,r){r.primitive||e.push(self.definition(t,r))}),e.join("\n\n")},self.copydef=function(e,t){self.routines.set(e,self.routines.get(t))},def("to",function(e){var t=sexpr(e.shift());if(isNumber(t)||isOperator(t))throw err("TO: Expected identifier",ERRORS.BAD_INPUT);for(var r=[],n=[],i=void 0,o=void 0,a=[],s=0,u=!1;e.length;){var l=e.shift();if(isKeyword(l,"END")){u=!0;break}if(0===s){if("word"===Type(l)&&":"===String(l).charAt(0)){r.push(l.substring(1));continue}s=1}if(1===s){if("list"===Type(l)&&l.length>1&&":"===String(l[0]).charAt(0)){n.push([l.shift().substring(1),l]);continue}s=2}2!==s||(s=3,"list"!==Type(l)||1!==l.length||":"!==String(l[0]).charAt(0))?3===s&&(s=4,"word"===Type(l)&&isNumber(l))?o=parseFloat(l):a.push(l):i=l[0].substring(1)}if(!u)throw err("TO: Expected END",ERRORS.BAD_INPUT);defineProc(t,r,n,i,o,a)},{special:!0}),def("def",function(e){var t=sexpr(e),r=this.routines.get(t);if(!r)throw err("{_PROC_}: Don't know how to {name:U}",{name:t},ERRORS.BAD_PROC);if(!r.inputs)throw err("{_PROC_}: Can't show definition of primitive {name:U}",{name:t},ERRORS.IS_PRIMITIVE);return this.definition(t,r)}),def("word",function(e,t){return arguments.length?Array.from(arguments).map(sexpr).reduce(function(e,t){return e+t}):""},{minimum:0,maximum:-1}),def("list",function(e,t){return Array.from(arguments).map(function(e){return e})},{minimum:0,maximum:-1}),def(["sentence","se"],function(e,t){for(var r=[],n=0;n<arguments.length;++n){var i=arguments[n];"list"===Type(i)?(i=lexpr(i),r=r.concat(i)):r.push(i)}return r},{minimum:0,maximum:-1}),def("fput",function(e,t){var r=lexpr(t);return r.unshift(e),sifw(t,r)}),def("lput",function(e,t){var r=lexpr(t);return r.push(e),sifw(t,r)}),def("array",function(e){if((e=aexpr(e))<1)throw err("{_PROC_}: Array size must be positive integer",ERRORS.BAD_INPUT);var t=arguments.length<2?1:aexpr(arguments[1]);return new LogoArray(e,t)},{maximum:2}),def("mdarray",function(e){if((e=lexpr(e).map(aexpr).map(function(e){return 0|e})).some(function(e){return e<1}))throw err("{_PROC_}: Array size must be positive integer",ERRORS.BAD_INPUT);var t=arguments.length<2?1:aexpr(arguments[1]);function r(n){var i=e[n],o=new LogoArray(i,t);if(n+1<e.length)for(var a=0;a<i;++a)o.setItem(a+t,r(n+1));return o}return r(0)},{maximum:2}),def("listtoarray",function(e){e=lexpr(e);var t=1;return arguments.length>1&&(t=aexpr(arguments[1])),LogoArray.from(e,t)},{maximum:2}),def("arraytolist",function(e){if("array"!==Type(e))throw err("{_PROC_}: Expected array",ERRORS.BAD_INPUT);return e.list.slice()}),def("combine",function(e,t){return"list"!==Type(t)?this.routines.get("word")(e,t):this.routines.get("fput")(e,t)}),def("reverse",function(e){var t=arguments.length>1?arguments[1]:"list"===Type(e)?[]:"";return sifw(t,lexpr(e).reverse().concat(lexpr(t)))},{maximum:2}),this.gensym_index=0,def("gensym",function(){return++this.gensym_index,"G"+this.gensym_index}),def("first",function(e){return lexpr(e)[0]}),def("firsts",function(e){return lexpr(e).map(function(e){return e[0]})}),def("last",function(e){return(e=lexpr(e))[e.length-1]}),def(["butfirst","bf"],function(e){return sifw(e,lexpr(e).slice(1))}),def(["butfirsts","bfs"],function(e){return lexpr(e).map(function(e){return sifw(e,lexpr(e).slice(1))})}),def(["butlast","bl"],function(e){return"word"===Type(e)?String(e).slice(0,-1):lexpr(e).slice(0,-1)}),def("item",function(e,t){return item(e=0|aexpr(e),t)}),def("mditem",function(e,t){for(e=lexpr(e).map(aexpr).map(function(e){return 0|e});e.length;)t=item(e.shift(),t);return t}),def("pick",function(e){return(e=lexpr(e))[Math.floor(this.prng.next()*e.length)]}),def("remove",function(e,t){return sifw(t,lexpr(t).filter(function(t){return!equal(t,e)}))}),def("remdup",function(e){var t=new Set;return sifw(e,lexpr(e).filter(function(e){return!t.has(e)&&(t.add(e),!0)}))}),def("split",function(e,t){lexpr(t);return lexpr(t).reduce(function(t,r){return equal(r,e)?t.push([]):t[t.length-1].push(r),t},[[]]).filter(function(e){return e.length>0}).map(function(e){return sifw(t,e)})}),def("quoted",function(e){return"word"===Type(e)?'"'+e:e}),def("setitem",function(e,t,r){if(e=aexpr(e),"array"!==Type(t))throw err("{_PROC_}: Expected array",ERRORS.BAD_INPUT);if(contains(r,t))throw err("{_PROC_}: Can't create circular array",ERRORS.BAD_INPUT);t.setItem(e,r)}),def("mdsetitem",function(e,t,r){if(e=lexpr(e).map(aexpr).map(function(e){return 0|e}),"array"!==Type(t))throw err("{_PROC_}: Expected array",ERRORS.BAD_INPUT);if(contains(r,t))throw err("{_PROC_}: Can't create circular array",ERRORS.BAD_INPUT);for(;e.length>1;)if("array"!==Type(t=item(e.shift(),t)))throw err("{_PROC_}: Expected array",ERRORS.BAD_INPUT);t.setItem(e.shift(),r)}),def(".setfirst",function(e,t){if("list"!==Type(e))throw err("{_PROC_}: Expected list",ERRORS.BAD_INPUT);e[0]=t}),def(".setbf",function(e,t){if("list"!==Type(e))throw err("{_PROC_}: Expected non-empty list",ERRORS.BAD_INPUT);if(e.length<1)throw err("{_PROC_}: Expected non-empty list",ERRORS.BAD_INPUT);t=lexpr(t),e.length=1,e.push.apply(e,t)}),def(".setitem",function(e,t,r){if(e=aexpr(e),"array"!==Type(t))throw err("{_PROC_}: Expected array",ERRORS.BAD_INPUT);t.setItem(e,r)}),def("push",function(e,t){var r=getvar(e),n=lexpr(r);n.unshift(t),setvar(e,sifw(r,n))}),def("pop",function(e){var t=getvar(e),r=lexpr(t),n=r.shift();return setvar(e,sifw(t,r)),n}),def("queue",function(e,t){var r=getvar(e),n=lexpr(r);n.push(t),setvar(e,sifw(r,n))}),def("dequeue",function(e){var t=getvar(e),r=lexpr(t),n=r.pop();return setvar(e,sifw(t,r)),n}),def(["wordp","word?"],function(e){return"word"===Type(e)?1:0}),def(["listp","list?"],function(e){return"list"===Type(e)?1:0}),def(["arrayp","array?"],function(e){return"array"===Type(e)?1:0}),def(["numberp","number?"],function(e){return"word"===Type(e)&&isNumber(e)?1:0}),def(["numberwang"],function(e){return this.prng.next()<.5?1:0}),def(["equalp","equal?"],function(e,t){return equal(e,t)?1:0}),def(["notequalp","notequal?"],function(e,t){return equal(e,t)?0:1}),def(["emptyp","empty?"],function(e){switch(Type(e)){case"word":return 0===String(e).length?1:0;case"list":return 0===e.length?1:0;default:return 0}}),def(["beforep","before?"],function(e,t){return sexpr(e)<sexpr(t)?1:0}),def(".eq",function(e,t){return e===t&&e&&"object"==typeof e}),def(["memberp","member?"],function(e,t){return lexpr(t).some(function(t){return equal(t,e)})?1:0}),def(["substringp","substring?"],function(e,t){return-1!==sexpr(t).indexOf(sexpr(e))?1:0}),def("count",function(e){return"array"===Type(e)?e.length:lexpr(e).length}),def("ascii",function(e){return sexpr(e).charCodeAt(0)}),def("char",function(e){return String.fromCharCode(aexpr(e))}),def("member",function(e,t){var r=lexpr(t),n=r.findIndex(function(t){return equal(t,e)});return sifw(t,r=-1===n?[]:r.slice(n))}),def("lowercase",function(e){return sexpr(e).toLowerCase()}),def("uppercase",function(e){return sexpr(e).toUpperCase()}),def("standout",function(e){return sexpr(e).split("").map(function(e){var t=e.charCodeAt(0);if("A"<=e&&e<="Z")t=t-65+119808;else if("a"<=e&&e<="z")t=t-97+119834;else{if(!("0"<=e&&e<="9"))return e;t=t-48+120782}var r=55296+(t-65536>>10),n=56320+(t-65536&1023);return String.fromCharCode(r,n)}).join("")}),def("parse",function(e){return parse("["+sexpr(e)+"]")[0]}),def("runparse",function(e){return parse(sexpr(e))}),def(["print","pr"],function(e){var t=Array.from(arguments).map(stringify_nodecorate).join(" ");this.stream.write(t,"\n")},{minimum:0,maximum:-1}),def("type",function(e){var t=Array.from(arguments).map(stringify_nodecorate).join("");this.stream.write(t)},{minimum:0,maximum:-1}),def("show",function(e){var t=Array.from(arguments).map(stringify).join(" ");this.stream.write(t,"\n")},{minimum:0,maximum:-1}),def("readlist",function(){return(arguments.length>0?stream.read(stringify_nodecorate(arguments[0])):stream.read()).then(function(e){return parse("["+e+"]")[0]})},{maximum:1}),def("readword",function(){return arguments.length>0?stream.read(stringify_nodecorate(arguments[0])):stream.read()},{maximum:1}),def(["cleartext","ct"],function(){this.stream.clear()}),def("settextcolor",function(e){this.stream.color=parseColor(e)}),def("textcolor",function(){return this.stream.color}),def("increasefont",function(){this.stream.textsize=Math.round(1.25*this.stream.textsize)}),def("decreasefont",function(){this.stream.textsize=Math.round(this.stream.textsize/1.25)}),def("settextsize",function(e){this.stream.textsize=aexpr(e)}),def("textsize",function(){return this.stream.textsize}),def("setfont",function(e){this.stream.font=sexpr(e)}),def("font",function(){return this.stream.font}),def("sum",function(e,t){return Array.from(arguments).map(aexpr).reduce(function(e,t){return e+t},0)},{minimum:0,maximum:-1}),def("difference",function(e,t){return aexpr(e)-aexpr(t)}),def("minus",function(e){return-aexpr(e)}),def("product",function(e,t){return Array.from(arguments).map(aexpr).reduce(function(e,t){return e*t},1)},{minimum:0,maximum:-1}),def("quotient",function(e,t){return void 0!==t?aexpr(e)/aexpr(t):1/aexpr(e)},{minimum:1}),def("remainder",function(e,t){return aexpr(e)%aexpr(t)}),def("modulo",function(e,t){return e=aexpr(e),t=aexpr(t),Math.abs(e%t)*(t<0?-1:1)}),def("power",function(e,t){return Math.pow(aexpr(e),aexpr(t))}),def("sqrt",function(e){return Math.sqrt(aexpr(e))}),def("exp",function(e){return Math.exp(aexpr(e))}),def("log10",function(e){return Math.log(aexpr(e))/Math.LN10}),def("ln",function(e){return Math.log(aexpr(e))}),def("arctan",function(e){if(arguments.length>1){var t=aexpr(arguments[0]),r=aexpr(arguments[1]);return rad2deg(Math.atan2(r,t))}return rad2deg(Math.atan(aexpr(e)))},{maximum:2}),def("sin",function(e){return Math.sin(deg2rad(aexpr(e)))}),def("cos",function(e){return Math.cos(deg2rad(aexpr(e)))}),def("tan",function(e){return Math.tan(deg2rad(aexpr(e)))}),def("radarctan",function(e){if(arguments.length>1){var t=aexpr(arguments[0]),r=aexpr(arguments[1]);return Math.atan2(r,t)}return Math.atan(aexpr(e))},{maximum:2}),def("radsin",function(e){return Math.sin(aexpr(e))}),def("radcos",function(e){return Math.cos(aexpr(e))}),def("radtan",function(e){return Math.tan(aexpr(e))}),def("abs",function(e){return Math.abs(aexpr(e))}),def("int",function(e){return truncate(aexpr(e))}),def("round",function(e){return Math.round(aexpr(e))}),def("iseq",function(e,t){for(var r=(e=truncate(aexpr(e)))<(t=truncate(aexpr(t)))?1:-1,n=[],i=e;r>0?i<=t:i>=t;i+=r)n.push(i);return n}),def("rseq",function(e,t,r){e=aexpr(e);for(var n=((t=aexpr(t))-e)/((r=truncate(aexpr(r)))-1),i=[],o=e;n>0?o<=t:o>=t;o+=n)i.push(o);return i}),def(["greaterp","greater?"],function(e,t){return aexpr(e)>aexpr(t)?1:0}),def(["greaterequalp","greaterequal?"],function(e,t){return aexpr(e)>=aexpr(t)?1:0}),def(["lessp","less?"],function(e,t){return aexpr(e)<aexpr(t)?1:0}),def(["lessequalp","lessequal?"],function(e,t){return aexpr(e)<=aexpr(t)?1:0}),def("random",function(e){if(arguments.length<2)return e=aexpr(e),Math.floor(this.prng.next()*e);var t=aexpr(arguments[0]),r=aexpr(arguments[1]);return Math.floor(this.prng.next()*(r-t+1))+t},{maximum:2}),def("rerandom",function(){var e=arguments.length>0?aexpr(arguments[0]):2345678901;return this.prng.seed(e)},{maximum:1}),def("form",function(e,t,r){e=aexpr(e),t=aexpr(t),r=aexpr(r);var n=e.toFixed(r);return n.length<t&&(n=Array(1+t-n.length).join(" ")+n),n}),def("bitand",function(e,t){return Array.from(arguments).map(aexpr).reduce(function(e,t){return e&t},-1)},{minimum:0,maximum:-1}),def("bitor",function(e,t){return Array.from(arguments).map(aexpr).reduce(function(e,t){return e|t},0)},{minimum:0,maximum:-1}),def("bitxor",function(e,t){return Array.from(arguments).map(aexpr).reduce(function(e,t){return e^t},0)},{minimum:0,maximum:-1}),def("bitnot",function(e){return~aexpr(e)}),def("ashift",function(e,t){return e=truncate(aexpr(e)),(t=truncate(aexpr(t)))>=0?e<<t:e>>-t}),def("lshift",function(e,t){return e=truncate(aexpr(e)),(t=truncate(aexpr(t)))>=0?e<<t:e>>>-t}),def("true",function(){return 1}),def("false",function(){return 0}),def("and",function(e,t){var r=Array.from(arguments);return booleanReduce(r,function(e){return e},1)},{noeval:!0,minimum:0,maximum:-1}),def("or",function(e,t){var r=Array.from(arguments);return booleanReduce(r,function(e){return!e},0)},{noeval:!0,minimum:0,maximum:-1}),def("xor",function(e,t){return Array.from(arguments).map(aexpr).reduce(function(e,t){return Boolean(e)!==Boolean(t)},0)?1:0},{minimum:0,maximum:-1}),def("not",function(e){return aexpr(e)?0:1}),def(["forward","fd"],function(e){return turtle.move(aexpr(e))}),def(["back","bk"],function(e){return turtle.move(-aexpr(e))}),def(["left","lt"],function(e){return turtle.turn(-aexpr(e))}),def(["right","rt"],function(e){return turtle.turn(aexpr(e))}),def(["←"],function(){return turtle.turn(-15)}),def(["→"],function(){return turtle.turn(15)}),def(["↑"],function(){return turtle.move(10)}),def(["↓"],function(){return turtle.move(-10)}),def("setpos",function(e){if(2!==(e=lexpr(e)).length)throw err("{_PROC_}: Expected list of length 2",ERRORS.BAD_INPUT);turtle.position=[aexpr(e[0]),aexpr(e[1])]}),def("setxy",function(e,t){turtle.position=[aexpr(e),aexpr(t)]}),def("setx",function(e){turtle.position=[aexpr(e),void 0]}),def("sety",function(e){turtle.position=[void 0,aexpr(e)]}),def(["setheading","seth"],function(e){turtle.heading=aexpr(e)}),def("home",function(){return turtle.home()}),def("arc",function(e,t){return turtle.arc(aexpr(e),aexpr(t))}),def("pos",function(){return turtle.position}),def("xcor",function(){return turtle.position[0]}),def("ycor",function(){return turtle.position[1]}),def("heading",function(){return turtle.heading}),def("towards",function(e){if(2!==(e=lexpr(e)).length)throw err("{_PROC_}: Expected list of length 2",ERRORS.BAD_INPUT);return turtle.towards(aexpr(e[0]),aexpr(e[1]))}),def("scrunch",function(){return turtle.scrunch}),def(["showturtle","st"],function(){turtle.visible=!0}),def(["hideturtle","ht"],function(){turtle.visible=!1}),def("clean",function(){turtle.clear()}),def(["clearscreen","cs"],function(){turtle.clearscreen()}),def("wrap",function(){turtle.turtlemode="wrap"}),def("window",function(){turtle.turtlemode="window"}),def("fence",function(){turtle.turtlemode="fence"}),def("fill",function(){turtle.fill()}),def("filled",function(e,t){return e=sexpr(parseColor(e)),t=reparse(lexpr(t)),turtle.beginpath(),promiseFinally(this.execute(t),function(){turtle.fillpath(e)})}),def("label",function(e){var t=Array.from(arguments).map(stringify_nodecorate).join(" ");return turtle.drawtext(t)},{maximum:-1}),def("setlabelheight",function(e){turtle.fontsize=aexpr(e)}),def("setlabelfont",function(e){turtle.fontname=sexpr(e)}),def("setscrunch",function(e,t){if(e=aexpr(e),t=aexpr(t),!isFinite(e)||0===e||!isFinite(t)||0===t)throw err("{_PROC_}: Expected non-zero values",ERRORS.BAD_INPUT);turtle.scrunch=[e,t]}),def(["shownp","shown?"],function(){return turtle.visible?1:0}),def("turtlemode",function(){return turtle.turtlemode.toUpperCase()}),def("labelsize",function(){return[turtle.fontsize,turtle.fontsize]}),def("labelfont",function(){return turtle.fontname}),def(["pendown","pd"],function(){turtle.pendown=!0}),def(["penup","pu"],function(){turtle.pendown=!1}),def(["penpaint","ppt"],function(){turtle.penmode="paint"}),def(["penerase","pe"],function(){turtle.penmode="erase"}),def(["penreverse","px"],function(){turtle.penmode="reverse"}),this.colorAlias=null;var PALETTE={0:"black",1:"blue",2:"lime",3:"cyan",4:"red",5:"magenta",6:"yellow",7:"white",8:"brown",9:"tan",10:"green",11:"aquamarine",12:"salmon",13:"purple",14:"orange",15:"gray"};function parseColor(e){function t(e){return e=Math.min(99,Math.max(0,Math.floor(e))),Math.floor(255*e/99)}if("list"===Type(e)){var r=t(aexpr(e[0])),n=t(aexpr(e[1])),i=t(aexpr(e[2]));return"#"+((r<16?"0":"")+r.toString(16))+((n<16?"0":"")+n.toString(16))+((i<16?"0":"")+i.toString(16))}return e=sexpr(e),PALETTE.hasOwnProperty(e)?PALETTE[e]:self.colorAlias&&self.colorAlias(e)||e}function checkevalblock(e){if("list"===Type(e=e()))return e;throw err("{_PROC_}: Expected block",ERRORS.BAD_INPUT)}def(["setpencolor","setpc","setcolor"],function(e){turtle.color=parseColor(e)}),def("setpalette",function(e,t){if((e=aexpr(e))<8)throw err("{_PROC_}: Expected number greater than 8",ERRORS.BAD_INPUT);PALETTE[e]=parseColor(t)}),def(["setpensize","setwidth","setpw"],function(e){"list"===Type(e)?turtle.penwidth=aexpr(e[0]):turtle.penwidth=aexpr(e)}),def(["setbackground","setbg","setscreencolor","setsc"],function(e){turtle.bgcolor=parseColor(e)}),def(["pendownp","pendown?"],function(){return turtle.pendown?1:0}),def("penmode",function(){return turtle.penmode.toUpperCase()}),def(["pencolor","pc"],function(){return turtle.color}),def("palette",function(e){return PALETTE[aexpr(e)]}),def("pensize",function(){return[turtle.penwidth,turtle.penwidth]}),def(["background","bg","getscreencolor","getsc"],function(){return turtle.bgcolor}),def("mousepos",function(){return turtle.mousepos}),def("clickpos",function(){return turtle.clickpos}),def(["buttonp","button?"],function(){return turtle.button>0?1:0}),def("button",function(){return turtle.button}),def("define",function(e,t){if(e=sexpr(e),2!=(t=lexpr(t)).length)throw err("{_PROC_}: Expected list of length 2",ERRORS.BAD_INPUT);for(var r=[],n=[],i=void 0,o=void 0,a=reparse(lexpr(t[1])),s=lexpr(t[0]),u=0;s.length;){var l=s.shift();if(0===u){if("word"===Type(l)){r.push(l);continue}u=1}if(1===u){if("list"===Type(l)&&l.length>1&&"word"===Type(l[0])){n.push([l.shift(),l]);continue}u=2}if(2!==u||(u=3,"list"!==Type(l)||1!==l.length||"word"!==Type(l[0]))){if(3!==u||(u=4,"word"!==Type(l)||!isNumber(l)))throw err("{_PROC_}: Unexpected inputs",ERRORS.BAD_INPUT);o=parseFloat(l)}else i=l[0]}defineProc(e,r,n,i,o,a)}),def("text",function(e){var t=this.routines.get(sexpr(e));if(!t)throw err("{_PROC_}: Don't know how to {name:U}",{name:e},ERRORS.BAD_PROC);if(!t.inputs)throw err("{_PROC_}: Can't show definition of primitive {name:U}",{name:e},ERRORS.IS_PRIMITIVE);var r=t.inputs.concat(t.optional_inputs);return t.rest&&r.push([t.rest]),void 0!==t.def&&r.push(t.def),[r,t.block]}),def("copydef",function(e,t){if(e=sexpr(e),t=sexpr(t),!this.routines.has(t))throw err("{_PROC_}: Don't know how to {name:U}",{name:t},ERRORS.BAD_PROC);if(this.routines.has(e)){if(this.routines.get(e).special)throw err("{_PROC_}: Can't overwrite special {name:U}",{name:e},ERRORS.BAD_INPUT);if(this.routines.get(e).primitive&&!maybegetvar("redefp"))throw err("{_PROC_}: Can't overwrite primitives unless REDEFP is TRUE",ERRORS.BAD_INPUT)}this.routines.set(e,this.routines.get(t))}),def("make",function(e,t){setvar(sexpr(e),t)}),def("name",function(e,t){setvar(sexpr(t),e)}),def("local",function(e){Array.from(arguments).forEach(function(e){local(sexpr(e))})},{maximum:-1}),def("localmake",function(e,t){setlocal(sexpr(e),t)}),def("thing",function(e){return getvar(sexpr(e))}),def("global",function(e){var t=this.scopes[0];Array.from(arguments).forEach(function(e){t.set(sexpr(e),{value:void 0})})},{maximum:-1}),def("pprop",function(e,t,r){e=sexpr(e),t=sexpr(t);var n=this.plists.get(e);n||(n=new StringMap(!0),this.plists.set(e,n)),n.set(t,r)}),def("gprop",function(e,t){e=sexpr(e),t=sexpr(t);var r=this.plists.get(e);return r&&r.has(t)?r.get(t):[]}),def("remprop",function(e,t){e=sexpr(e),t=sexpr(t);var r=this.plists.get(e);r&&(r.delete(t),r.empty()&&this.plists.delete(e))}),def("plist",function(e){e=sexpr(e);var t=this.plists.get(e);if(!t)return[];var r=[];return t.forEach(function(e,t){r.push(e),r.push(copy(t))}),r}),def(["procedurep","procedure?"],function(e){return e=sexpr(e),this.routines.has(e)?1:0}),def(["primitivep","primitive?"],function(e){return e=sexpr(e),this.routines.has(e)&&this.routines.get(e).primitive?1:0}),def(["definedp","defined?"],function(e){return e=sexpr(e),this.routines.has(e)&&!this.routines.get(e).primitive?1:0}),def(["namep","name?"],function(e){try{return void 0!==getvar(sexpr(e))?1:0}catch(e){return 0}}),def(["plistp","plist?"],function(e){return e=sexpr(e),this.plists.has(e)?1:0}),def("contents",function(){return[this.routines.keys().filter(function(e){return!this.routines.get(e).primitive&&!this.routines.get(e).buried}.bind(this)),this.scopes.reduce(function(e,t){return e.concat(t.keys().filter(function(e){return!t.get(e).buried}))},[]),this.plists.keys().filter(function(e){return!this.plists.get(e).buried}.bind(this))]}),def("buried",function(){return[this.routines.keys().filter(function(e){return!this.routines.get(e).primitive&&this.routines.get(e).buried}.bind(this)),this.scopes.reduce(function(e,t){return e.concat(t.keys().filter(function(e){return t.get(e).buried}))},[]),this.plists.keys().filter(function(e){return this.plists.get(e).buried}.bind(this))]}),def("traced",function(){return[this.routines.keys().filter(function(e){return!this.routines.get(e).primitive&&this.routines.get(e).traced}.bind(this)),this.scopes.reduce(function(e,t){return e.concat(t.keys().filter(function(e){return t.get(e).traced}))},[]),this.plists.keys().filter(function(e){return this.plists.get(e).traced}.bind(this))]}),def(["stepped"],function(){return[this.routines.keys().filter(function(e){return!this.routines.get(e).primitive&&this.routines.get(e).stepped}.bind(this)),this.scopes.reduce(function(e,t){return e.concat(t.keys().filter(function(e){return t.get(e).stepped}))},[]),this.plists.keys().filter(function(e){return this.plists.get(e).stepped}.bind(this))]}),def("procedures",function(){return this.routines.keys().filter(function(e){return!this.routines.get(e).primitive&&!this.routines.get(e).buried}.bind(this))}),def("primitives",function(){return this.routines.keys().filter(function(e){return this.routines.get(e).primitive&!this.routines.get(e).buried}.bind(this))}),def("globals",function(){var e=this.scopes[0];return e.keys().filter(function(t){return!e.get(t).buried})}),def("names",function(){return[[],this.scopes.reduce(function(e,t){return e.concat(t.keys().filter(function(e){return!t.get(e).buried}))},[])]}),def("plists",function(){return[[],[],this.plists.keys().filter(function(e){return!this.plists.get(e).buried}.bind(this))]}),def("namelist",function(e){return[[],e="list"===Type(e)?lexpr(e):[sexpr(e)]]}),def("pllist",function(e){return[[],[],e="list"===Type(e)?lexpr(e):[sexpr(e)]]}),def("arity",function(e){e=sexpr(e);var t=this.routines.get(e);if(!t)throw err("{_PROC_}: Don't know how to {name:U}",{name:e},ERRORS.BAD_PROC);return t.special?[-1,-1,-1]:[t.minimum,t.default,t.maximum]}),def("erase",function(e){(e=lexpr(e)).length&&lexpr(e.shift()).forEach(function(e){if(e=sexpr(e),this.routines.has(e)){if(this.routines.get(e).special)throw err("Can't {_PROC_} special {name:U}",{name:e},ERRORS.BAD_INPUT);if(this.routines.get(e).primitive&&!maybegetvar("redefp"))throw err("Can't {_PROC_} primitives unless REDEFP is TRUE",ERRORS.BAD_INPUT);this.routines.delete(e),savehook&&savehook(e)}}.bind(this));if(e.length){var t=lexpr(e.shift());this.scopes.forEach(function(e){t.forEach(function(t){t=sexpr(t),e.delete(t)})})}e.length&&lexpr(e.shift()).forEach(function(e){e=sexpr(e),this.plists.delete(e)}.bind(this))}),def("erall",function(){this.routines.keys().filter(function(e){return!this.routines.get(e).primitive&&!this.routines.get(e).buried}.bind(this)).forEach(function(e){this.routines.delete(e),savehook&&savehook(e)}.bind(this)),this.scopes.forEach(function(e){e.keys().filter(function(t){return!e.get(t).buried}).forEach(function(t){e.delete(t)})}),this.plists.keys().filter(function(e){return!this.plists.get(e).buried}.bind(this)).forEach(function(e){this.plists.delete(e)}.bind(this))}),def("erps",function(){this.routines.keys().filter(function(e){return!this.routines.get(e).primitive&&!this.routines.get(e).buried}.bind(this)).forEach(function(e){this.routines.delete(e),savehook&&savehook(e)}.bind(this))}),def("erns",function(){this.scopes.forEach(function(e){e.keys().filter(function(t){return!e.get(t).buried}).forEach(function(t){e.delete(t)})})}),def("erpls",function(){this.plists.keys().filter(function(e){return!this.plists.get(e).buried}.bind(this)).forEach(function(e){this.plists.delete(e)}.bind(this))}),def("ern",function(e){var t;t="list"===Type(e)?lexpr(e):[sexpr(e)],this.scopes.forEach(function(e){t.forEach(function(t){t=sexpr(t),e.delete(t)})})}),def("erpl",function(e){("list"===Type(e)?lexpr(e):[sexpr(e)]).forEach(function(e){e=sexpr(e),this.plists.delete(e)}.bind(this))}),def("bury",function(e){(e=lexpr(e)).length&&lexpr(e.shift()).forEach(function(e){e=sexpr(e),this.routines.has(e)&&(this.routines.get(e).buried=!0)}.bind(this));if(e.length){var t=lexpr(e.shift());this.scopes.forEach(function(e){t.forEach(function(t){t=sexpr(t),e.has(t)&&(e.get(t).buried=!0)})})}e.length&&lexpr(e.shift()).forEach(function(e){e=sexpr(e),this.plists.has(e)&&(this.plists.get(e).buried=!0)}.bind(this))}),def("buryall",function(){this.routines.forEach(function(e,t){t.buried=!0}),this.scopes.forEach(function(e){e.forEach(function(e,t){t.buried=!0})}),this.plists.forEach(function(e,t){t.buried=!0})}),def("buryname",function(e){var t=this.routines.get("bury"),r=this.routines.get("namelist");return t.call(this,r.call(this,e))}),def("unbury",function(e){(e=lexpr(e)).length&&lexpr(e.shift()).forEach(function(e){e=sexpr(e),this.routines.has(e)&&(this.routines.get(e).buried=!1)}.bind(this));if(e.length){var t=lexpr(e.shift());this.scopes.forEach(function(e){t.forEach(function(t){t=sexpr(t),e.has(t)&&(e.get(t).buried=!1)})})}e.length&&lexpr(e.shift()).forEach(function(e){e=sexpr(e),this.plists.has(e)&&(this.plists.get(e).buried=!1)}.bind(this))}),def("unburyall",function(){this.routines.forEach(function(e,t){t.buried=!1}),this.scopes.forEach(function(e){e.forEach(function(e,t){t.buried=!1})}),this.plists.forEach(function(e,t){t.buried=!1})}),def("unburyname",function(e){var t=this.routines.get("unbury"),r=this.routines.get("namelist");return t.call(this,r.call(this,e))}),def(["buriedp","buried?"],function(e){var t;if((e=lexpr(e)).length){var r=lexpr(e.shift());if(r.length)return t=sexpr(r[0]),this.routines.has(t)&&this.routines.get(t).buried?1:0}if(e.length){var n=lexpr(e.shift());if(n.length)return t=sexpr(n[0]),this.scopes[0].has(t)&&this.scopes[0].get(t).buried?1:0}if(e.length){var i=lexpr(e.shift());if(i.length)return t=sexpr(i[0]),this.plists.has(t)&&this.plists.get(t).buried?1:0}return 0}),def("run",function(e){return e=reparse(lexpr(e)),this.execute(e,{returnResult:!0})}),def("runresult",function(e){return e=reparse(lexpr(e)),this.execute(e,{returnResult:!0}).then(function(e){return void 0!==e?[e]:[]})}),def("repeat",function(e,t){e=aexpr(e),t=reparse(lexpr(t));var r=this.repcount,n=1;return promiseFinally(promiseLoop(function(r,i,o){n>e?i():(this.repcount=n++,this.execute(t).then(promiseYield).then(r,o))}.bind(this)),function(){this.repcount=r}.bind(this))}),def("forever",function(e){e=reparse(lexpr(e));var t=this.repcount,r=1;return promiseFinally(promiseLoop(function(t,n,i){this.repcount=r++,this.execute(e).then(promiseYield).then(t,i)}.bind(this)),function(){this.repcount=t}.bind(this))}),def(["repcount","#"],function(){return this.repcount}),def("if",function(e,t){"list"===Type(e)&&(e=evaluateExpression(reparse(e)));var r=arguments[2];return Promise.resolve(e).then(function(e){return e=aexpr(e),t=reparse(lexpr(t)),r?(r=reparse(lexpr(r)),this.execute(e?t:r,{returnResult:!0})):e?this.execute(t,{returnResult:!0}):void 0}.bind(this))},{maximum:3}),def("ifelse",function(e,t,r){return"list"===Type(e)&&(e=evaluateExpression(reparse(e))),Promise.resolve(e).then(function(e){return e=aexpr(e),t=reparse(lexpr(t)),r=reparse(lexpr(r)),this.execute(e?t:r,{returnResult:!0})}.bind(this))}),def("test",function(e){return"list"===Type(e)&&(e=evaluateExpression(reparse(e))),Promise.resolve(e).then(function(e){e=aexpr(e),this.scopes[this.scopes.length-1]._test=e}.bind(this))}),def(["iftrue","ift"],function(e){e=reparse(lexpr(e));var t=this.scopes[this.scopes.length-1]._test;if(void 0===t)throw err("{_PROC_}: Called without TEST",ERRORS.NO_TEST);return t?this.execute(e,{returnResult:!0}):void 0}),def(["iffalse","iff"],function(e){e=reparse(lexpr(e));var t=this.scopes[this.scopes.length-1]._test;if(void 0===t)throw err("{_PROC_}: Called without TEST",ERRORS.NO_TEST);return t?void 0:this.execute(e,{returnResult:!0})}),def("stop",function(){throw new Output}),def(["output","op"],function(e){throw new Output(e)}),this.last_error=void 0,def("catch",function(e,t){return e=sexpr(e).toUpperCase(),t=reparse(lexpr(t)),this.execute(t,{returnResult:!0}).catch(function(t){if(!(t instanceof LogoError)||t.tag!==e)throw t;return this.last_error=t,t.value}.bind(this))},{maximum:2}),def("throw",function(e){e=sexpr(e).toUpperCase();var t=arguments[1],r=new LogoError(e,t);throw r.code=arguments.length>1?ERRORS.USER_GENERATED:ERRORS.THROW_ERROR,r},{maximum:2}),def("error",function(){if(!this.last_error)return[];var e=[this.last_error.code,this.last_error.message,this.last_error.proc,this.last_error.line];return this.last_error=void 0,e}),def("wait",function(e){return promiseYieldTime(aexpr(e)/60*1e3)}),def("bye",function(){throw new Bye}),def(".maybeoutput",function(e){throw new Output(e)}),def("ignore",function(e){}),def("`",function(e){e=lexpr(e);var t=[];return promiseLoop(function(r,n,i){if(e.length){var o,a=e.shift();","===a&&e.length?("word"===Type(a=e.shift())&&(a=[a]),o=reparse(a),this.execute(o,{returnResult:!0}).then(function(e){t.push(e),r()}).catch(i)):",@"===a&&e.length?("word"===Type(a=e.shift())&&(a=[a]),o=reparse(a),this.execute(o,{returnResult:!0}).then(function(e){t=t.concat(e),r()}).catch(i)):"word"===Type(a)&&/^",/.test(a)?(o=reparse(a.substring(2)),this.execute(o,{returnResult:!0}).then(function(e){t.push('"'+("list"===Type(e)?e[0]:e)),r()}).catch(i)):"word"===Type(a)&&/^:,/.test(a)?(o=reparse(a.substring(2)),this.execute(o,{returnResult:!0}).then(function(e){t.push(":"+("list"===Type(e)?e[0]:e)),r()}).catch(i)):(t.push(a),r())}else n(t)}.bind(this))}),def("for",function(e,t){function r(e){return e<0?-1:e>0?1:0}e=reparse(lexpr(e)),t=reparse(lexpr(t));var n,i,o,a,s=sexpr(e.shift());return Promise.resolve(evaluateExpression(e)).then(function(t){return a=n=aexpr(t),evaluateExpression(e)}).then(function(t){return i=aexpr(t),e.length?evaluateExpression(e):i<n?-1:1}).then(function(e){o=aexpr(e)}).then(function(){return promiseLoop(function(e,n,u){r(a-i)!==r(o)?(setlocal(s,a),this.execute(t).then(function(){a+=o}).then(promiseYield).then(e,u)):n()}.bind(this))}.bind(this))}),def("dotimes",function(e,t){e=reparse(lexpr(e)),t=reparse(lexpr(t));var r,n=sexpr(e.shift()),i=1;return Promise.resolve(evaluateExpression(e)).then(function(e){r=aexpr(e)}).then(function(){return promiseLoop(function(e,o,a){i>r?o():(setlocal(n,i),this.execute(t).then(function(){++i}).then(promiseYield).then(e,a))}.bind(this))}.bind(this))}),def("do.while",function(e,t){return e=checkevalblock(e),promiseLoop(function(r,n,i){this.execute(e).then(t).then(function(e){return"list"===Type(e)&&(e=evaluateExpression(reparse(e))),e}).then(function(e){e?promiseYield().then(r):n()},i)}.bind(this))},{noeval:!0}),def("while",function(e,t){return t=checkevalblock(t),promiseLoop(function(r,n,i){Promise.resolve(e()).then(function(e){return"list"===Type(e)&&(e=evaluateExpression(reparse(e))),e}).then(function(e){e?this.execute(t).then(promiseYield).then(r):n()}.bind(this),i)}.bind(this))},{noeval:!0}),def("do.until",function(e,t){return e=checkevalblock(e),promiseLoop(function(r,n,i){this.execute(e).then(t).then(function(e){return"list"===Type(e)&&(e=evaluateExpression(reparse(e))),e}).then(function(e){e?n():promiseYield().then(r)},i)}.bind(this))},{noeval:!0}),def("until",function(e,t){return t=checkevalblock(t),promiseLoop(function(r,n,i){Promise.resolve(e()).then(function(e){return"list"===Type(e)&&(e=evaluateExpression(reparse(e))),e}).then(function(e){e?n():this.execute(t).then(promiseYield).then(r)}.bind(this),i)}.bind(this))},{noeval:!0}),def("case",function(e,t){t=lexpr(t);for(var r=0;r<t.length;++r){var n=lexpr(t[r]),i=n.shift();if(isKeyword(i,"ELSE"))return evaluateExpression(n);if(lexpr(i).some(function(t){return equal(t,e)}))return evaluateExpression(n)}}),def("cond",function(e){return e=lexpr(e),promiseLoop(function(t,r,n){if(e.length){var i=lexpr(e.shift()),o=i.shift();isKeyword(o,"ELSE")?r(evaluateExpression(i)):evaluateExpression(reparse(lexpr(o))).then(function(e){e?r(evaluateExpression(i)):t()},n)}else r()})}),def("apply",function(e,t){e=sexpr(e);var r=this.routines.get(e);if(!r)throw err("{_PROC_}: Don't know how to {name:U}",{name:e},ERRORS.BAD_PROC);if(r.special||r.noeval)throw err("Can't apply {_PROC_} to special {name:U}",{name:e},ERRORS.BAD_INPUT);return r.apply(this,lexpr(t))}),def("invoke",function(e,t){e=sexpr(e);var r=this.routines.get(e);if(!r)throw err("{_PROC_}: Don't know how to {name:U}",{name:e},ERRORS.BAD_PROC);if(r.special||r.noeval)throw err("Can't apply {_PROC_} to special {name:U}",{name:e},ERRORS.BAD_INPUT);for(var n=[],i=1;i<arguments.length;++i)n.push(arguments[i]);return r.apply(this,n)},{minimum:1,maximum:-1}),def("foreach",function(e,t){e=sexpr(e);var r=this.routines.get(e);if(!r)throw err("{_PROC_}: Don't know how to {name:U}",{name:e},ERRORS.BAD_PROC);if(r.special||r.noeval)throw err("Can't apply {_PROC_} to special {name:U}",{name:e},ERRORS.BAD_INPUT);return t=lexpr(t),promiseLoop(function(e,n,i){t.length?Promise.resolve(r(t.shift())).then(e,i):n()})}),def("map",function(e,t){e=sexpr(e);var r=this.routines.get(e);if(!r)throw err("{_PROC_}: Don't know how to {name:U}",{name:e},ERRORS.BAD_PROC);if(r.special||r.noeval)throw err("Can't apply {_PROC_} to special {name:U}",{name:e},ERRORS.BAD_INPUT);var n=[].slice.call(arguments,1).map(lexpr);if(!n.length)throw err("{_PROC_}: Expected list",ERRORS.BAD_INPUT);var i=[];return promiseLoop(function(e,t,o){if(n[0].length){var a=n.map(function(e){if(!e.length)throw err("{_PROC_}: Expected lists of equal length",ERRORS.BAD_INPUT);return e.shift()});Promise.resolve(r.apply(this,a)).then(function(e){i.push(e)}).then(e,o)}else t(i)}.bind(this))},{maximum:-1}),def("filter",function(e,t){e=sexpr(e);var r=this.routines.get(e);if(!r)throw err("{_PROC_}: Don't know how to {name:U}",{name:e},ERRORS.BAD_PROC);if(r.special||r.noeval)throw err("Can't apply {_PROC_} to special {name:U}",{name:e},ERRORS.BAD_INPUT);t=lexpr(t);var n=[];return promiseLoop(function(e,i,o){if(t.length){var a=t.shift();Promise.resolve(r(a)).then(function(e){e&&n.push(a)}).then(e,o)}else i(n)})}),def("find",function(e,t){e=sexpr(e);var r=this.routines.get(e);if(!r)throw err("{_PROC_}: Don't know how to {name:U}",{name:e},ERRORS.BAD_PROC);if(r.special||r.noeval)throw err("Can't apply {_PROC_} to special {name:U}",{name:e},ERRORS.BAD_INPUT);return t=lexpr(t),promiseLoop(function(e,n,i){if(t.length){var o=t.shift();Promise.resolve(r(o)).then(function(t){t?n(o):e()},i)}else n([])})}),def("reduce",function(e,t){e=sexpr(e),t=lexpr(t);var r=void 0!==arguments[2]?arguments[2]:t.shift(),n=this.routines.get(e);if(!n)throw err("{_PROC_}: Don't know how to {name:U}",{name:e},ERRORS.BAD_PROC);if(n.special||n.noeval)throw err("Can't apply {_PROC_} to special {name:U}",{name:e},ERRORS.BAD_INPUT);return promiseLoop(function(e,i,o){t.length?Promise.resolve(n.call(this,r,t.shift())).then(function(e){r=e}).then(e,o):i(r)}.bind(this))},{maximum:3}),def("crossmap",function(e,t){e=sexpr(e);var r=this.routines.get(e);if(!r)throw err("{_PROC_}: Don't know how to {name:U}",{name:e},ERRORS.BAD_PROC);if(r.special||r.noeval)throw err("Can't apply {_PROC_} to special {name:U}",{name:e},ERRORS.BAD_INPUT);var n=[].slice.call(arguments,1).map(lexpr);if(!n.length)throw err("{_PROC_}: Expected list",ERRORS.BAD_INPUT);1===n.length&&(n=n[0].map(lexpr));var i=n.map(function(){return 0}),o=!1,a=[];return promiseLoop(function(e,t,s){if(o)t(a);else{var u=i.map(function(e,t){return n[t][e]}),l=i.length-1;for(++i[l];i[l]===n[l].length;){if(0===l){o=!0;break}i[l]=0,++i[--l]}Promise.resolve(r.apply(this,u)).then(function(e){a.push(e)}).then(e,s)}}.bind(this))},{maximum:-1}),def(".promise",function(e){return Promise.resolve(e)})}window.LogoInterpreter=LogoInterpreter},723:function(e,t,r){"use strict";r.r(t),t.default='to ellipse :w :h\n  localmake "initxcor xcor\n  localmake "initycor ycor\n  localmake "initangle 0\n  localmake "x_pos (:initxcor + ((sin :initangle) * :w/2))\n  localmake "y_pos (:initycor + ((cos :initangle) * :h/2))\n  repeat 36[\n    penup\n    setxy :x_pos :y_pos\n    pendown\n    localmake "angle (:initangle + (repcount*10))\n    localmake "x_pos (:initxcor +((sin :angle) * :w/2))\n    localmake "y_pos (:initycor +((cos :angle) * :h/2))\n    setxy :x_pos :y_pos\n  ]\n  penup\n  setxy :initxcor :initycor\n  pendown\nend\n'},724:function(e,t,r){"use strict";function n(e){return document.querySelector(e)}Object.defineProperty(t,"__esModule",{value:!0}),r(725),r(726);var i=function(){function e(e,t){this.sandBoxSelector=e,this.turtleSelector=t}return e.prototype.init=function(e){var t=window.CanvasTurtle,r=n(this.sandBoxSelector),i=r.getContext("2d"),o=n(this.turtleSelector);return this.width=r.width,this.height=r.height,this.turtle=new t(i,this.width,this.height,void 0,{turtleElement:o,turtleSize:e}),this.turtle},e.prototype.resizeCanvas=function(e,t){if(t&&e&&(e=Math.trunc(e),(t=Math.trunc(t))!==this.height||e!==this.width)){this.width=e,this.height=t;var r=n(this.sandBoxSelector);r.width=e,r.height=t}},e.prototype.createScreenshot=function(e){var t=n(this.sandBoxSelector);return t?e?this.prepareThumbnail(t):t.toDataURL("image/jpeg",1):""},e.prototype.prepareThumbnail=function(e){var t=200,r=150,n=Math.min(400,e.width),i=3*n/4;i>e.height&&(n=4*(i=e.height)/3);var o={x:(e.width-n)/2,y:(e.height-i)/2},a=document.createElement("canvas"),s=a.getContext("2d");return s?(a.width=t,a.height=r,s.drawImage(e,o.x,o.y,n,i,0,0,t,r),a.toDataURL("image/jpeg",1)):""},e}();t.LogoOutputGraphics=i},725:function(e,t){CanvasRenderingContext2D.prototype.floodFill=function(e,t){var r=this,n=r.canvas,i=n.width,o=n.height,a=[0,-1,1,0],s=[-1,0,0,1];function u(e,t){var n=r.getImageData(e,t,i,o).data;return n[3]<<24|n[0]<<16|n[1]<<8|n[2]}var l=u(e|=0,t|=0);r.fillRect(e,t,1,1);var c=u(e,t);if(l!==c){var p=l>>24&255,d=l>>16&255,h=l>>8&255,f=255&l,m=c>>24&255,g=c>>16&255,v=c>>8&255,y=255&c,_=r.getImageData(0,0,i,o),E=_.data,w=[];for(w.push(e),w.push(t);w.length>0;)for(var S=w.pop(),T=w.pop(),b=0;b<4;b++){var x=T+a[b],P=S+s[b];if(!(x<0||P<0||x>=i||P>=o)){var R=4*(P*i+x);E[R+0]==d&&E[R+1]==h&&E[R+2]==f&&E[R+3]==p&&(E[R++]=g,E[R++]=v,E[R++]=y,E[R]=m,w.push(x),w.push(P))}}r.putImageData(_,0,0)}}},726:function(e,t){!function(e){"use strict";function t(e){return e/180*Math.PI}function r(e){return 180*e/Math.PI}function n(e,t){return e=Number(e),t=String(t).toLowerCase(),-1===["serif","sans-serif","cursive","fantasy","monospace"].indexOf(t)&&(t=JSON.stringify(t)),String(e)+"px "+t}function i(e,t){var r=e%t;return r<0?r+t:r}function o(e,t,r,n,i){e.fillText=e.fillText||function(e,t,r){},this.canvas_ctx=e,this.turtle_element=i.turtleElement,this.turtle_size=i.turtleSize,this.width=Number(t),this.height=Number(r),this.x=this.py=0,this.y=this.py=0,this.r=Math.PI/2,this.sx=this.sy=1,this.color="#000000",this.bgcolor="#ffffff",this.penwidth=1,this.penmode="paint",this.fontsize=14,this.fontname="sans-serif",this.turtlemode="wrap",this.visible=!0,this.pendown=!0,this.was_oob=!1,this.filling=0,this._clickx=this._clicky=0,this._mousex=this._mousey=0,this._buttons=0,this._init(),this._tick(),n&&(n.addEventListener("mousemove",function(e){var t=n.getBoundingClientRect();this._mousemove(e.clientX-t.left,e.clientY-t.top,e.buttons)}.bind(this)),n.addEventListener("mousedown",function(e){var t=n.getBoundingClientRect();this._mouseclick(e.clientX-t.left,e.clientY-t.top,e.buttons)}.bind(this)))}Object.defineProperties(o.prototype,{_init:{value:function(){this.color=this.color,this.fontname=this.fontname,this.fontsize=this.fontsize,this.penmode=this.penmode,this.penwidth=this.penwidth,this.canvas_ctx.lineCap="round",this.canvas_ctx.setTransform(this.sx,0,0,-this.sy,this.width/2,this.height/2)}},_tick:{value:function(){requestAnimationFrame(this._tick.bind(this));var e=JSON.stringify([this.x,this.y,this.r,this.visible,this.sx,this.sy,this.width,this.height]);e!==this._last_state&&(this._last_state=e,this.visible?(this.turtle_element.style.display="block",this.turtle_element.style.left=this.width/2+this.x*this.sx-this.turtle_size/2+"px",this.turtle_element.style.top=this.height/2-this.y*this.sy-this.turtle_size/2+"px",this.turtle_element.style.width=this.turtle_size+"px",this.turtle_element.style.height=this.turtle_size+"px",this.turtle_element.style.transform=`rotate(${1.5708-this.r}rad)`):this.turtle_element.style.display="none")}},_moveto:{value:function(e,t,r){var n,o,a,s,u,l,c,p=function(e,t,r,n){this.filling?(this.canvas_ctx.lineTo(e,t),this.canvas_ctx.lineTo(r,n)):this.pendown&&(this.canvas_ctx.beginPath(),this.canvas_ctx.moveTo(e,t),this.canvas_ctx.lineTo(r,n),this.canvas_ctx.stroke())}.bind(this),d=this.width/this.sx,h=this.height/this.sy,f=-d/2,m=d/2,g=-h/2,v=h/2;if(r&&"wrap"===this.turtlemode){var y=e<f||e>=m||t<g||t>=v,_=e,E=t;if(this.was_oob){var w=i(e+d/2,d)-(e+d/2),S=i(t+h/2,h)-(t+h/2);e+=w,t+=S,this.x=this.px+w,this.y=this.py+S}this.was_oob=y,this.px=_,this.py=E}else this.was_oob=!1;for(;;)switch(this.turtlemode){case"window":return p(this.x,this.y,e,t),this.x=this.px=e,void(this.y=this.py=t);default:case"wrap":case"fence":if(u=1,l=1,e<f?u=(this.x-f)/(this.x-e):e>m&&(u=(this.x-m)/(this.x-e)),t<g?l=(this.y-g)/(this.y-t):t>v&&(l=(this.y-v)/(this.y-t)),!isFinite(u)||!isFinite(l))throw console.log("x",e,"left",f,"right",m),console.log("y",t,"bottom",g,"top",v),console.log("fx",u,"fy",l),new Error("Wrapping error: non-finite fraction");if(n=e,o=t,a=e,s=t,u<1&&u<=l?(n=(c=e<f)?f:m,e+=c?d:-d,a=c?m:f,s=o=this.y-u*(this.y-t)):l<1&&l<=u&&(o=(c=t<g)?g:v,t+=c?h:-h,a=n=this.x-l*(this.x-e),s=c?v:g),p(this.x,this.y,n,o),"fence"===this.turtlemode)return this.x=this.px=n,void(this.y=this.py=o);if(this.x=a,this.y=s,u>=1&&l>=1)return}}},_mousemove:{value:function(e,t,r){this._mousex=(e-this.width/2)/this.sx,this._mousey=(t-this.height/2)/-this.sy,this._buttons=r}},_mouseclick:{value:function(e,t,r){this._clickx=(e-this.width/2)/this.sx,this._clicky=(t-this.height/2)/-this.sy,this._buttons=r}},resize:{value:function(e,t){this.width=e,this.height=t,this._init()}},move:{value:function(e){var t,r,n,i,o;(n=Math.abs(e)<.001)&&(i=this.x,o=this.y,e=.001);var a=10;function s(e){var t=Math.pow(10,a);return Math.round(e*t)/t}t=s(this.x+e*Math.cos(this.r)),r=s(this.y+e*Math.sin(this.r)),this._moveto(t,r),n&&(this.x=this.px=i,this.y=this.px=o)}},turn:{value:function(e){this.r-=t(e)}},towards:{value:function(e,t){return e=e,t=t,90-r(Math.atan2(t-this.y,e-this.x))}},clearscreen:{value:function(){this.home(),this.clear()}},clear:{value:function(){this.canvas_ctx.save();try{this.canvas_ctx.setTransform(1,0,0,1,0,0),this.canvas_ctx.clearRect(0,0,this.width,this.height),this.canvas_ctx.fillStyle=this.bgcolor,this.canvas_ctx.fillRect(0,0,this.width,this.height)}finally{this.canvas_ctx.restore()}}},home:{value:function(){this._moveto(0,0),this.r=t(90)}},drawtext:{value:function(e){this.canvas_ctx.save(),this.canvas_ctx.translate(this.x,this.y),this.canvas_ctx.scale(1,-1),this.canvas_ctx.rotate(-this.r),this.canvas_ctx.fillText(e,0,0),this.canvas_ctx.restore()}},beginpath:{value:function(){0===this.filling&&(this.saved_turtlemode=this.turtlemode,this.turtlemode="window",++this.filling,this.canvas_ctx.beginPath())}},fillpath:{value:function(e){--this.filling,0===this.filling&&(this.canvas_ctx.closePath(),this.canvas_ctx.fillStyle=e,this.canvas_ctx.fill(),this.canvas_ctx.fillStyle=this.color,this.pendown&&this.canvas_ctx.stroke(),this.turtlemode=this.saved_turtlemode)}},fill:{value:function(){this.canvas_ctx.save(),this.canvas_ctx.setTransform(1,0,0,1,0,0),this.canvas_ctx.floodFill(this.x*this.sx+this.width/2,-this.y*this.sy+this.height/2),this.canvas_ctx.restore()}},arc:{value:function(e,r){"wrap"==this.turtlemode?[this.x,this.x+this.width/this.sx,this.x-this.width/this.sx].forEach(function(n){[this.y,this.y+this.height/this.sy,this.y-this.height/this.sy].forEach(function(i){this.filling||this.canvas_ctx.beginPath(),this.canvas_ctx.arc(n,i,r,this.r,this.r-t(e),e>0),this.filling||this.canvas_ctx.stroke()}.bind(this))}.bind(this)):(this.filling||this.canvas_ctx.beginPath(),this.canvas_ctx.arc(this.x,this.y,r,this.r,this.r-t(e),e>0),this.filling||this.canvas_ctx.stroke())}},getstate:{value:function(){return{isturtlestate:!0,color:this.color,bgcolor:this.bgcolor,position:this.position,heading:this.heading,penmode:this.penmode,turtlemode:this.turtlemode,width:this.width,fontsize:this.fontsize,fontname:this.fontname,visible:this.visible,pendown:this.pendown,scrunch:this.scrunch}}},setstate:{value:function(e){if(!e||!e.isturtlestate)throw new Error("Tried to restore a state that is not a turtle state");this.turtlemode=e.turtlemode,this.color=e.color,this.bgcolor=e.bgcolor,this.penwidth=e.penwidth,this.fontsize=e.fontsize,this.fontname=e.fontname,this.position=e.position,this.heading=e.heading,this.penmode=e.penmode,this.scrunch=e.scrunch,this.visible=e.visible,this.pendown=e.pendown}},pendown:{set:function(e){this._down=e},get:function(){return this._down}},penmode:{get:function(){return this._penmode},set:function(e){this._penmode=e,this.canvas_ctx.globalCompositeOperation="erase"===this.penmode?"destination-out":"reverse"===this.penmode?"difference":"source-over",this.canvas_ctx.strokeStyle=this.canvas_ctx.fillStyle="paint"===e?this.color:"#ffffff"}},turtlemode:{set:function(e){this._turtlemode=e},get:function(){return this._turtlemode}},color:{get:function(){return this._color},set:function(e){this._color=e,this.canvas_ctx.strokeStyle=this._color,this.canvas_ctx.fillStyle=this._color}},bgcolor:{get:function(){return this._bgcolor},set:function(e){this._bgcolor=e,this.clear()}},penwidth:{set:function(e){this._penwidth=e,this.canvas_ctx.lineWidth=this._penwidth},get:function(){return this._penwidth}},fontsize:{set:function(e){this._fontsize=e,this.canvas_ctx.font=n(this.fontsize,this.fontname)},get:function(){return this._fontsize}},fontname:{set:function(e){this._fontname=e,this.canvas_ctx.font=n(this.fontsize,this.fontname)},get:function(){return this._fontname}},position:{set:function(e){var t=e[0],r=e[1];t=void 0===t?this.x:t,r=void 0===r?this.y:r,this._moveto(t,r,!0)},get:function(){return[this.x,this.y]}},heading:{get:function(){return 90-r(this.r)},set:function(e){this.r=t(90-e)}},visible:{set:function(e){this._visible=e},get:function(){return this._visible}},scrunch:{set:function(e){var t=e[0],r=e[1];this.x=this.px=this.x/t*this.sx,this.y=this.py=this.y/r*this.sy,this.sx=t,this.sy=r,this.canvas_ctx.setTransform(this.sx,0,0,-this.sy,this.width/2,this.height/2)},get:function(){return[this.sx,this.sy]}},mousepos:{get:function(){return[this._mousex,this._mousey]}},clickpos:{get:function(){return[this._clickx,this._clicky]}},button:{get:function(){return this._buttons}}}),e.CanvasTurtle=o}(self)},727:function(e,t,r){"use strict";function n(e){return document.querySelector(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.overlaySelector=e}return e.prototype.read=function(e){return window.prompt(e||"")},e.prototype.write=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=n(this.overlaySelector),i=0,o=e;i<o.length;i++){var a=o[i];r.innerHTML+=a}r.scrollTop=r.scrollHeight},e.prototype.clear=function(){n(this.overlaySelector).innerHTML=""},e.prototype.readback=function(){return n(this.overlaySelector).innerHTML},Object.defineProperty(e.prototype,"textsize",{get:function(){return parseFloat(n(this.overlaySelector).style.fontSize.replace("px",""))},set:function(e){n(this.overlaySelector).style.fontSize=Math.max(e,1)+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return n(this.overlaySelector).style.fontFamily},set:function(e){-1===["serif","sans-serif","cursive","fantasy","monospace"].indexOf(e)&&(e=JSON.stringify(e)),n(this.overlaySelector).style.fontFamily=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return n(this.overlaySelector).style.color},set:function(e){n(this.overlaySelector).style.color=e},enumerable:!0,configurable:!0}),e}();t.LogoOutputConsole=i},728:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);function i(e,t,r){return n.__awaiter(this,void 0,Promise,function(){var o,a,s,u,l,c,p,d,h;return n.__generator(this,function(n){switch(n.label){case 0:o=e.match(/[^\r\n]+/g)||[],a=[],s=0,u=o,n.label=1;case 1:return s<u.length?(l=u[s],(c=l.trimLeft().toLowerCase()).startsWith('import "')?(p=c.substr(8),[4,t(p)]):[3,5]):[3,7];case 2:return(d=n.sent())?[4,i(d,t,!1)]:[3,4];case 3:h=n.sent(),r&&(h=function(e){for(var t=[],r=!1,n=0,i=e;n<i.length;n++){var o=i[n],a=o.trim().toLowerCase();a.startsWith("to ")&&(r=!0),r&&t.push(o),a.endsWith("end")&&(r=!1)}return t}(h)),a.push.apply(a,h),n.label=4;case 4:return[3,6];case 5:a.push(l),n.label=6;case 6:return s++,[3,1];case 7:return[2,a]}})})}t.processImports=function(e,t){return n.__awaiter(this,void 0,Promise,function(){return n.__generator(this,function(r){switch(r.label){case 0:return[4,i(e,t,!0)];case 1:return[2,r.sent().join("\n")]}})})}},729:function(e,t,r){},73:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.localStoragePrefix="logo-playground-v1.0:"},735:function(e,t,r){var n=r(81);void 0!==n&&(n.defineMode("logo",function(e,t){var r=/^(["'](?:[^ \f\n\r\t\v[\](){}\\]|\\[^])*)/,n=/^([\u2190-\u2193])/,i=/^([0-9]*\.?[0-9]+(?:[eE]\s*[\-+]?\s*[0-9]+)?)/,o=/^(:(:?[\u2190-\u2193]|[^ \f\n\r\t\v[\](){}+\-*\/%^=<>]+))/,a=/^([\u2190-\u2193]|[^ \f\n\r\t\v[\](){}+\-*\/%^=<>]+)/,s=/^(>=|<=|<>|[+\-*\/%^=<>[\]{}()])/;return{electricChars:"[]dD",startState:function(){return{state:"normal",indent:0}},indent:function(e,t){var r=e.indent;switch(/^\]/.test(t)&&--r,e.state){case"defn-name":return 2*(r+1);case"defn-vars":case"defn-body":return/^END\b/i.test(t)?2*r:2*(r+1);default:return 2*r}},token:function(e,t){if(e.eatSpace())return null;if(e.match(/^;.*/,!0))return"comment";if("normal"===t.state){if(e.match(/^TO\b/i,!0))return t.state="defn-name","keyword";if(e.match(/^END\b/i,!0))return"error"}if("defn-name"===t.state)return e.match(a,!0)?(t.state="defn-vars","def"):(e.next(),t.state="normal","error");if("defn-vars"===t.state){if(e.match(o,!0))return"def";t.state="defn-body"}if("defn-body"===t.state&&e.match(/^END\b/i,!0))return t.state="normal","keyword";if("normal"===t.state||"defn-body"===t.state)return e.match(i,!0)?"number":e.match(r,!0)?"string":e.match(/^\[/,!0)?(++t.indent,"bracket"):e.match(/^\]/,!0)?(t.indent>0&&--t.indent,"bracket"):e.match(s,!0)?"operator":e.match(o,!0)?"variable":e.match(/^(TRUE|FALSE|ELSE|REPEAT|IF|IFELSE|FOREVER)\b/i,!0)?"keyword":e.match(n,!0)||e.match(a,!0)?"variable-2":(e.next(),"error");throw"WTF?"}}}),n.defineMIME("text/x-logo","logo"))},736:function(e,t,r){},737:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(20),a=r(35),s=r(251),u=r(46),l=r(68),c=r(71),p=r(57),d=r(263),h=function(e){function t(t){var r=e.call(this,t)||this;return r.imageUploadService=a.resolve(s.ImageUploadService),r.eventsTracking=a.resolve(u.EventsTrackingService),r.state={errorMessage:"",isSavingInProgress:!0},r}return n.__extends(t,e),t.prototype.componentDidMount=function(){return n.__awaiter(this,void 0,void 0,function(){var e;return n.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.imageUploadService.doUpload(this.props.imageBase64)];case 1:return e=t.sent(),this.eventsTracking.sendEvent(u.EventAction.shareScreenshot),this.setState({isSavingInProgress:!1,imgUrl:e}),[3,3];case 2:return t.sent(),this.setState({isSavingInProgress:!1,errorMessage:o.$T.common.error}),[3,3];case 3:return[2]}})})},t.prototype.render=function(){return i.createElement(p.Modal,{show:!0,withoutFooter:!0,title:o.$T.program.screenshotModalTitle,onCancel:this.props.onClose,cancelButtonText:o.$T.common.cancel},i.createElement(c.Loading,{isLoading:this.state.isSavingInProgress}),this.state.errorMessage&&i.createElement(l.AlertMessage,{message:this.state.errorMessage,type:"danger"}),this.state.imgUrl&&i.createElement("div",{className:"share-screenshot-modal-component"},i.createElement("label",{className:"label"},o.$T.program.imagePreview),i.createElement("div",{className:"has-text-centered"},i.createElement("div",{className:"box is-inline-block"},i.createElement("img",{className:"screenshot-img",src:this.state.imgUrl,style:{maxHeight:400}}))),i.createElement("br",null),i.createElement("label",{className:"label"},o.$T.program.imageUrl),i.createElement(d.InputCopyToClipboard,{text:this.state.imgUrl})))},t}(i.Component);t.ScreenshotModal=h},739:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(20),a=r(35),s=r(67),u=r(254),l=r(46),c=r(47),p=r(78),d=r(68),h=r(57),f=r(263),m=function(e){function t(t){var r=e.call(this,t)||this;return r.sharedProgramsRepo=a.resolve(u.SharedProgramsRepository),r.eventsTracking=a.resolve(l.EventsTrackingService),r.errorHandler=function(e){r.setState({errorMessage:e.message})},r.shareProgramAction=function(){return n.__awaiter(r,void 0,void 0,function(){var e,t,r,i=this;return n.__generator(this,function(o){switch(o.label){case 0:return this.setState({isSavingInProgress:!0,errorMessage:""}),[4,s.callActionSafe(this.errorHandler,function(){return n.__awaiter(i,void 0,void 0,function(){return n.__generator(this,function(e){return[2,this.sharedProgramsRepo.post(this.state.programName,this.props.programCode)]})})})];case 1:return e=o.sent(),this.setState({isSavingInProgress:!1}),e&&(t=window.location.toString(),r=t.substr(0,t.indexOf("#")+1)+p.Routes.playground.build({storageType:c.ProgramStorageType.shared,id:e}),this.eventsTracking.sendEvent(l.EventAction.shareProgram),this.setState({publishedUrl:r})),[2]}})})},r.state={errorMessage:"",programName:r.props.programName,isSavingInProgress:!1,publishedUrl:""},r}return n.__extends(t,e),t.prototype.render=function(){var e=this;return i.createElement(h.Modal,{show:!0,title:o.$T.program.shareYourProgramModalTitle,onConfirm:this.state.publishedUrl?void 0:this.shareProgramAction,onCancel:this.props.onClose,withoutFooter:!!this.state.publishedUrl,actionButtonText:o.$T.common.continue,cancelButtonText:o.$T.common.cancel},this.state.errorMessage&&i.createElement("div",null,i.createElement(d.AlertMessage,{message:this.state.errorMessage}),i.createElement("br",null)),i.createElement("div",{className:"field"},i.createElement("label",{className:"label"},o.$T.program.programName),i.createElement("div",{className:"control"},i.createElement("input",{readOnly:!!this.state.publishedUrl,type:"text",className:"input",id:"program-name-in-share-dialog",placeholder:o.$T.program.pleaseEnterNameForYourProgram,autoFocus:!0,value:this.state.programName,onChange:function(t){e.setState({programName:t.target.value})}}))),i.createElement("br",null),this.state.publishedUrl&&i.createElement("div",null,i.createElement("label",{className:"label"},o.$T.program.publicUrl),i.createElement(f.InputCopyToClipboard,{text:this.state.publishedUrl})))},t}(i.Component);t.ShareProgramModal=m},740:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(20),a=r(57),s=function(e){function t(t){var r=e.call(this,t)||this;return r.saveProgramAction=function(){return n.__awaiter(r,void 0,void 0,function(){return n.__generator(this,function(e){return this.props.onSave(this.state.programName),this.props.onClose(),[2]})})},r.state={programName:r.props.programName},r}return n.__extends(t,e),t.prototype.render=function(){var e=this;return i.createElement(a.Modal,{show:!0,title:o.$T.program.saveToLibraryModalTitle,onConfirm:this.saveProgramAction,onCancel:this.props.onClose,actionButtonText:o.$T.common.save,cancelButtonText:o.$T.common.cancel},i.createElement("div",{className:"field"},i.createElement("label",{className:"label"},o.$T.program.programName),i.createElement("div",{className:"control"},i.createElement("input",{type:"text",readOnly:!this.props.allowRename,disabled:!this.props.allowRename,className:"input",id:"program-name-in-save-dialog",placeholder:o.$T.program.pleaseEnterNameForYourProgram,autoFocus:!0,value:this.state.programName,onChange:function(t){e.props.allowRename&&e.setState({programName:t.target.value})},onKeyDown:function(t){return n.__awaiter(e,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:return 13!=t.which?[3,2]:(t.preventDefault(),[4,this.saveProgramAction()]);case 1:e.sent(),e.label=2;case 2:return[2]}})})}}))),i.createElement("div",{className:"field"},i.createElement("label",{className:"label"},o.$T.gallery.galleryImage),i.createElement("div",{className:"has-text-centered"},i.createElement("div",{className:"box is-inline-block"},i.createElement("figure",{className:"has-text-centered"},i.createElement("img",{src:this.props.screenshot}))))))},t}(i.Component);t.SaveProgramModal=s},741:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(20),a=r(57),s=r(68),u=function(e){function t(t){var r=e.call(this,t)||this;return r.handleConfirm=function(){return n.__awaiter(r,void 0,void 0,function(){return n.__generator(this,function(e){return this.props.onDelete(),this.props.onClose(),[2]})})},r.state={errorMessage:"",isDeleteInProgress:!1},r}return n.__extends(t,e),t.prototype.render=function(){return i.createElement(a.Modal,{show:!0,onConfirm:this.handleConfirm,actionButtonText:o.$T.common.delete,cancelButtonText:o.$T.common.cancel,title:o.$T.common.areYouSure,onCancel:this.props.onClose},i.createElement(s.AlertMessage,{title:o.$T.program.youAreGoingToDeleteProgram,type:"warning"}),i.createElement("br",null),i.createElement("div",{className:"field"},i.createElement("label",{className:"label"},o.$T.program.programName),i.createElement("div",{className:"control"},i.createElement("input",{type:"text",readOnly:!0,className:"input",id:"program-name-in-delete-dialog",value:this.props.programName}))))},t}(i.Component);t.DeleteProgramModal=u},742:function(e,t,r){},743:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playgroundDefaultLayout={content:[{type:"row",content:[{isClosable:!1,title:"",type:"component",componentName:"output-panel",width:60},{isClosable:!1,title:"",type:"component",componentName:"code-panel",width:40}]}]},t.playgroundDefaultMobileLayout={settings:{reorderEnabled:!1},content:[{type:"column",content:[{isClosable:!1,title:"",type:"component",componentName:"code-panel",height:45},{isClosable:!1,title:"",type:"component",componentName:"output-panel",height:55}]}]}},744:function(e,t,r){},745:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(35),o=r(67),a=r(78),s=r(72),u=r(47),l=r(253),c=r(175),p=r(264),d=r(249),h=r(178),f=r(46),m=r(265);t.playgroundThunks={loadProgram:function(e,t){var r=this;return function(c,d){return n.__awaiter(r,void 0,void 0,function(){var r,m,g,v,y;return n.__generator(this,function(n){switch(n.label){case 0:if((r=d().playground).storageType===e&&r.programId===t)return[2];switch(m=i.resolve(f.EventsTrackingService),e){case u.ProgramStorageType.playground:m.sendEvent(f.EventAction.openPlayground);break;case u.ProgramStorageType.gallery:m.sendEvent(f.EventAction.openProgramFromLibrary);break;case u.ProgramStorageType.samples:m.sendEvent(f.EventAction.openProgramFromSample);break;case u.ProgramStorageType.shared:m.sendEvent(f.EventAction.openProgramFromShare)}c(h.playgroundActionCreator.loadProgramStarted(e,t)),n.label=1;case 1:return n.trys.push([1,3,,5]),[4,i.resolve(l.ProgramService).loadProgram(e,t)];case 2:return g=n.sent(),c(h.playgroundActionCreator.loadProgramCompleted(g,e,t)),[3,5];case 3:return v=n.sent(),[4,o.normalizeError(v)];case 4:return y=n.sent(),c(s.envActionCreator.handleError(y)),p.NavigationService.navigate(a.Routes.gallery.build({})),[3,5];case 5:return[2]}})})}},codeChanged:function(e){var t=this;return function(r,o){return n.__awaiter(t,void 0,void 0,function(){return n.__generator(this,function(t){return r(h.playgroundActionCreator.codeChangedAction(e)),i.resolve(d.LocalPlaygroundCodeStorage).setCode(e),[2]})})}},saveProgram:function(e){var t=this;return function(r,a){return n.__awaiter(t,void 0,void 0,function(){var t,u,c;return n.__generator(this,function(n){switch(n.label){case 0:r(h.playgroundActionCreator.syncProgramStarted()),i.resolve(f.EventsTrackingService).sendEvent(f.EventAction.saveProgramToPersonalLibrary),t=a().playground,n.label=1;case 1:return n.trys.push([1,3,,5]),[4,i.resolve(l.ProgramService).saveProgramToLibrary({id:t.programId,newProgramName:t.programName,newScreenshot:e,newCode:t.code})];case 2:return n.sent(),r(h.playgroundActionCreator.syncProgramCompleted({})),[3,5];case 3:return u=n.sent(),[4,o.normalizeError(u)];case 4:return c=n.sent(),r(s.envActionCreator.handleError(c)),r(h.playgroundActionCreator.syncProgramFailed()),[3,5];case 5:return[2]}})})}},saveAsProgram:function(e,t){var r=this;return function(u,c){return n.__awaiter(r,void 0,void 0,function(){var r,d,m,g;return n.__generator(this,function(n){switch(n.label){case 0:u(h.playgroundActionCreator.syncProgramStarted()),i.resolve(f.EventsTrackingService).sendEvent(f.EventAction.saveProgramToPersonalLibrary),n.label=1;case 1:return n.trys.push([1,3,,5]),r=c().playground,[4,i.resolve(l.ProgramService).saveProgramToLibrary({newProgramName:e,newScreenshot:t,newCode:r.code})];case 2:return d=n.sent(),u(h.playgroundActionCreator.syncProgramCompleted({newId:d.id,newName:e,newStorageType:d.storageType})),p.NavigationService.navigate(a.Routes.playground.build({storageType:d.storageType,id:d.id})),[3,5];case 3:return m=n.sent(),[4,o.normalizeError(m)];case 4:return g=n.sent(),u(s.envActionCreator.handleError(g)),u(h.playgroundActionCreator.syncProgramFailed()),[3,5];case 5:return[2]}})})}},deleteProgram:function(){var e=this;return function(t,r){return n.__awaiter(e,void 0,void 0,function(){var e,u,l;return n.__generator(this,function(n){switch(n.label){case 0:if(!(e=r().playground).programId)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,5]),t(h.playgroundActionCreator.syncProgramStarted()),[4,i.resolve(c.GalleryService).remove(e.programId)];case 2:return n.sent(),p.NavigationService.navigate(a.Routes.gallery.build({})),[3,5];case 3:return u=n.sent(),[4,o.normalizeError(u)];case 4:return l=n.sent(),t(s.envActionCreator.handleError(l)),t(h.playgroundActionCreator.syncProgramFailed()),[3,5];case 5:return[2]}})})}},revertChanges:function(){var e=this;return function(t,r){return n.__awaiter(e,void 0,void 0,function(){var e,a,u,c,p,d;return n.__generator(this,function(n){switch(n.label){case 0:e=r().playground,a=e.storageType,u=e.programId,t(h.playgroundActionCreator.syncProgramStarted()),i.resolve(f.EventsTrackingService).sendEvent(f.EventAction.revertProgramChanges),n.label=1;case 1:return n.trys.push([1,3,,5]),[4,i.resolve(l.ProgramService).loadProgram(a,u)];case 2:return c=n.sent(),t(h.playgroundActionCreator.loadProgramCompleted(c,a,u)),[3,5];case 3:return p=n.sent(),[4,o.normalizeError(p)];case 4:return d=n.sent(),t(s.envActionCreator.handleError(d)),t(h.playgroundActionCreator.syncProgramFailed()),[3,5];case 5:return[2]}})})}},formatCode:function(){var e=this;return function(r,i){return n.__awaiter(e,void 0,void 0,function(){var e,o;return n.__generator(this,function(n){return e=i().playground.code,o=m.formatLogoProgram(e),r(t.playgroundThunks.codeChanged(o)),[2]})})}}}},746:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(53),i=r(747),o=r(180),a=r(755);t.TutorialsContainer=n.connect(function(e){return{tutorialId:e.tutorials.tutorialId,stepId:e.tutorials.stepId,isLoading:e.tutorials.isLoading,code:e.tutorials.code,isRunning:e.tutorials.isRunning,isStepLoading:e.tutorials.isStepLoading,tutorials:e.tutorials.tutorials,currentTutorialInfo:e.tutorials.currentTutorialInfo,currentStepInfo:e.tutorials.currentStepInfo,currentStepContent:e.tutorials.currentStepContent,userSettings:e.env.userSettings,appTheme:e.env.appTheme}},{loadStep:a.tutorialsThunks.loadStep,codeChanged:o.tutorialsActionCreator.codeChanged,runProgram:o.tutorialsActionCreator.runProgram,stopProgram:o.tutorialsActionCreator.stopProgram,fixTheCode:o.tutorialsActionCreator.fixTheCode,formatCode:a.tutorialsThunks.formatCode})(i.TutorialsPage)},747:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(35),a=r(20),s=r(132),u=r(46),l=r(73),c=r(748),p=r(71),d=r(259),h=r(179),f=r(749),m=r(262),g=r(261),v=r(135),y=r(80),_=r(136);r(754);var E=function(e){function t(t){var r=e.call(this,t)||this;return r.eventsTracking=o.resolve(u.EventsTrackingService),r.isMobileDevice=s.checkIsMobileDevice(),r.defaultLayoutConfigJSON=JSON.stringify(r.isMobileDevice?c.tutorialsDefaultMobileLayout:c.tutorialsDefaultLayout),r.layoutLocalStorageKey=l.localStoragePrefix+"tutorials-layout"+(r.isMobileDevice?"-mobile":"-desktop"),r.handleCodeChanged=function(e){r.props.codeChanged(e)},r.handleRunProgram=function(){r.props.runProgram()},r.handleStopProgram=function(){r.props.stopProgram()},r.getProgramImage=function(){return r.logoExecutorRef?r.logoExecutorRef.createScreenshotBase64(!1):""},r.getSmallProgramImage=function(){return r.logoExecutorRef?r.logoExecutorRef.createScreenshotBase64(!0):""},r.handleFixTheCode=function(){r.eventsTracking.sendEvent(u.EventAction.tutorialsFixTheCode),r.props.fixTheCode()},r.handleNavigationRequest=function(e,t){r.eventsTracking.sendEvent(u.EventAction.tutorialsNavigation),r.props.loadStep(e,t)},r.handleFormatDocument=function(){r.props.formatCode()},r.state={resizeIncrement:1},r}return n.__extends(t,e),t.prototype.componentDidMount=function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){return this.eventsTracking.sendEvent(u.EventAction.openTutorials),this.props.loadStep(this.props.tutorialId,this.props.stepId),[2]})})},t.prototype.render=function(){var e=this;return i.createElement("div",{className:"ex-page-container"},i.createElement(y.MainMenuContainer,null),i.createElement("div",{className:"ex-page-content is-fullscreen tutorials-page-component"},i.createElement(p.Loading,{isLoading:this.props.isLoading,fullPage:!0}),i.createElement(d.ReactGoldenLayout,{className:"golden-layout-container",configLayoutOverride:{settings:{showMaximiseIcon:!1,showPopoutIcon:!1,showCloseIcon:!1},dimensions:{headerHeight:32}},layoutLocalStorageKey:this.layoutLocalStorageKey,defaultLayoutConfigJSON:this.defaultLayoutConfigJSON,onLayoutChange:function(){return e.setState({resizeIncrement:e.state.resizeIncrement+1})}},i.createElement(h.ReactGoldenLayoutPanel,{id:"code-panel",title:'<i class="fa fa-code" aria-hidden="true"></i> '+a.$T.program.codePanelTitle},i.createElement(m.CodeMenu,{isRunning:this.props.isRunning,code:this.props.code,programName:"Tutorial",onRunProgram:this.handleRunProgram,onStopProgram:this.handleStopProgram,createScreenShotImageBase64:this.getProgramImage,createSmallScreenShotImageBase64:this.getSmallProgramImage,onFormatDocument:this.handleFormatDocument}),i.createElement(g.CodeInput,{className:"code-input-container",editorTheme:this.props.appTheme.codeEditorThemeName,code:this.props.code,onChanged:this.handleCodeChanged,hotKeys:["f9"],onHotkey:this.handleRunProgram,resizeIncrement:this.state.resizeIncrement})),i.createElement(h.ReactGoldenLayoutPanel,{id:"output-panel",title:'<i class="fas fa-desktop" aria-hidden="true"></i> '+a.$T.program.outputPanelTitle},i.createElement(v.LogoExecutor,{ref:function(t){return e.logoExecutorRef=t||void 0},isRunning:this.props.isRunning,onFinish:this.handleStopProgram,code:this.props.code,isDarkTheme:this.props.appTheme.isDark,turtleImageSrc:_.getTurtleById(this.props.userSettings.turtleId).imageSrc,turtleSize:this.props.userSettings.turtleSize})),i.createElement(h.ReactGoldenLayoutPanel,{id:"tutorial-panel",title:'<i class="fa fa-graduation-cap" aria-hidden="true"></i> '+a.$T.tutorial.tutorialPanelTitle},i.createElement(p.Loading,{isLoading:this.props.isStepLoading&&!this.props.isLoading}),!this.props.isStepLoading&&this.props.tutorials&&this.props.currentTutorialInfo&&this.props.currentStepInfo&&this.props.currentStepContent&&i.createElement(f.TutorialView,{tutorials:this.props.tutorials,currentTutorialInfo:this.props.currentTutorialInfo,currentStepInfo:this.props.currentStepInfo,currentStepContent:this.props.currentStepContent,onNavigationRequest:this.handleNavigationRequest,onFixTheCode:this.handleFixTheCode,appTheme:this.props.appTheme,userSettings:this.props.userSettings})))))},t}(i.Component);t.TutorialsPage=E},748:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tutorialsDefaultLayout={content:[{type:"row",content:[{isClosable:!1,title:"",type:"component",componentName:"tutorial-panel",width:40},{type:"column",width:60,content:[{isClosable:!1,title:"",type:"component",componentName:"output-panel",height:60},{isClosable:!1,title:"",type:"component",componentName:"code-panel",height:40}]}]}]},t.tutorialsDefaultMobileLayout={settings:{reorderEnabled:!1},content:[{type:"column",content:[{type:"stack",width:100,height:55,activeItemIndex:0,content:[{isClosable:!1,title:"",type:"component",componentName:"tutorial-panel"},{isClosable:!1,title:"",type:"component",componentName:"code-panel"}]},{type:"stack",height:45,activeItemIndex:0,content:[{isClosable:!1,title:"",type:"component",componentName:"output-panel"}]}]}]}},749:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(97),a=r(20),s=r(136),u=r(750),l=r(57),c=r(135);r(753);var p=function(e){function t(t){var r=e.call(this,t)||this;return r.navigateToNextStep=function(e){return function(){return n.__awaiter(r,void 0,void 0,function(){var t,r,i,o=this;return n.__generator(this,function(n){return t=this.props.currentTutorialInfo.steps.findIndex(function(e){return e.id===o.props.currentStepInfo.id}),r=t+e,i=this.props.currentTutorialInfo.steps[r].id,this.props.onNavigationRequest(this.props.currentTutorialInfo.id,i),[2]})})}},r.state={showSelectionTutorials:!1,showFixTheCode:!1,inlinedLogoComponents:[]},r}return n.__extends(t,e),t.prototype.componentDidMount=function(){for(var e=[],t=0,r=Object.entries(this.props.currentStepContent.inlinedCode);t<r.length;t++){var n=r[t],a=n[0],u=n[1],l=document.getElementById(a);if(l){l.setAttribute("data-code",u.code);var p=i.createElement(c.LogoExecutor,{isRunning:!0,code:u.code,onFinish:function(){},isDarkTheme:this.props.appTheme.isDark,turtleImageSrc:s.getTurtleById(this.props.userSettings.turtleId).imageSrc,turtleSize:this.props.userSettings.turtleSize}),d=o.createPortal(p,l);e.push(d)}}e.length>0&&this.setState({inlinedLogoComponents:e})},t.prototype.render=function(){var e=this,t=this.props.currentTutorialInfo.steps.findIndex(function(t){return t.id===e.props.currentStepInfo.id}),r=t>=this.props.currentTutorialInfo.steps.length-1,n=t<=0;return i.createElement("div",{className:"tutorial-view-panel"},i.createElement("div",{className:"tutorial-content"},this.renderFixTheCodeModal(),this.renderSelectTutorialModal(),i.createElement("div",{className:"tutorial-header"},i.createElement("span",{className:"subtitle is-3 is-marginless"},this.props.currentStepInfo.name),i.createElement("button",{className:"button is-info",onClick:function(){e.setState({showSelectionTutorials:!0})}},i.createElement("span",null,this.props.currentTutorialInfo.label),i.createElement("span",{className:"icon is-small"},i.createElement("i",{className:"fa fa-angle-down","aria-hidden":"true"})))),i.createElement("p",{className:"help"},a.$T.tutorial.stepIndicator.val((t+1).toString(),this.props.currentTutorialInfo.steps.length.toString())),i.createElement("br",null),i.createElement("div",{className:"content",dangerouslySetInnerHTML:{__html:this.props.currentStepContent.content}}),this.state.inlinedLogoComponents,i.createElement("br",null),i.createElement("br",null),i.createElement("div",{className:"tutorials-bottom-nav-buttons-container"},!n&&i.createElement("button",{type:"button",className:"button",onClick:this.navigateToNextStep(-1)},i.createElement("span",{className:"icon"},i.createElement("i",{className:"fa fa-arrow-left","aria-hidden":"true"})),i.createElement("span",null,a.$T.tutorial.back)),this.props.currentStepContent.solutionCode&&i.createElement("button",{type:"button",className:"button is-warning",onClick:function(){e.setState({showFixTheCode:!0})}},i.createElement("span",{className:"icon"},i.createElement("i",{className:"fa fa-question","aria-hidden":"true"})),i.createElement("span",null,a.$T.tutorial.helpItsNotworking)),!r&&i.createElement("button",{type:"button",className:"button is-primary",onClick:this.navigateToNextStep(1)},i.createElement("span",{className:"icon"},i.createElement("i",{className:"fa fa-arrow-right","aria-hidden":"true"})),i.createElement("span",null,a.$T.common.continue)),r&&i.createElement("button",{type:"button",className:"button is-primary",onClick:function(){e.setState({showSelectionTutorials:!0})}},i.createElement("span",{className:"icon"},i.createElement("i",{className:"fa fa-arrow-right","aria-hidden":"true"})),i.createElement("span",null,a.$T.tutorial.chooseAnotherTutorial))),i.createElement("div",null)))},t.prototype.renderSelectTutorialModal=function(){var e=this;if(this.state.showSelectionTutorials)return i.createElement(u.TutorialSelectModal,{tutorials:this.props.tutorials,currentTutorialId:this.props.currentTutorialInfo.id,currentStepId:this.props.currentStepInfo.id,onCancel:function(){e.setState({showSelectionTutorials:!1})},onSelect:function(t){return n.__awaiter(e,void 0,void 0,function(){return n.__generator(this,function(e){return this.setState({showSelectionTutorials:!1}),this.props.onNavigationRequest(t.id,t.steps[0].id),[2]})})}})},t.prototype.renderFixTheCodeModal=function(){var e=this;if(this.state.showFixTheCode)return i.createElement(l.Modal,{show:!0,title:a.$T.tutorial.fixTheCodeTitle,actionButtonText:a.$T.tutorial.yesFixMyCode,cancelButtonText:a.$T.tutorial.noLeaveItAsIs,onConfirm:function(){return n.__awaiter(e,void 0,void 0,function(){return n.__generator(this,function(e){return this.setState({showFixTheCode:!1}),this.props.onFixTheCode(),[2]})})},onCancel:function(){e.setState({showFixTheCode:!1})}},i.createElement("p",null,a.$T.tutorial.fixTheCodeMessage,i.createElement("span",null," "),i.createElement("strong",null,a.$T.tutorial.fixTheCodeWarning)))},t}(i.Component);t.TutorialView=p},750:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(52),a=r(20),s=r(57),u=r(751);r(752);var l=function(e){function t(t){var r=e.call(this,t)||this;r.onSelect=function(e){r.setState({currentSelectedTutorial:e})};var n=r.props.tutorials.find(function(e){return e.id===r.props.currentTutorialId});if(!n)throw new Error("Tutorial is not found "+r.props.currentTutorialId);return r.state={currentSelectedTutorial:n},r}return n.__extends(t,e),t.prototype.start=function(){this.state.currentSelectedTutorial.id===this.props.currentTutorialId?this.props.onCancel():this.props.onSelect(this.state.currentSelectedTutorial)},t.prototype.render=function(){var e=this,t={};return this.props.tutorials.forEach(function(e){return t[e.level]=(t[e.level]||[]).concat([e])}),i.createElement(s.Modal,{show:!0,width:"default",title:a.$T.tutorial.chooseTutorial,onCancel:this.props.onCancel,cancelButtonText:a.$T.common.cancel,actionButtonText:this.state.currentSelectedTutorial.id===this.props.currentTutorialId?a.$T.common.continue:a.$T.tutorial.start,onConfirm:function(){return n.__awaiter(e,void 0,void 0,function(){return n.__generator(this,function(e){return this.start(),[2]})})}},i.createElement("div",{className:"tutorial-select-modal-component tutorial-pick-menu-container"},i.createElement("aside",{className:"menu"},Object.entries(t).map(function(t){var r=t[0],n=t[1];return e.renderTutorialsGroup(r,n)}))))},t.prototype.renderTutorialsGroup=function(e,t){var r=this,n=this.state.currentSelectedTutorial;return i.createElement(i.Fragment,{key:e},i.createElement("p",{className:"menu-label"},e),i.createElement("ul",{className:"menu-list"},t.map(function(e,t){return i.createElement(i.Fragment,{key:t},i.createElement("li",null,i.createElement("a",{className:o("tutorial-link",{"is-active":e.id===n.id}),onClick:function(){return r.onSelect(e)}},i.createElement("i",{className:"fa fa-arrow-circle-right","aria-hidden":"true"})," ",n.id===e.id?i.createElement("strong",null,e.label):i.createElement("span",null,e.label)),i.createElement(u.CollapsiblePanel,{className:"tutorial-description-container",isCollapsed:n.id!==e.id},i.createElement("p",{className:"tutorial-description"},e.description),i.createElement("ul",null,i.createElement("li",null,i.createElement("ol",null,e.steps.slice(0,e.steps.length-1).map(function(e){return i.createElement("li",{key:e.id},e.id===r.props.currentStepId&&n.id===r.props.currentTutorialId?i.createElement("strong",null,e.name):i.createElement("span",null,e.name))})))),i.createElement("br",null))))})))},t}(i.Component);t.TutorialSelectModal=l},751:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(52),o=r(1),a=r(100),s=function(e){function t(t){var r=e.call(this,t)||this;return r.animationDuration=300,r.onWindowResize=a.debounce(function(){r.handleResize()},500),r.handleResize=function(){var e=r.refs.panelBodyInner,t=r.props.isCollapsed?"0px":e.scrollHeight+"px";r.state.panelHeight!=t&&r.setState({panelHeight:t})},r.state={panelHeight:r.props.isCollapsed?"0px":"auto"},r}return n.__extends(t,e),t.prototype.componentDidMount=function(){window.addEventListener("resize",this.onWindowResize)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onWindowResize)},t.prototype.componentDidUpdate=function(e){if(this.props.isCollapsed&&!e.isCollapsed){var t=this.refs.panelBodyOuter;t.style.height=t.scrollHeight+"px"}this.handleResize(),setTimeout(this.handleResize,this.animationDuration)},t.prototype.render=function(){return o.createElement("div",{className:i("collapsible-panel-component",this.props.className),ref:"panelBodyOuter",style:{height:this.state.panelHeight,transition:"height "+this.animationDuration/1e3+"s",overflow:"hidden"}},o.createElement("div",{className:"collapsible-panel-inner",ref:"panelBodyInner"},this.props.children))},t}(o.Component);t.CollapsiblePanel=s},752:function(e,t,r){},753:function(e,t,r){},754:function(e,t,r){},755:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(35),o=r(67),a=r(72),s=r(250),u=r(180),l=r(265);t.tutorialsThunks={loadStep:function(e,t){var r=this;return function(l,c){return n.__awaiter(r,void 0,void 0,function(){var r,p,d,h,f,m,g,v,y;return n.__generator(this,function(n){switch(n.label){case 0:if(r=i.resolve(s.TutorialsService),p=c().tutorials.tutorials)return[3,5];l(u.tutorialsActionCreator.loadTutorialsStarted()),n.label=1;case 1:return n.trys.push([1,3,,5]),[4,r.getTutorialsList()];case 2:return p=n.sent(),l(u.tutorialsActionCreator.loadTutorialsCompleted(p)),[3,5];case 3:return d=n.sent(),[4,o.normalizeError(d)];case 4:throw y=n.sent(),l(a.envActionCreator.handleError(y)),new Error("Fail to load tutorials");case 5:e&&t||(h=r.getLastStep(),e=h.tutorialId,t=h.stepId),l(u.tutorialsActionCreator.loadStepStarted(e,t)),n.label=6;case 6:if(n.trys.push([6,8,,10]),f=p.find(function(t){return t.id===e}),m=f&&f.steps.find(function(e){return e.id===t}),!f||!m)throw r.setLastStep(r.defaultStep),new Error("Tutorial is not found, please refresh the page to load the default one.");return[4,r.getStep(e,t)];case 7:return g=n.sent(),l(u.tutorialsActionCreator.loadStepCompleted(e,t,f,m,g)),[3,10];case 8:return v=n.sent(),[4,o.normalizeError(v)];case 9:return y=n.sent(),l(a.envActionCreator.handleError(y)),[3,10];case 10:return[2]}})})}},formatCode:function(){var e=this;return function(t,r){return n.__awaiter(e,void 0,void 0,function(){var e,i;return n.__generator(this,function(n){return e=r().tutorials.code,i=l.formatLogoProgram(e),t(u.tutorialsActionCreator.codeChanged(i)),[2]})})}}}},756:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(53),i=r(101),o=r(757);t.LoginPageContainer=n.connect(function(e){return{user:e.env.user}},{onSignIn:i.envThunks.signIn})(o.LoginPage)},757:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(105),a=r(104),s=r(20),u=r(78),l=r(266),c=r(238),p=r(758),d=r(80),h=function(e){function t(t){var r=e.call(this,t)||this;return r.handleOnSignInClick=function(){r.props.onSignIn(a.AuthProvider.google)},r.state={},r}return n.__extends(t,e),t.prototype.renderAuthProviderInfo=function(e){switch(e){case a.AuthProvider.google:return i.createElement("span",{className:"icon"},i.createElement(p.SvgBtnGoogle,null));case a.AuthProvider.none:return i.createElement(i.Fragment,null);default:throw new Error("Auth provider is not known")}},t.prototype.render=function(){return i.createElement("div",{className:"ex-page-container"},i.createElement(d.MainMenuContainer,null),i.createElement("div",{className:"ex-page-content"},i.createElement("div",{className:"container"},i.createElement("br",null),i.createElement("div",{className:"columns"},i.createElement("div",{className:"column is-2-tablet is-3-desktop is-4-widescreen"}),i.createElement("div",{className:"column"},!this.props.user.isLoggedIn&&this.renderLoginForm(),this.props.user.isLoggedIn&&this.renderWelcomeForm()),i.createElement("div",{className:"column is-2-tablet is-3-desktop is-4-widescreen"})))))},t.prototype.renderLoginForm=function(){return i.createElement(i.Fragment,null,i.createElement(l.PageHeader,{title:s.$T.login.title}),i.createElement("br",null),i.createElement(c.InfoBox,{content:s.$T.login.notLoggedInSignInMessage}),i.createElement("br",null),i.createElement("div",{key:"login-elem-google"},i.createElement("button",{type:"button",className:"button",style:{width:"100%"},onClick:this.handleOnSignInClick},"   ",i.createElement("span",{className:"icon"},i.createElement(p.SvgBtnGoogle,null)),"   ",i.createElement("span",null,s.$T.common.signInWithGoogle),"   ")))},t.prototype.renderWelcomeForm=function(){return i.createElement(i.Fragment,null,i.createElement(l.PageHeader,{title:s.$T.welcome.title}),i.createElement("br",null),i.createElement("div",{className:"media"},this.props.user.imageUrl&&i.createElement("div",{className:"media-left"},i.createElement("figure",{className:"image is-48x48"},i.createElement("img",{src:this.props.user.imageUrl,alt:"User image"}))),i.createElement("div",{className:"media-content"},i.createElement("p",{className:"title is-5 is-marginless"},this.props.user.name),i.createElement("p",null,this.props.user.email),i.createElement("p",null,this.renderAuthProviderInfo(this.props.user.authProvider)))),i.createElement("br",null),i.createElement(o.Link,{to:u.Routes.gallery.build({})},i.createElement(c.InfoBox,{iconClass:"far fa-images",content:i.createElement(i.Fragment,null,i.createElement("h2",null,s.$T.welcome.galleryLinkHeader),i.createElement("p",null,s.$T.welcome.galleryLinkDescription))})),i.createElement("br",null),i.createElement(o.Link,{to:u.Routes.tutorials.build({})},i.createElement(c.InfoBox,{iconClass:"fas fa-graduation-cap",content:i.createElement(i.Fragment,null,i.createElement("h2",null,s.$T.welcome.tutorialsLinkHeader),i.createElement("p",null,s.$T.welcome.tutorialsLinkDescription))})),i.createElement("br",null),i.createElement(o.Link,{to:u.Routes.playgroundDefault.build({})},i.createElement(c.InfoBox,{iconClass:"fas fa-code",content:i.createElement(i.Fragment,null,i.createElement("h2",null,s.$T.welcome.playgroundLinkHeader),i.createElement("p",null,s.$T.welcome.playgroundLinkDescription))})),i.createElement("br",null))},t}(i.Component);t.LoginPage=h},758:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.SvgBtnGoogle=function(){return n.createElement("svg",{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M17.6 9.2l-.1-1.8H9v3.4h4.8C13.6 12 13 13 12 13.6v2.2h3a8.8 8.8 0 0 0 2.6-6.6z",fill:"#4285F4"}),n.createElement("path",{d:"M9 18c2.4 0 4.5-.8 6-2.2l-3-2.2a5.4 5.4 0 0 1-8-2.9H1V13a9 9 0 0 0 8 5z",fill:"#34A853"}),n.createElement("path",{d:"M4 10.7a5.4 5.4 0 0 1 0-3.4V5H1a9 9 0 0 0 0 8l3-2.3z",fill:"#FBBC05"}),n.createElement("path",{d:"M9 3.6c1.3 0 2.5.4 3.4 1.3L15 2.3A9 9 0 0 0 1 5l3 2.4a5.4 5.4 0 0 1 5-3.7z",fill:"#EA4335"}),n.createElement("path",{d:"M0 0h18v18H0z"})))}},759:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(170),a=r(35),s=r(760),u=r(46),l=r(80),c=r(761),p=function(e){function t(t){var r=e.call(this,t)||this;r.eventsTracking=a.resolve(u.EventsTrackingService),r.state={},r.eventsTracking.sendEvent(u.EventAction.openAbout);var n=new o({html:!0});return r.thirdPartyCreditsHTML=n.render(c.default),r}return n.__extends(t,e),t.prototype.render=function(){return i.createElement("div",{className:"ex-page-container"},i.createElement(l.MainMenuContainer,null),i.createElement("div",{className:"ex-page-content"},i.createElement("div",{className:"container"},i.createElement("br",null),i.createElement("h1",{className:"title"},"Logo playground"),i.createElement("br",null),i.createElement("h2",{className:"subtitle"},s.APP_INFO.description),i.createElement("br",null),i.createElement("div",{className:"card"},i.createElement("div",{className:"card-content"},i.createElement("h2",{className:"subtitle"},"Source code"),i.createElement("p",null,"Project is hosted on"," ",i.createElement("a",{href:"https://github.com/logolang/logo-playground"},i.createElement("i",{className:"fab fa-github","aria-hidden":"true"})," Github")),i.createElement("p",null,"Deployed on ",i.createElement("strong",null,s.APP_INFO.builtOn)),i.createElement("p",null,"Code version ",i.createElement("strong",null,s.APP_INFO.gitVersion)))),i.createElement("div",{className:"card"},i.createElement("div",{className:"card-content"},i.createElement("h2",{className:"subtitle"},"Third-party assets"),i.createElement("div",{className:"content"},i.createElement("div",{dangerouslySetInnerHTML:{__html:this.thirdPartyCreditsHTML}})))),i.createElement("br",null))))},t}(i.Component);t.InfoPage=p},760:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APP_INFO={gitVersion:"2605eff",name:"logo-playground",description:"Online environment for Logo programming language",version:"1.0.0",builtOn:"10/29/2019 3:26:26 PM"}},761:function(e,t,r){"use strict";r.r(t),t.default="Javascript libraries:\n\n- Logo interpreter [jslogo](https://github.com/inexorabletash/jslogo)\n- Code editor [codemirror](https://github.com/codemirror/CodeMirror)\n- Markdown rendering library [markdown-it](https://github.com/markdown-it/markdown-it)\n- Panels with drag and drop support [golden-layout](https://github.com/deepstreamIO/golden-layout)\n- I18n library [jed](https://github.com/messageformat/Jed)\n- Rendering library [react](https://github.com/facebook/react)\n- [Redux](https://redux.js.org/) is a predictable state container for JavaScript apps.\n\nStyles:\n\n- Base CSS framework from [bulma.io](https://bulma.io)\n- Themes for bulma from [bulmaswatch](https://jenil.github.io/bulmaswatch/)\n\nGraphics:\n\n- Favicon from [favicon.cc](http://www.favicon.cc/?action=icon&file_id=520733) by [Kristy](http://www.favicon.cc/?action=icon_list&user_id=158085)\n- Icon from [thenounproject.com](https://thenounproject.com/term/turtle/119022/) by [IsabelFoo](http://www.isabelfoo.com/)\n- Icons made by [Freepik](https://www.freepik.com/) from [www.flaticon.com](https://www.flaticon.com/) is licensed by [CC 3.0 BY](http://creativecommons.org/licenses/by/3.0/)\n- Website icons from [fontawesome.io](http://fontawesome.io/icons/)\n"},762:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(53),i=r(763),o=r(101);t.SettingsPageContainer=n.connect(function(e){return{user:e.env.user,userSettings:e.env.userSettings,appTheme:e.env.appTheme}},{applyUserSettings:o.envThunks.applyUserSettings})(i.SettingsPage)},763:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=r(35),a=r(20),s=r(136),u=r(176),l=r(46),c=r(764),p=r(266),d=r(135),h=r(255),f=r(80),m=r(174),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t}(c.SimpleSelect),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t}(c.SimpleSelect),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t}(c.SimpleSelect),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t}(c.SimpleSelect),E=function(e){function t(t){var r=e.call(this,t)||this;return r.eventsTracking=o.resolve(l.EventsTrackingService),r.demoSamplesService=o.resolve(h.LogoCodeSamplesService),r.state={code:r.demoSamplesService.getRandomSample()},r}return n.__extends(t,e),t.prototype.componentDidMount=function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){return this.eventsTracking.sendEvent(l.EventAction.openSettings),[2]})})},t.prototype.componentDidUpdate=function(e){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){return e.userSettings!==this.props.userSettings&&(this.logoExecutor&&this.logoExecutor.abort(),this.setState({code:"setpensize 1.5\n"+this.demoSamplesService.getRandomSample()})),[2]})})},t.prototype.render=function(){var e=this;return i.createElement("div",{className:"ex-page-container"},i.createElement(f.MainMenuContainer,null),i.createElement("div",{className:"ex-page-content"},i.createElement("div",{className:"container"},i.createElement("br",null),i.createElement(p.PageHeader,{title:a.$T.settings.settingsTitle}),i.createElement("br",null),i.createElement("div",{className:"field"},i.createElement("label",{className:"label",htmlFor:"language-selector"},a.$T.settings.language),i.createElement("div",{className:"control"},i.createElement("div",{className:"select"},i.createElement(g,{items:m.locales,selectedItem:m.locales.find(function(t){return t.id===e.props.userSettings.localeId}),getItemIdentifier:function(e){return e.id},renderItem:function(e){return e.name},id:"language-selector",selectionChanged:function(t){return n.__awaiter(e,void 0,void 0,function(){return n.__generator(this,function(e){return t&&this.props.applyUserSettings({localeId:t.id},{rebindServices:!0}),[2]})})}})))),i.createElement("br",null),i.createElement("div",{className:"columns"},i.createElement("div",{className:"column"},i.createElement("label",{className:"label",htmlFor:"theme-selector"},a.$T.settings.uiTheme),i.createElement("div",{className:"field"},i.createElement("div",{className:"control is-expanded"},i.createElement("div",{className:"select is-fullwidth"},i.createElement(v,{items:u.themesManager.themes,selectedItem:this.props.appTheme,getItemIdentifier:function(e){return e.name},renderItem:function(e){return e.name+" - "+e.description},id:"theme-selector",selectionChanged:function(t){return n.__awaiter(e,void 0,void 0,function(){return n.__generator(this,function(e){return t&&(this.props.applyUserSettings({themeName:t.name}),u.themesManager.setTheme(t)),[2]})})}})))),i.createElement("br",null),i.createElement("label",{className:"label",htmlFor:"turtle-skin-selector"},a.$T.settings.turtleSkin),i.createElement("div",{className:"field"},i.createElement("div",{className:"control"},i.createElement("div",{className:"select"},i.createElement(y,{id:"turtle-skin-selector",items:s.getTurtles(),selectedItem:s.getTurtles().find(function(t){return t.id===e.props.userSettings.turtleId}),getItemIdentifier:function(e){return e.id},renderItem:function(e){return e.name},selectionChanged:function(t){return n.__awaiter(e,void 0,void 0,function(){return n.__generator(this,function(e){return t&&this.props.applyUserSettings({turtleId:t.id}),[2]})})}})))),i.createElement("br",null),i.createElement("label",{className:"label",htmlFor:"turtle-size-selector"},a.$T.settings.turtleSize),i.createElement("div",{className:"field"},i.createElement("div",{className:"control"},i.createElement("div",{className:"select"},i.createElement(_,{id:"turtle-size-selector",items:s.getTurtleSizes(),selectedItem:s.getTurtleSizes().find(function(t){return t.size===e.props.userSettings.turtleSize}),getItemIdentifier:function(e){return e.size.toString()},renderItem:function(e){return e.description},selectionChanged:function(t){return n.__awaiter(e,void 0,void 0,function(){return n.__generator(this,function(e){return t&&this.props.applyUserSettings({turtleSize:t.size}),[2]})})}}))))),i.createElement("div",{className:"column"},i.createElement("div",{className:"card",style:{height:300}},i.createElement(d.LogoExecutor,{ref:function(t){return e.logoExecutor=t||void 0},isRunning:!0,code:this.state.code,onFinish:function(){},isDarkTheme:this.props.appTheme.isDark,turtleImageSrc:s.getTurtleById(this.props.userSettings.turtleId).imageSrc,turtleSize:this.props.userSettings.turtleSize})))),i.createElement("br",null))))},t}(i.Component);t.SettingsPage=E},764:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1),o=function(e){function t(t){var r=e.call(this,t)||this;return r.onSelect=function(e){var t=e.currentTarget.value,n=r.props.items.find(function(e){return t===r.props.getItemIdentifier(e)});void 0!==n?r.props.selectionChanged(n):r.props.selectionChanged(void 0)},r}return n.__extends(t,e),t.prototype.renderOptionItem=function(e){return i.createElement("option",{key:this.props.getItemIdentifier(e),value:this.props.getItemIdentifier(e)},this.props.renderItem(e))},t.prototype.render=function(){var e=this,t=this.props.selectedItem?this.props.getItemIdentifier(this.props.selectedItem):"";return i.createElement("select",{disabled:this.props.readOnly,className:this.props.className,id:this.props.id,value:t,onChange:this.props.readOnly?void 0:this.onSelect},this.props.allowNotSelected&&i.createElement("option",{value:""},"··· Not Selected ···"),this.props.items.map(function(t){return e.renderOptionItem(t)}))},t}(i.Component);t.SimpleSelect=o},765:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(1);r(766);var o=function(e){function t(t){var r=e.call(this,t)||this;return r.handleAlertDismiss=function(e){r.props.onClose(e.id)},r.state={},r}return n.__extends(t,e),t.prototype.render=function(){var e=this;return i.createElement("div",{className:"message-toster"},this.props.messages.map(function(t){return i.createElement("div",{key:t.id},i.createElement("article",{className:"message is-"+t.type},i.createElement("div",{className:"message-header"},i.createElement("p",null,t.title),i.createElement("button",{className:"delete","aria-label":"delete",onClick:function(){return e.handleAlertDismiss(t)}})),i.createElement("div",{className:"message-body"},i.createElement("p",null,t.message))))}))},t}(i.Component);t.MessageToster=o},766:function(e,t,r){},767:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(138),i=r(768),o=r(769),a=r(130),s=r(770),u=r(267),l=r(771),c=r(268),p=r(772),d=r(177),h=r(773);t.createInitialStore=function(){return n.createStore(n.combineReducers({gallery:s.default,playground:l.default,tutorials:p.default,env:h.default}),{},i.composeWithDevTools(n.applyMiddleware(o.default)))},t.getDefaultState=function(){return{gallery:a.defaultGalleryState,playground:u.defaultPlaygroundState,tutorials:c.defaultTutorialsState,env:d.defaultEnvState}}},770:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(130),o=r(134);t.default=function(e,t){if(!e||!t)return i.defaultGalleryState;switch(t.type){case o.GalleryActionType.LOAD_SECTION_STARTED:return n.__assign({},e,{isLoading:!0,activeSection:t.payload.section});case o.GalleryActionType.LOAD_SECTION_COMPLETED:return t.payload.section===e.activeSection?n.__assign({},e,{isLoading:!1,programs:t.payload.programs}):e;case o.GalleryActionType.TOGGLE_IMPORT_MODAL:return n.__assign({},e,{showImportModal:t.payload.show});case o.GalleryActionType.IMPORT_STARTED:return n.__assign({},e,{importErrorMessage:"",isImportInProgress:!0});case o.GalleryActionType.IMPORT_COMPLETED:return n.__assign({},e,{showImportModal:!t.payload.success,importErrorMessage:t.payload.errorMessage,isImportInProgress:!1});default:return e}}},771:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(267),o=r(178);t.default=function(e,t){if(!e||!t)return i.defaultPlaygroundState;switch(t.type){case o.PlaygroundActionType.LOAD_PROGRAM_STARTED:return n.__assign({},e,{isLoading:!0,storageType:t.payload.storageType,programId:t.payload.programId,programName:"Loading...",isRunning:!1});case o.PlaygroundActionType.LOAD_PROGRAM_COMPLETED:return t.payload.storageType===e.storageType&&t.payload.programId===e.programId?n.__assign({},e,{isLoading:!1,programName:t.payload.programModel.name,code:t.payload.programModel.code,isRunning:!0,hasModifications:!1}):e;case o.PlaygroundActionType.CODE_CHANGED:return n.__assign({},e,{code:t.payload.code,hasModifications:!0});case o.PlaygroundActionType.RUN_PROGRAM:return n.__assign({},e,{isRunning:!0});case o.PlaygroundActionType.STOP_PROGRAM:return n.__assign({},e,{isRunning:!1});case o.PlaygroundActionType.SYNC_PROGRAM_STARTED:return n.__assign({},e,{isLoading:!0});case o.PlaygroundActionType.SYNC_PROGRAM_COMPLETED:var r=n.__assign({},e,{isLoading:!1,hasModifications:!1});return t.payload.newId&&(r.programId=t.payload.newId),t.payload.newStorageType&&(r.storageType=t.payload.newStorageType),t.payload.newName&&(r.programName=t.payload.newName),r;case o.PlaygroundActionType.SYNC_PROGRAM_FAILED:return r=n.__assign({},e,{isLoading:!1});case o.PlaygroundActionType.RESET_STATE:return n.__assign({},i.defaultPlaygroundState);default:return e}}},772:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(268),o=r(180);t.default=function(e,t){if(!e||!t)return i.defaultTutorialsState;switch(t.type){case o.TutorialsActionType.LOAD_TUTORIALS_STARTED:return n.__assign({},e,{isLoading:!0});case o.TutorialsActionType.LOAD_TUTORIALS_COMPLETED:return n.__assign({},e,{isLoading:!1,tutorials:t.payload.tutorials});case o.TutorialsActionType.LOAD_STEP_STARTED:var r=t.payload.tutorialId!==e.tutorialId?"":e.code;return n.__assign({},e,{isStepLoading:!0,tutorialId:t.payload.tutorialId,stepId:t.payload.stepId,code:r});case o.TutorialsActionType.LOAD_STEP_COMPLETED:return n.__assign({},e,{isStepLoading:!1,currentTutorialInfo:t.payload.tutorialInfo,currentStepInfo:t.payload.stepInfo,currentStepContent:t.payload.content,isRunning:!0});case o.TutorialsActionType.CODE_CHANGED:return n.__assign({},e,{code:t.payload.code});case o.TutorialsActionType.RUN_PROGRAM:return n.__assign({},e,{isRunning:!0});case o.TutorialsActionType.STOP_PROGRAM:return n.__assign({},e,{isRunning:!1});case o.TutorialsActionType.FIX_THE_CODE:return e.currentStepContent?n.__assign({},e,{code:e.currentStepContent.solutionCode,isRunning:!0}):e;default:return e}}},773:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(177),o=r(72),a=r(104),s=r(20),u=r(176),l=0;t.default=function(e,t){if(!e||!t)return i.defaultEnvState;switch(t.type){case o.EnvActionType.INIT_ENV_STARTED:return n.__assign({},e,{isLoading:!0,user:a.anonymousUser});case o.EnvActionType.SIGN_IN_COMPLETED:return n.__assign({},e,{isLoading:!1,user:t.payload});case o.EnvActionType.APPLY_USER_SETTINGS_COMPLETED:var r=u.themesManager.getThemeByName(t.payload.themeName);return n.__assign({},e,{userSettings:n.__assign({},e.userSettings,t.payload),appTheme:n.__assign({},r)});case o.EnvActionType.ERROR:return n.__assign({},e,{notifications:e.notifications.concat([{id:(++l).toString(),type:i.NotificationType.danger,title:s.$T.common.error,message:t.payload.errDef.message}])});case o.EnvActionType.SHOW_NOTIFICATION:return n.__assign({},e,{notifications:[{id:(++l).toString(),type:t.payload.type,title:t.payload.title,message:t.payload.message}].concat(e.notifications)});case o.EnvActionType.CLOSE_NOTIFICATION:return n.__assign({},e,{notifications:e.notifications.filter(function(e){return e.id!==t.payload.id})});default:return e}}},78:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(608),i=function(){function e(){}return e.loginPage=new n.RouteInfo("/login"),e.infoPage=new n.RouteInfo("/info"),e.settings=new n.RouteInfo("/settings"),e.gallery=new n.RouteInfo("/gallery"),e.playgroundDefault=new n.RouteInfo("/code"),e.playground=new n.RouteInfo("/code/:storageType/:id"),e.tutorials=new n.RouteInfo("/tutorials"),e}();t.Routes=i},80:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(53),i=r(643),o=r(72),a=r(101);t.MainMenuContainer=n.connect(function(e){return{isLoggedIn:e.env.user.isLoggedIn,userImageUrl:e.env.user.imageUrl}},{onLogout:a.envThunks.signOut,onError:o.envActionCreator.handleError})(i.MainMenu)}});